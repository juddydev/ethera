{"version":3,"file":"static/js/931.c26a6d3c.chunk.js","mappings":"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","sources":["componets/NoDataImage.tsx","pages/Owner/NewUserModal.tsx","componets/EditAcl.tsx","pages/Owner/Users.tsx"],"sourcesContent":["import * as React from 'react'\nimport './NoDataImage.scss'\n\nexport default function NoDataImage() {\n  return <div className='noDataImg'></div>\n}","import React, { useState } from \"react\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport Box from \"@mui/material/Box\";\nimport IconButton from \"@mui/material/IconButton\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport { useFormik } from \"formik\";\nimport TextField from \"@mui/material/TextField\";\nimport { useStoreState } from \"../../store\";\nimport FormControl from \"@mui/material/FormControl\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport LoadingButton from \"@mui/lab/LoadingButton\";\nimport * as http from \"../../http\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogContentText from \"@mui/material/DialogContentText\";\nimport Button from \"@mui/material/Button\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport { NativeSelect } from \"@mui/material\";\n\ntype TProps = {\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  setUsers: React.Dispatch<React.SetStateAction<any>>;\n};\n\nexport default function NewUserModal({ open, setOpen, setUsers }: TProps) {\n  const apps = useStoreState((state) => state.apps);\n  const addAppUsers = useStoreState((state) => state.addAppUsers);\n  const [loading, setLoading] = useState(false);\n\n  const formik = useFormik({\n    initialValues: {\n      firstName: \"\",\n      lastName: \"\",\n      username: \"\",\n      password: \"\",\n      appId: apps[0]?._id,\n    },\n    validate: (values) => {\n      const errors: Record<string, string> = {};\n\n      if (!values.firstName) {\n        errors.firstName = \"Required\";\n      }\n\n      if (!values.lastName) {\n        errors.lastName = \"Required\";\n      }\n\n      if (!values.username) {\n        errors.username = \"Required\";\n      }\n\n      if (!values.password) {\n        errors.password = \"Required\";\n      }\n\n      return errors;\n    },\n    onSubmit: ({ username, firstName, lastName, password, appId }) => {\n      setLoading(true);\n      const app = apps.find((el) => el._id === appId);\n      http\n        .registerUsername(\n          username,\n          password,\n          firstName,\n          lastName,\n          app?.appToken\n        )\n        .then((result) => {\n          setUsers((old) => {\n            return [...old, result.data.user];\n          });\n          setOpen(false);\n        });\n    },\n  });\n\n  if (apps.length === 0) {\n    return (\n      <Dialog\n        open={open}\n        onClose={() => {}}\n        aria-labelledby=\"responsive-dialog-title\"\n      >\n        <DialogTitle id=\"responsive-dialog-title\">There is no apps</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            You should create app first please!\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            disabled={loading}\n            variant=\"contained\"\n            autoFocus\n            onClick={() => setOpen(false)}\n          >\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Dialog onClose={() => {}} open={open}>\n      <Box style={{ width: \"400px\" }}>\n        <DialogTitle\n          style={{ display: \"flex\", justifyContent: \"space-between\" }}\n        >\n          New User\n          <IconButton disabled={loading} onClick={() => setOpen(false)}>\n            <CloseIcon />\n          </IconButton>\n        </DialogTitle>\n        <Box sx={{ width: \"100%\", typography: \"body1\", padding: 1 }}>\n          <form onSubmit={formik.handleSubmit}>\n            <Box>\n              <FormControl fullWidth>\n                <InputLabel variant=\"standard\" htmlFor=\"uncontrolled-native\">\n                  App\n                </InputLabel>\n                <NativeSelect\n                  inputProps={{\n                    name: \"appName\",\n                    id: \"uncontrolled-native\",\n                  }}\n                  onChange={(e) => {\n                    formik.setFieldValue(\"appId\", e.target.value);\n                  }}\n                >\n                  {apps.map((app) => {\n                    return (\n                      <option key={app._id} value={app._id}>\n                        {app.appName}\n                      </option>\n                    );\n                  })}\n                </NativeSelect>\n              </FormControl>\n            </Box>\n            <Box>\n              <TextField\n                fullWidth\n                error={\n                  formik.touched.firstName && formik.errors.firstName\n                    ? true\n                    : false\n                }\n                helperText={\n                  formik.touched.firstName && formik.errors.firstName\n                    ? formik.errors.firstName\n                    : \"\"\n                }\n                margin=\"dense\"\n                label=\"First Name\"\n                name=\"firstName\"\n                variant=\"standard\"\n                onChange={formik.handleChange}\n                onBlur={formik.handleBlur}\n                value={formik.values.firstName}\n              />\n              <TextField\n                fullWidth\n                error={\n                  formik.touched.lastName && formik.errors.lastName\n                    ? true\n                    : false\n                }\n                helperText={\n                  formik.touched.lastName && formik.errors.lastName\n                    ? formik.errors.lastName\n                    : \"\"\n                }\n                margin=\"dense\"\n                label=\"Last Name\"\n                name=\"lastName\"\n                variant=\"standard\"\n                onChange={formik.handleChange}\n                onBlur={formik.handleBlur}\n                value={formik.values.lastName}\n              />\n              <TextField\n                fullWidth\n                error={\n                  formik.touched.lastName && formik.errors.username\n                    ? true\n                    : false\n                }\n                helperText={\n                  formik.touched.username && formik.errors.username\n                    ? formik.errors.username\n                    : \"\"\n                }\n                margin=\"dense\"\n                label=\"Username\"\n                name=\"username\"\n                variant=\"standard\"\n                onChange={formik.handleChange}\n                onBlur={formik.handleBlur}\n                value={formik.values.username}\n              />\n              <TextField\n                fullWidth\n                error={\n                  formik.touched.password && formik.errors.password\n                    ? true\n                    : false\n                }\n                helperText={\n                  formik.touched.password && formik.errors.password\n                    ? formik.errors.password\n                    : \"\"\n                }\n                margin=\"dense\"\n                label=\"Password\"\n                name=\"password\"\n                variant=\"standard\"\n                onChange={formik.handleChange}\n                onBlur={formik.handleBlur}\n                value={formik.values.password}\n              />\n            </Box>\n            <Box\n              style={{\n                display: \"inline-flex\",\n                margin: \"0 auto\",\n                flexDirection: \"column\",\n              }}\n            >\n              <LoadingButton\n                loading={loading}\n                variant=\"contained\"\n                style={{ marginTop: \"15px\" }}\n                type=\"submit\"\n                disabled={loading}\n              >\n                Create New User\n              </LoadingButton>\n            </Box>\n          </form>\n        </Box>\n      </Box>\n    </Dialog>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableContainer from \"@mui/material/TableContainer\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport { Button, Checkbox, Typography } from \"@mui/material\";\r\nimport {\r\n  getUserAcl,\r\n  IAclBody,\r\n  IUserAcl,\r\n  TPermission,\r\n  updateUserAcl,\r\n} from \"../http\";\r\nimport { Box } from \"@mui/system\";\r\nimport { FullPageSpinner } from \"./FullPageSpinner\";\r\nimport { useStoreState } from \"../store\";\r\n\r\nexport interface IEditAcl {\r\n  userId: string;\r\n  updateData?(user: IUserAcl): void;\r\n}\r\n\r\nconst label = { inputProps: { \"aria-label\": \"Checkbox\" } };\r\ntype TKeys =\r\n  | \"appCreate\"\r\n  | \"appPush\"\r\n  | \"appSettings\"\r\n  | \"appStats\"\r\n  | \"appTokens\"\r\n  | \"appUsers\";\r\n\r\nconst checkDisabled = (arr: Array<string> | undefined, property: string) => {\r\n  if (!arr) return false;\r\n  return !!arr.find((item) => item === property);\r\n};\r\nconst checkAdminEnabled = (acl: TPermission) => {\r\n  if (!acl) return false;\r\n  return !!Object.entries(acl).find((item) => item[0] === \"admin\" && !!item[1]);\r\n};\r\nconst Row = ({\r\n  name,\r\n  row,\r\n  onChange,\r\n  disableAllRow,\r\n}: {\r\n  name: TKeys;\r\n  row: TPermission;\r\n  disableAllRow: boolean;\r\n  onChange: (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    keyToChange: TKeys\r\n  ) => void;\r\n}) => {\r\n  const isOwner = useStoreState((state) => state.user?.ACL.ownerAccess);\r\n  return (\r\n    <TableRow\r\n      sx={{\r\n        \"&:last-child td, &:last-child th\": { border: 0 },\r\n      }}\r\n    >\r\n      <TableCell component=\"th\" scope=\"row\">\r\n        {name}\r\n      </TableCell>\r\n      <TableCell\r\n        style={{\r\n          backgroundColor: !checkDisabled(row?.disabled, \"create\")\r\n            ? \"white\"\r\n            : \"lightgrey\",\r\n        }}\r\n        align=\"left\"\r\n      >\r\n        <Checkbox\r\n          checked={row?.create}\r\n          name={\"create\"}\r\n          disabled={\r\n            (checkDisabled(row?.disabled, \"create\") || disableAllRow) &&\r\n            !isOwner\r\n          }\r\n          onChange={(e) => onChange(e, name)}\r\n          {...label}\r\n        />\r\n      </TableCell>\r\n      <TableCell\r\n        style={{\r\n          backgroundColor: !checkDisabled(row?.disabled, \"read\")\r\n            ? \"white\"\r\n            : \"lightgrey\",\r\n        }}\r\n        align=\"left\"\r\n      >\r\n        <Checkbox\r\n          name={\"read\"}\r\n          onChange={(e) => onChange(e, name)}\r\n          disabled={checkDisabled(row?.disabled, \"read\") || disableAllRow}\r\n          checked={row?.read}\r\n          {...label}\r\n        />\r\n      </TableCell>\r\n      <TableCell\r\n        style={{\r\n          backgroundColor: !checkDisabled(row?.disabled, \"update\")\r\n            ? \"white\"\r\n            : \"lightgrey\",\r\n        }}\r\n        align=\"left\"\r\n      >\r\n        <Checkbox\r\n          name={\"update\"}\r\n          onChange={(e) => onChange(e, name)}\r\n          disabled={checkDisabled(row?.disabled, \"update\") || disableAllRow}\r\n          checked={row?.update}\r\n          {...label}\r\n        />\r\n      </TableCell>\r\n      <TableCell\r\n        style={{\r\n          backgroundColor: !checkDisabled(row?.disabled, \"delete\")\r\n            ? \"white\"\r\n            : \"lightgrey\",\r\n        }}\r\n        align=\"left\"\r\n      >\r\n        <Checkbox\r\n          name={\"delete\"}\r\n          onChange={(e) => onChange(e, name)}\r\n          disabled={checkDisabled(row?.disabled, \"delete\") || disableAllRow}\r\n          checked={row?.delete}\r\n          {...label}\r\n        />\r\n      </TableCell>\r\n      <TableCell\r\n        style={{\r\n          backgroundColor: !checkDisabled(row?.disabled, \"admin\")\r\n            ? \"white\"\r\n            : \"lightgrey\",\r\n        }}\r\n        align=\"left\"\r\n      >\r\n        <Checkbox\r\n          name={\"admin\"}\r\n          onChange={(e) => onChange(e, name)}\r\n          disabled={checkDisabled(row?.disabled, \"admin\") || disableAllRow}\r\n          checked={row?.admin}\r\n          {...label}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nexport const EditAcl: React.FC<IEditAcl> = ({ userId, updateData }) => {\r\n  const [userAcl, setUserAcl] = useState<IUserAcl>();\r\n  const [userAclApplicationKeys, setUserAclApplicationKeys] = useState<\r\n    Array<TKeys>\r\n  >([]);\r\n  const [userAclNetworkKeys, setUserAclNetworkKeys] = useState<Array<TKeys>>(\r\n    []\r\n  );\r\n  const myAcl = useStoreState((state) => state.ACL);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(\"userAclApplicationKeys \", userAclApplicationKeys);\r\n  }, [userAclApplicationKeys]);\r\n\r\n  const getAcl = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data } = await getUserAcl(userId);\r\n      console.log(\"getAcl \", data);\r\n      setUserAcl(data);\r\n      const appKeys = Object.keys(data.result.application) as TKeys[];\r\n      const networkKeys = Object.keys(data.result.network) as TKeys[];\r\n\r\n      setUserAclApplicationKeys(appKeys);\r\n      setUserAclNetworkKeys(networkKeys);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const onApplicationAclChange = (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    keyToChange: TKeys\r\n  ) => {\r\n    setUserAcl((prev) => ({\r\n      result: {\r\n        ...prev!.result,\r\n        application: {\r\n          ...prev!.result!.application,\r\n          [keyToChange]: {\r\n            ...prev!.result!.application[keyToChange],\r\n            [e.target.name]: e.target.checked,\r\n          },\r\n        },\r\n      },\r\n    }));\r\n  };\r\n  const onNetworkAclChange = (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    keyToChange: TKeys\r\n  ) => {\r\n    setUserAcl((prev) => ({\r\n      result: {\r\n        ...prev!.result,\r\n        network: {\r\n          ...prev!.result!.network,\r\n          netStats: {\r\n            ...prev!.result!.network.netStats,\r\n            [e.target.name]: e.target.checked,\r\n          },\r\n        },\r\n      },\r\n    }));\r\n  };\r\n\r\n  const updateAcl = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const filteredApplication = Object.fromEntries(\r\n        Object.entries(userAcl!.result!.application).map((item) => {\r\n          delete item[1].disabled;\r\n          return item;\r\n        })\r\n      );\r\n      const filteredNetwork = Object.fromEntries(\r\n        Object.entries(userAcl!.result!.network).map((item) => {\r\n          delete item[1].disabled;\r\n          return item;\r\n        })\r\n      );\r\n\r\n      const body = {\r\n        application: filteredApplication,\r\n        network: filteredNetwork,\r\n      } as IAclBody;\r\n\r\n      const aclRes = await updateUserAcl(userId, body);\r\n      const updatedUserAcl = aclRes.data as IUserAcl;\r\n      if (updateData) {\r\n        updateData(updatedUserAcl);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n  useEffect(() => {\r\n    getAcl();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <FullPageSpinner />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Typography marginBottom={\"10px\"} fontWeight={\"bold\"}>\r\n        Applications\r\n      </Typography>\r\n\r\n      <TableContainer component={Paper}>\r\n        <Table size={\"small\"} sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Name</TableCell>\r\n              <TableCell>Create</TableCell>\r\n              <TableCell align=\"left\">Read</TableCell>\r\n              <TableCell align=\"left\">Update</TableCell>\r\n              <TableCell align=\"left\">Delete</TableCell>\r\n              <TableCell align=\"left\">Admin</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {myAcl.result &&\r\n              userAclApplicationKeys.map((row) => {\r\n                const application = userAcl!.result.application[row];\r\n                const myApplicationAcl = myAcl!.result.application[row];\r\n\r\n                return (\r\n                  <Row\r\n                    disableAllRow={!checkAdminEnabled(myApplicationAcl)}\r\n                    // disableAllRow={false}\r\n                    onChange={onApplicationAclChange}\r\n                    name={row}\r\n                    row={application}\r\n                    key={row}\r\n                  />\r\n                );\r\n              })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Typography marginBottom={\"10px\"} marginTop={\"10px\"} fontWeight={\"bold\"}>\r\n        Networks\r\n      </Typography>\r\n\r\n      <TableContainer component={Paper}>\r\n        <Table size={\"small\"} sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Name</TableCell>\r\n\r\n              <TableCell>Create</TableCell>\r\n              <TableCell align=\"left\">Read</TableCell>\r\n              <TableCell align=\"left\">Update</TableCell>\r\n              <TableCell align=\"left\">Delete</TableCell>\r\n              <TableCell align=\"left\">Admin</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {/* {userAclNetworkKeys.map((row) => {\r\n              const network = userAcl!.result.network.netStats;\r\n              const myNetworkAcl = myAcl!.result.network.netStats;\r\n\r\n              return (\r\n                <Row\r\n                  disableAllRow={!checkAdminEnabled(myNetworkAcl)}\r\n                  // disableAllRow={false}\r\n                  onChange={onNetworkAclChange}\r\n                  name={row}\r\n                  row={network}\r\n                  key={row}\r\n                />\r\n              );\r\n            })} */}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Box\r\n        sx={{\r\n          display: \"flex\",\r\n          width: \"100%\",\r\n          justifyContent: \"flex-end\",\r\n          marginTop: \"20px\",\r\n        }}\r\n      >\r\n        <Button variant=\"contained\" onClick={updateAcl}>\r\n          Update Acl\r\n        </Button>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableContainer from \"@mui/material/TableContainer\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { IconButton, Modal, Typography } from \"@mui/material\";\r\nimport AddCircleIcon from \"@mui/icons-material/AddCircle\";\r\nimport Select, { SelectChangeEvent } from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport { useStoreState } from \"../../store\";\r\nimport NoDataImage from \"../../componets/NoDataImage\";\r\nimport NewUserModal from \"./NewUserModal\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport Pagination from \"@mui/material/Pagination\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport * as http from \"../../http\";\r\nimport { EditAcl } from \"../../componets/EditAcl\";\r\n\r\nconst boxStyle = {\r\n  position: \"absolute\" as \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"70vw\",\r\n  bgcolor: \"background.paper\",\r\n  boxShadow: 24,\r\n  borderRadius: \"10px\",\r\n  p: 4,\r\n};\r\n\r\nfunction hasACLAdmin(acl: http.IUserAcl): boolean {\r\n  const appKeys = Object.keys(acl.result.application);\r\n  let hasAdmin = false;\r\n  for (let i = 0; i < appKeys.length; i++) {\r\n    if (acl.result.application[appKeys[i]].admin === true) {\r\n      hasAdmin = true;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return hasAdmin;\r\n}\r\n\r\nexport default function UsersTable() {\r\n  const apps = useStoreState((state) => state.apps);\r\n  const ownerAccess = useStoreState((state) => state.user.ACL.ownerAccess);\r\n  const user = useStoreState((state) => state.user);\r\n  const [showNewUser, setShowNewUser] = React.useState(false);\r\n  const [users, setUsers] = React.useState<[] | http.IUser[]>([]);\r\n  const [currentApp, setCurrentApp] = React.useState<string>();\r\n  const [aclEditData, setAclEditData] = React.useState({\r\n    modalOpen: false,\r\n    userId: \"\",\r\n  });\r\n  const [hasAdmin, setHasAdmin] = React.useState(false);\r\n  const ACL = useStoreState((state) => state.ACL);\r\n\r\n  React.useEffect(() => {\r\n    setHasAdmin(hasACLAdmin(ACL));\r\n  }, [ACL]);\r\n\r\n  const [pagination, setPagination] = React.useState<{\r\n    total: number;\r\n    limit: number;\r\n    offset: number;\r\n  }>();\r\n\r\n  const getUsers = async (\r\n    appId: string | null,\r\n    limit: number = 10,\r\n    offset: number = 0\r\n  ) => {\r\n    try {\r\n      if (appId) {\r\n        console.log(appId);\r\n        const getUsersResp = await http.getAppUsers(appId, limit, offset);\r\n        const { data } = getUsersResp;\r\n        setPagination({\r\n          limit: data.limit,\r\n          offset: data.offset,\r\n          total: data.total,\r\n        });\r\n        return data.items;\r\n      }\r\n    } catch (e) {}\r\n    return [];\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (ownerAccess) {\r\n      if (apps.length) {\r\n        setCurrentApp(apps[0]._id);\r\n        getUsers(apps[0]._id).then((users) => {\r\n          setUsers(users);\r\n        });\r\n      }\r\n    }\r\n  }, [apps]);\r\n\r\n  React.useEffect(() => {\r\n    if (!ownerAccess) {\r\n      setCurrentApp(user.appId);\r\n      getUsers(user.appId).then((users) => {\r\n        setUsers(users);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    console.log(\"Users mount\");\r\n  }, []);\r\n\r\n  const onAppSelectChange = (e: SelectChangeEvent) => {\r\n    setCurrentApp(e.target.value);\r\n    getUsers(e.target.value).then((users) => {\r\n      setUsers(users);\r\n    });\r\n  };\r\n\r\n  const onPagination = (event: React.ChangeEvent<unknown>, page: number) => {\r\n    // page = 1 => offset 0\r\n    // page = 2 => offset 10\r\n    // page = 3 => offset 20\r\n    let offset = 0;\r\n    if (page - 1 > 0) {\r\n      offset = (page - 1) * (pagination?.limit || 10);\r\n    }\r\n\r\n    getUsers(currentApp || null, pagination?.limit || 10, offset).then(\r\n      (users) => setUsers(users)\r\n    );\r\n  };\r\n\r\n  const handleAclEditOpen = (userId: string) =>\r\n    setAclEditData({ modalOpen: true, userId: userId });\r\n\r\n  const handleAclEditClose = () =>\r\n    setAclEditData({ modalOpen: false, userId: \"\" });\r\n\r\n  const updateUserDataAfterAclChange = (user: http.IUserAcl) => {\r\n    const oldUsers = users;\r\n    const indexToUpdate = oldUsers.findIndex(\r\n      (item) => item._id === aclEditData.userId\r\n    );\r\n    if (indexToUpdate !== -1) {\r\n    }\r\n    oldUsers[indexToUpdate]._id = user.result.userId;\r\n    setUsers(oldUsers);\r\n  };\r\n\r\n  return (\r\n    <TableContainer component={Paper} style={{ margin: \"0 auto\" }}>\r\n      <Box style={{ display: \"flex\", alignItems: \"center\" }}>\r\n        <Typography variant=\"h6\" style={{ margin: \"16px\" }}>\r\n          Users\r\n        </Typography>\r\n        {currentApp && ownerAccess ? (\r\n          <FormControl variant=\"standard\" sx={{ m: 1, minWidth: 120 }}>\r\n            <InputLabel id=\"demo-simple-select-label\">App</InputLabel>\r\n            <Select\r\n              labelId=\"demo-simple-select-label\"\r\n              id=\"demo-simple-select\"\r\n              label=\"App\"\r\n              value={currentApp}\r\n              onChange={onAppSelectChange}\r\n            >\r\n              {apps.map((app) => {\r\n                return (\r\n                  <MenuItem key={app._id} value={app._id}>\r\n                    {app.appName}\r\n                  </MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        ) : null}\r\n\r\n        {(ownerAccess || ACL.result.application.appUsers.create) && (\r\n          <IconButton onClick={() => setShowNewUser(true)} size=\"large\">\r\n            <AddCircleIcon fontSize=\"large\"></AddCircleIcon>\r\n          </IconButton>\r\n        )}\r\n      </Box>\r\n      {users.length === 0 && (\r\n        <Box\r\n          style={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <NoDataImage></NoDataImage>\r\n          <Typography style={{ marginTop: \"20px\", marginBottom: \"20px\" }}>\r\n            Users not found.\r\n          </Typography>\r\n        </Box>\r\n      )}\r\n\r\n      {users.length > 0 && (\r\n        <Table aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell width={200}>appId</TableCell>\r\n              <TableCell align=\"right\">firstName</TableCell>\r\n              <TableCell align=\"right\">lastName</TableCell>\r\n              <TableCell align=\"right\">username</TableCell>\r\n              <TableCell align=\"right\">email</TableCell>\r\n              <TableCell align=\"right\">Actions</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {users.map((user) => (\r\n              <TableRow\r\n                key={user._id}\r\n                sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\r\n              >\r\n                <TableCell component=\"th\" scope=\"row\">\r\n                  {user.appId}\r\n                </TableCell>\r\n                <TableCell align=\"right\">{user.firstName}</TableCell>\r\n                <TableCell align=\"right\">{user.lastName}</TableCell>\r\n                <TableCell align=\"right\">\r\n                  {user.username ? user.username : \"-\"}\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  {user.email ? user.email : \"-\"}\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <Box sx={{ width: \"200px\" }}>\r\n                    {ACL.result.application.appUsers.update && (\r\n                      <Typography>Edit</Typography>\r\n                    )}\r\n\r\n                    {hasAdmin && (\r\n                      <Typography\r\n                        style={{\r\n                          cursor: \"pointer\",\r\n                          textDecoration: \"underline\",\r\n                        }}\r\n                        onClick={() => handleAclEditOpen(user._id)}\r\n                      >\r\n                        Edit ACL\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n            {pagination?.total && (\r\n              <TableRow>\r\n                <TableCell colSpan={6}>\r\n                  <Pagination\r\n                    onChange={onPagination}\r\n                    count={Math.ceil(pagination.total / pagination.limit)}\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      )}\r\n      <NewUserModal\r\n        open={showNewUser}\r\n        setUsers={setUsers}\r\n        setOpen={setShowNewUser}\r\n      />\r\n      <Modal\r\n        open={aclEditData.modalOpen}\r\n        onClose={handleAclEditClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box sx={boxStyle}>\r\n          <EditAcl\r\n            updateData={updateUserDataAfterAclChange}\r\n            userId={aclEditData.userId}\r\n          />\r\n          <IconButton\r\n            onClick={handleAclEditClose}\r\n            sx={{ position: \"absolute\", top: 0, right: 0, color: \"black\" }}\r\n          >\r\n            <CloseIcon fontSize={\"large\"} />\r\n          </IconButton>\r\n        </Box>\r\n      </Modal>\r\n    </TableContainer>\r\n  );\r\n}\r\n"],"names":["NoDataImage","className","NewUserModal","open","setOpen","setUsers","apps","useStoreState","state","addAppUsers","useState","loading","setLoading","formik","useFormik","initialValues","firstName","lastName","username","password","appId","_id","validate","values","errors","onSubmit","app","find","el","http","appToken","then","result","old","data","user","length","Dialog","onClose","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","disabled","variant","autoFocus","onClick","Box","style","width","display","justifyContent","IconButton","Close","sx","typography","padding","handleSubmit","FormControl","fullWidth","InputLabel","htmlFor","NativeSelect","inputProps","name","onChange","e","setFieldValue","target","value","map","appName","TextField","error","touched","helperText","margin","label","handleChange","onBlur","handleBlur","flexDirection","LoadingButton","marginTop","type","checkDisabled","arr","property","item","Row","row","disableAllRow","isOwner","ACL","ownerAccess","TableRow","border","TableCell","component","scope","backgroundColor","align","Checkbox","checked","create","read","update","delete","admin","EditAcl","userId","updateData","userAcl","setUserAcl","userAclApplicationKeys","setUserAclApplicationKeys","setUserAclNetworkKeys","myAcl","useEffect","console","log","getAcl","getUserAcl","appKeys","Object","keys","application","networkKeys","network","onApplicationAclChange","keyToChange","prev","updateAcl","filteredApplication","fromEntries","entries","filteredNetwork","body","updateUserAcl","aclRes","updatedUserAcl","FullPageSpinner","Typography","marginBottom","fontWeight","TableContainer","Paper","Table","size","minWidth","TableHead","TableBody","acl","myApplicationAcl","boxStyle","position","top","left","transform","bgcolor","boxShadow","borderRadius","p","UsersTable","React","showNewUser","setShowNewUser","users","currentApp","setCurrentApp","modalOpen","aclEditData","setAclEditData","hasAdmin","setHasAdmin","i","hasACLAdmin","pagination","setPagination","getUsers","limit","offset","getUsersResp","total","items","handleAclEditClose","alignItems","m","Select","labelId","MenuItem","appUsers","AddCircle","fontSize","email","cursor","textDecoration","colSpan","Pagination","event","page","count","Math","ceil","Modal","oldUsers","indexToUpdate","findIndex","right","color"],"sourceRoot":""}