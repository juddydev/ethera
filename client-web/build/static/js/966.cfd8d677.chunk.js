"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[966],{83589:function(e,n,t){t.r(n),t.d(n,{default:function(){return Pn}});var r=t(72791),a=t.t(r,2),s=t(74165),i=t(15861),o=t(70885),l=t(21680),c=t(19773),d=t(24390),u=t(69963),p=t(9827),h=t(60807),f=t(56650),x=t(50228),m=t(4565),Z=t(55152),g=t(13811),v=t(68439),j=t(11210),b=t(32037),y=t(1413),w=t(60788),C=t(40464),S=t(29823),A=t(55705),P=t(59911),k=t(39709),I=t(21176),N=t(72900),T=t(45473),O=t(52775),R=t(80184);function M(e){var n=e.open,t=e.setOpen,a=r.useRef(null),s=(0,j.K)((function(e){return e.setApp})),i=(0,j.K)((function(e){return e.setUser})),l=(0,j.K)((function(e){return e.user})),c=(0,r.useState)(!1),d=(0,o.Z)(c,2),u=d[0],p=d[1],h=(0,r.useState)(""),f=(0,o.Z)(h,2),Z=(f[0],f[1]),v=(0,O.D)().showSnackbar,b=(0,A.TA)({initialValues:{appName:"",appDescription:"",appGoogleId:"",defaultAccessProfileOpen:!1,defaultAccessAssetsOpen:!1,usersCanFree:!1,newUserTokenGift:0,coinsDayliBonus:0,appUrl:""},validate:function(e){var n={};return e.appName||(n.appName="Required"),n},onSubmit:function(e){var n=e.appName,r=e.appDescription,o=e.appGoogleId,c=e.defaultAccessAssetsOpen,d=e.defaultAccessProfileOpen,u=e.usersCanFree,h=e.appUrl;p(!0);var f,x=new FormData;if(a.current){var m=a.current.files;m&&(f=m[0])}f&&x.append("file",f),x.append("displayName",n),r&&x.append("appDescription",r.toString()),o&&x.append("appGoogleId",o.toString()),x.append("defaultAccessAssetsOpen",c.toString()),x.append("defaultAccessProfileOpen",d.toString()),x.append("usersCanFree",u.toString()),h&&x.append("appUrl",h.toString()),I.ri(x).then((function(e){s(e.data.app),t(!1),i((0,y.Z)((0,y.Z)({},l),{},{homeScreen:""}))})).catch((function(e){var n,t;v("error","Cannot create the app "+((null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error)||""))})).finally((function(){return p(!1)}))}});return(0,R.jsx)(w.Z,{onClose:function(){t(!1),Z("")},open:n,children:(0,R.jsxs)(x.Z,{sx:{padding:1},children:[(0,R.jsx)(g.Z,{sx:{position:"absolute",top:0,right:0},disabled:u,onClick:function(){return t(!1)},children:(0,R.jsx)(S.Z,{})}),(0,R.jsx)(C.Z,{sx:{padding:1},children:"New App"}),(0,R.jsx)(x.Z,{sx:{width:"100%",padding:1},children:(0,R.jsxs)("form",{onSubmit:b.handleSubmit,style:{width:"100%"},children:[(0,R.jsx)(x.Z,{children:(0,R.jsx)(P.Z,{sx:{width:"100%"},error:!!b.touched.appName&&!!b.errors.appName,margin:"dense",label:"App Name",name:"appName",variant:"outlined",onChange:b.handleChange,onBlur:b.handleBlur,value:b.values.appName})}),(0,R.jsx)(x.Z,{children:(0,R.jsx)(P.Z,{sx:{width:"100%"},margin:"dense",label:"App Url",name:"appUrl",variant:"outlined",onChange:b.handleChange,onBlur:b.handleBlur,value:b.values.appUrl,error:!!b.touched.appUrl&&!!b.errors.appUrl})}),(0,R.jsx)(x.Z,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:(0,R.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,R.jsxs)(x.Z,{children:[(0,R.jsx)(m.Z,{sx:{fontWeight:"bold",fontSize:14},children:"Default Permissions"}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"These are the default permissions to be applied to all Users created in your App. Keep the recommended settings if you are not sure and you can come back to this later."})]}),(0,R.jsxs)(x.Z,{children:[(0,R.jsx)(N.Z,{checked:b.values.defaultAccessProfileOpen,name:"defaultAccessProfileOpen",control:(0,R.jsx)(T.Z,{onChange:function(e){return b.setFieldValue("defaultAccessProfileOpen",e.target.checked)}}),label:(0,R.jsx)(m.Z,{sx:{fontWeight:"bold",fontSize:14},children:'Profiles Open ("defaultAccessProfileOpen")'}),labelPlacement:"end",onChange:b.handleChange}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"If enabled, your users profiles can be viewed by any other users and automated agents who follow a correct permanent link."}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"This is better for social discovery and social commerce but you can disable this if you prefer a tighter security."}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"This is a default setting for all newly created users. Users will be able to change this later themselves."})]}),(0,R.jsxs)(x.Z,{children:[(0,R.jsx)(N.Z,{checked:b.values.defaultAccessAssetsOpen,name:"defaultAccessAssetsOpen",control:(0,R.jsx)(T.Z,{onChange:function(e){return b.setFieldValue("defaultAccessAssetsOpen",e.target.checked)}}),label:(0,R.jsx)(m.Z,{sx:{fontWeight:"bold",fontSize:14},children:'Assets Visible ("defaultAccessAssetsOpen")'}),labelPlacement:"end"}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"If enabled, all of your users assets (such as Tokens, Documents and Data) can be viewed by any other users and automated agents who are able to read your user's profile."}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"If disabled, your user needs to explicitly share each asset via a special link."}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"This is a default setting for all newly created users. Users will be able to change this later themselves."})]}),(0,R.jsxs)(x.Z,{children:[(0,R.jsx)(N.Z,{checked:b.values.usersCanFree,name:"usersCanFree",control:(0,R.jsx)(T.Z,{onChange:function(e){return b.setFieldValue("usersCanFree",e.target.checked)}}),label:(0,R.jsx)(m.Z,{sx:{fontWeight:"bold",fontSize:14},children:'Self-Sovereignty ("usersCanFree")'}),labelPlacement:"end"}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"If enabled, your users can take over management of their own account and make it decoupled from your App."}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"Most business applications will prefer this switched off so that users account and wallet only works within your App."}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"This is a default setting for all newly created users. Users will be able to change this later themselves."})]})]})}),(0,R.jsx)(k.Z,{loading:u,variant:"contained",style:{marginTop:"15px",width:"100%"},type:"submit",disabled:u,children:"Create App"})]})})]})})}var D=t(17205),L=t(77248),B=t(8440),z=t(39571),F=t(69120),_=t(33073),U=t(93026);function W(e,n,t,a,s){var i="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,l=r.useState((function(){return s&&i?t(e).matches:a?a(e).matches:n})),c=(0,o.Z)(l,2),d=c[0],u=c[1];return(0,U.Z)((function(){var n=!0;if(i){var r=t(e),a=function(){n&&u(r.matches)};return a(),r.addListener(a),function(){n=!1,r.removeListener(a)}}}),[e,t,i]),d}var K=a.useSyncExternalStore;function V(e,n,t,a){var s=r.useCallback((function(){return n}),[n]),i=r.useMemo((function(){if(null!==a){var n=a(e).matches;return function(){return n}}return s}),[s,e,a]),l=r.useMemo((function(){if(null===t)return[s,function(){return function(){}}];var n=t(e);return[function(){return n.matches},function(e){return n.addListener(e),function(){n.removeListener(e)}}]}),[s,t,e]),c=(0,o.Z)(l,2),d=c[0],u=c[1];return K(u,d,i)}function G(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,F.Z)(),r="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,a=(0,_.Z)({name:"MuiUseMediaQuery",props:n,theme:t}),s=a.defaultMatches,i=void 0!==s&&s,o=a.matchMedia,l=void 0===o?r?window.matchMedia:null:o,c=a.ssrMatchMedia,d=void 0===c?null:c,u=a.noSsr;var p="function"===typeof e?e(t):e;p=p.replace(/^@media( ?)/m,"");var h=void 0!==K?V:W,f=h(p,i,l,d,u);return f}var E=t(74142);function H(e){var n,t=r.useState(!1),a=(0,o.Z)(t,2),s=a[0],i=a[1],l=(0,j.K)((function(e){return e.deleteApp})),c=G((0,E.Z)().breakpoints.down("md"));return(0,R.jsx)("div",{children:(0,R.jsxs)(w.Z,{fullScreen:c,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"responsive-dialog-title",children:[(0,R.jsxs)(C.Z,{id:"responsive-dialog-title",children:["Are you sure want to remove application ",null===(n=e.app)||void 0===n?void 0:n.appName]}),(0,R.jsx)(B.Z,{children:(0,R.jsx)(z.Z,{children:"Your app clients(mobile, web) will not be able to send requests to Platform API after deleting the app"})}),(0,R.jsxs)(L.Z,{children:[(0,R.jsx)(D.Z,{disabled:s,variant:"contained",autoFocus:!0,onClick:function(){return e.setOpen(!1)},children:"Cancel"}),(0,R.jsx)(k.Z,{variant:"contained",loading:s,color:"error",onClick:function(){var n;e.app&&null!==(n=e.app)&&void 0!==n&&n._id&&(i(!0),I.P2(e.app._id).then((function(){var n;l(null===(n=e.app)||void 0===n?void 0:n._id),e.setOpen(!1)})).finally((function(){return i(!1)})))},autoFocus:!0,children:"Delete"})]})]})})}function q(e){var n=e.open,t=e.setOpen,a=e.app,s=r.useRef(null),i=(0,r.useState)(!1),l=(0,o.Z)(i,2),c=l[0],d=l[1],u=(0,j.K)((function(e){return e.updateApp})),p=(0,A.TA)({initialValues:{appName:a.appName,appDescription:a.appDescription?a.appDescription:"",appGoogleId:a.appGoogleId?a.appGoogleId:"",defaultAccessProfileOpen:a.defaultAccessProfileOpen,defaultAccessAssetsOpen:a.defaultAccessAssetsOpen,usersCanFree:a.usersCanFree},validate:function(e){var n={};return e.appName||(n.appName="Required"),n},onSubmit:function(e){var n=e.appName,r=e.appDescription,i=e.appGoogleId,o=e.defaultAccessAssetsOpen,l=e.defaultAccessProfileOpen,c=e.usersCanFree;d(!0);var p,h=new FormData;if(s.current){var f=s.current.files;f&&(p=f[0])}p&&h.append("file",p),h.append("appName",n),h.append("appDesctription",r),h.append("appGoogleId",i),h.append("defaultAccessAssetsOpen",o.toString()),h.append("defaultAccessProfileOpen",l.toString()),h.append("usersCanFree",c.toString()),I.KT(a._id,h).then((function(e){u(e.data.app),t(!1)})).finally((function(){return d(!1)}))}});return(0,R.jsx)(w.Z,{onClose:function(){return t(!1)},open:n,children:(0,R.jsxs)(x.Z,{children:[(0,R.jsxs)(C.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Edit App",(0,R.jsx)(g.Z,{disabled:c,onClick:function(){return t(!1)},children:(0,R.jsx)(S.Z,{})})]}),(0,R.jsx)(x.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,R.jsxs)("form",{onSubmit:p.handleSubmit,children:[(0,R.jsx)(x.Z,{children:(0,R.jsx)(P.Z,{error:!(!p.touched.appName||!p.errors.appName),helperText:p.touched.appName&&p.errors.appName?p.errors.appName:"",margin:"dense",label:"App Name",name:"appName",variant:"standard",onChange:p.handleChange,onBlur:p.handleBlur,value:p.values.appName})}),(0,R.jsx)(x.Z,{children:(0,R.jsx)(P.Z,{margin:"dense",label:"Google Client Id",name:"appGoogleId",variant:"standard",onChange:p.handleChange,onBlur:p.handleBlur,value:p.values.appGoogleId})}),(0,R.jsxs)(x.Z,{style:{display:"inline-flex",flexDirection:"column"},children:[(0,R.jsx)(N.Z,{checked:p.values.defaultAccessProfileOpen,name:"defaultAccessProfileOpen",control:(0,R.jsx)(T.Z,{onChange:function(e){return p.setFieldValue("defaultAccessProfileOpen",e.target.checked)}}),label:"defaultAccessProfileOpen",labelPlacement:"end",onChange:p.handleChange}),(0,R.jsx)(N.Z,{checked:p.values.defaultAccessAssetsOpen,name:"defaultAccessAssetsOpen",control:(0,R.jsx)(T.Z,{onChange:function(e){return p.setFieldValue("defaultAccessAssetsOpen",e.target.checked)}}),label:"defaultAccessAssetsOpen",labelPlacement:"end"}),(0,R.jsx)(N.Z,{checked:p.values.usersCanFree,name:"usersCanFree",control:(0,R.jsx)(T.Z,{onChange:function(e){return p.setFieldValue("usersCanFree",e.target.checked)}}),label:"usersCanFree",labelPlacement:"end"}),(0,R.jsx)("input",{ref:s,type:"file",accept:"image/*"}),(0,R.jsx)(k.Z,{loading:c,variant:"contained",style:{marginTop:"15px"},type:"submit",children:"Update App"})]})]})})]})})}function Y(e){var n,t=r.useState(!1),a=(0,o.Z)(t,2),s=a[0],i=a[1],l=(0,j.K)((function(e){return e.updateApp})),c=G((0,E.Z)().breakpoints.down("md"));return(0,R.jsx)("div",{children:(0,R.jsxs)(w.Z,{fullScreen:c,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"responsive-dialog-title",children:[(0,R.jsxs)(C.Z,{id:"responsive-dialog-title",children:["Are you sure want to rotate JWT for application ",null===(n=e.app)||void 0===n?void 0:n.appName]}),(0,R.jsx)(B.Z,{children:(0,R.jsx)(z.Z,{children:"You will need to update your app clients(mobile, web) with new App Jwt"})}),(0,R.jsxs)(L.Z,{children:[(0,R.jsx)(D.Z,{disabled:s,variant:"contained",autoFocus:!0,onClick:function(){return e.setOpen(!1)},children:"Cancel"}),(0,R.jsx)(k.Z,{variant:"contained",loading:s,color:"error",onClick:function(){var n;e.app&&null!==(n=e.app)&&void 0!==n&&n._id&&(i(!0),I.oK(e.app._id).then((function(n){l(n.data.app),e.setOpen(!1)})).finally((function(){return i(!1)})))},autoFocus:!0,children:"Rotate"})]})]})})}var J=t(54871),Q=t(81508),X=t(55137),$=function(e){var n=e.open,t=e.onClose,a=e.afterSubmit,l=(0,j.K)((function(e){return e.user})),c=(0,j.K)((function(e){return e.setUser})),d=(0,r.useState)(!1),u=(0,o.Z)(d,2),p=u[0],h=u[1],f=(0,r.useState)(!1),Z=(0,o.Z)(f,2),v=Z[0],b=Z[1],M=(0,O.D)().showSnackbar,D=(0,r.useState)(!1),L=(0,o.Z)(D,2),B=L[0],z=L[1],F=(0,r.useState)(""),_=(0,o.Z)(F,2),U=_[0],W=(_[1],(0,A.TA)({initialValues:{companyName:""},onSubmit:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.companyName,z(!0),e.prev=2,e.next=5,(0,I.jR)(r);case 5:e.sent,c((0,y.Z)((0,y.Z)({},l),{},{isAgreeWithTerms:!0})),t(),a(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),M("error","Something went wrong");case 15:z(!1);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}()}));return(0,R.jsxs)(w.Z,{onClose:t,maxWidth:!1,open:n,children:[(0,R.jsxs)(x.Z,{style:{width:"600px"},children:[(0,R.jsx)(g.Z,{sx:{position:"absolute",top:0,right:0},disabled:B,onClick:t,children:(0,R.jsx)(S.Z,{})}),(0,R.jsx)(C.Z,{sx:{display:"flex",justifyContent:"space-between",paddingLeft:1},children:"Entity Registration"}),(0,R.jsx)(x.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,R.jsxs)("form",{onSubmit:W.handleSubmit,children:[(0,R.jsx)(P.Z,{margin:"dense",label:"Company Name",name:"companyName",type:"text",fullWidth:!0,inputProps:{autoComplete:"off"},variant:"standard",onChange:W.handleChange,onBlur:W.handleBlur,error:W.touched.companyName&&Boolean(W.errors.companyName),helperText:W.touched.companyName&&W.errors.companyName?W.errors.companyName:""}),(0,R.jsx)(m.Z,{sx:{fontSize:10},children:"Please add a name of your entity, such as your registered company name. If you don't have a formal entity, simply add your startup or team name. This is needed so that your Applications and assets can be assigned to a group. You will be able to change the group entity name and manage its members later ."}),(0,R.jsx)(J.Z,{children:(0,R.jsx)(N.Z,{value:"I agree to the Terms & Conditions",control:(0,R.jsx)(T.Z,{checked:v,onChange:function(e){return b(e.target.checked)}}),label:(0,R.jsxs)("p",{children:["I agree to the"," ",(0,R.jsx)("span",{onClick:function(e){h(!0)},style:{cursor:"pointer",textDecoration:"underline"},children:"Terms & Conditions"})]}),labelPlacement:"end"})}),!!U&&(0,R.jsx)(Q.Z,{severity:"error",children:U}),(0,R.jsx)(x.Z,{sx:{margin:2,display:"flex",justifyContent:"center"},children:(0,R.jsx)(k.Z,{loading:B,variant:"contained",type:"submit",disabled:B||!v,children:"Register"})})]})})]}),(0,R.jsx)(w.Z,{onClose:function(){return h(!1)},maxWidth:!1,open:p,children:(0,R.jsx)(x.Z,{sx:{width:800},children:(0,R.jsx)(X.Z,{setTermsOpen:function(e){return h(e)},firstName:l.firstName,lastName:l.lastName,email:l.lastName,company:"company"})})})]})},ee=t(68438),ne=t(18384),te=t(64880),re=t(87122);function ae(){var e,n,t=(0,j.K)((function(e){return e.apps})),a=(0,j.K)((function(e){return e.setApps})),y=(0,j.K)((function(e){return e.user})),w=(0,j.K)((function(e){return e.ACL})),C=(0,te.k6)(),A=(0,r.useState)(!1),P=(0,o.Z)(A,2),k=P[0],N=P[1],T=(0,r.useState)(!1),D=(0,o.Z)(T,2),L=D[0],B=D[1],z=(0,j.K)((function(e){return e.balance.find((function(e){return e.tokenName===ee.zl}))})),F=+(null===z||void 0===z?void 0:z.balance)>=10,_=w.result.find((function(e){return e.appId===y.appId})),U=null===_||void 0===_||null===(e=_.application)||void 0===e||null===(n=e.appCreate)||void 0===n?void 0:n.create,W=(0,r.useState)(!1),K=(0,o.Z)(W,2),V=K[0],G=K[1],E=(0,r.useState)(!1),J=(0,o.Z)(E,2),Q=J[0],X=J[1],ae=(0,r.useState)(!1),se=(0,o.Z)(ae,2),ie=se[0],oe=se[1],le=(0,r.useState)({_id:"",appName:"",appDescription:"",appGoogleId:"",defaultAccessProfileOpen:!1,defaultAccessAssetsOpen:!1,usersCanFree:!1}),ce=(0,o.Z)(le,2),de=ce[0],ue=ce[1],pe=(0,O.D)().showSnackbar,he=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.C6)();case 3:n=e.sent,t=n.data.apps.filter((function(e){return!!e})),a(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),pe("error","Cannot get user apps");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){he()}),[]),(0,R.jsxs)(u.Z,{component:f.Z,style:{margin:"0 auto"},children:[(0,R.jsxs)(x.Z,{style:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(m.Z,{variant:"h6",style:{margin:"16px"},children:"Apps"}),(0,R.jsx)(Z.Z,{title:F?U?"":"You don't have permission to create app":"You don't have enough coins to create the app.",children:(0,R.jsx)("span",{style:{marginLeft:"auto"},children:(0,R.jsx)(g.Z,{disabled:!F||!U,onClick:function(){y.isAgreeWithTerms?N(!0):B(!0)},size:"large",color:"primary",children:(0,R.jsx)(v.Z,{fontSize:"large"})})})})]}),0===t.length&&(0,R.jsxs)(x.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,R.jsx)(b.Z,{}),(0,R.jsx)(m.Z,{style:{marginTop:"20px",marginBottom:"20px"},children:"You have not created any apps."})]}),t.length>0&&(0,R.jsxs)(l.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,R.jsx)(p.Z,{children:(0,R.jsxs)(h.Z,{children:[(0,R.jsx)(d.Z,{width:200,children:"Display Name"}),(0,R.jsx)(d.Z,{align:"center",children:"Profile Open"}),(0,R.jsx)(d.Z,{align:"center",children:"Assets Visible"}),(0,R.jsx)(d.Z,{align:"center",children:"Self-Sovereignty"}),(0,R.jsx)(d.Z,{align:"center",children:"Created"}),(0,R.jsx)(d.Z,{align:"right",children:"Actions"})]})}),(0,R.jsx)(c.Z,{children:t.map((function(e){return(0,R.jsxs)(h.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,R.jsx)(d.Z,{component:"th",scope:"row",children:e.displayName}),(0,R.jsx)(d.Z,{align:"center",children:e.defaultAccessProfileOpen?(0,R.jsx)(ne.Z,{color:"success"}):(0,R.jsx)(S.Z,{color:"error"})}),(0,R.jsx)(d.Z,{align:"center",children:e.defaultAccessAssetsOpen?(0,R.jsx)(ne.Z,{color:"success"}):(0,R.jsx)(S.Z,{color:"error"})}),(0,R.jsx)(d.Z,{align:"center",children:e.usersCanFree?(0,R.jsx)(ne.Z,{color:"success"}):(0,R.jsx)(S.Z,{color:"error"})}),(0,R.jsx)(d.Z,{align:"right",children:new Date(e.createdAt).toDateString()}),(0,R.jsx)(d.Z,{align:"right",children:(0,R.jsx)(x.Z,{style:{display:"flex",flexDirection:"column"},children:(0,R.jsx)(g.Z,{onClick:function(){return function(e){ue(e),C.push("/editApp/"+e._id),X(!0)}(e)},children:(0,R.jsx)(re.Z,{color:"primary"})})})})]},e._id)}))})]}),(0,R.jsx)(M,{open:k,setOpen:N}),(0,R.jsx)($,{onClose:function(){return B(!1)},open:L,afterSubmit:function(){return N(!0)}}),(0,R.jsx)(H,{app:de,open:V,setOpen:G}),(0,R.jsx)(Y,{app:de,open:ie,setOpen:oe}),Q&&(0,R.jsx)(q,{app:de,open:Q,setOpen:X})]})}var se,ie,oe,le,ce,de,ue,pe,he=t(20803),fe=t(42982),xe=t(81898),me=t(40508),Ze=t(63381),ge=t(70324),ve=t(65209),je=t(16992),be=t(4942),ye=t(63366),we=t(87462),Ce=t(28182),Se=t(94419),Ae=t(20627),Pe=t(60277),ke=t(85513),Ie=t(1169),Ne=t(44666),Te=t(42806),Oe=t(91223),Re=t(19458),Me=t(68840),De=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],Le=r.forwardRef((function(e,n){var t=e.backIconButtonProps,r=e.count,a=e.getItemAriaLabel,s=e.nextIconButtonProps,i=e.onPageChange,o=e.page,l=e.rowsPerPage,c=e.showFirstButton,d=e.showLastButton,u=(0,ye.Z)(e,De),p=(0,E.Z)();return(0,R.jsxs)("div",(0,we.Z)({ref:n},u,{children:[c&&(0,R.jsx)(g.Z,{onClick:function(e){i(e,0)},disabled:0===o,"aria-label":a("first",o),title:a("first",o),children:"rtl"===p.direction?se||(se=(0,R.jsx)(Re.Z,{})):ie||(ie=(0,R.jsx)(Me.Z,{}))}),(0,R.jsx)(g.Z,(0,we.Z)({onClick:function(e){i(e,o-1)},disabled:0===o,color:"inherit","aria-label":a("previous",o),title:a("previous",o)},t,{children:"rtl"===p.direction?oe||(oe=(0,R.jsx)(Oe.Z,{})):le||(le=(0,R.jsx)(Te.Z,{}))})),(0,R.jsx)(g.Z,(0,we.Z)({onClick:function(e){i(e,o+1)},disabled:-1!==r&&o>=Math.ceil(r/l)-1,color:"inherit","aria-label":a("next",o),title:a("next",o)},s,{children:"rtl"===p.direction?ce||(ce=(0,R.jsx)(Te.Z,{})):de||(de=(0,R.jsx)(Oe.Z,{}))})),d&&(0,R.jsx)(g.Z,{onClick:function(e){i(e,Math.max(0,Math.ceil(r/l)-1))},disabled:o>=Math.ceil(r/l)-1,"aria-label":a("last",o),title:a("last",o),children:"rtl"===p.direction?ue||(ue=(0,R.jsx)(Me.Z,{})):pe||(pe=(0,R.jsx)(Re.Z,{}))})]}))})),Be=t(51853),ze=t(75878),Fe=t(21217);function _e(e){return(0,Fe.Z)("MuiTablePagination",e)}var Ue,We=(0,ze.Z)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),Ke=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],Ve=(0,Pe.ZP)(d.Z,{name:"MuiTablePagination",slot:"Root",overridesResolver:function(e,n){return n.root}})((function(e){var n=e.theme;return{overflow:"auto",color:(n.vars||n).palette.text.primary,fontSize:n.typography.pxToRem(14),"&:last-child":{padding:0}}})),Ge=(0,Pe.ZP)(Ne.Z,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:function(e,n){return(0,we.Z)((0,be.Z)({},"& .".concat(We.actions),n.actions),n.toolbar)}})((function(e){var n,t=e.theme;return n={minHeight:52,paddingRight:2},(0,be.Z)(n,"".concat(t.breakpoints.up("xs")," and (orientation: landscape)"),{minHeight:52}),(0,be.Z)(n,t.breakpoints.up("sm"),{minHeight:52,paddingRight:2}),(0,be.Z)(n,"& .".concat(We.actions),{flexShrink:0,marginLeft:20}),n})),Ee=(0,Pe.ZP)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:function(e,n){return n.spacer}})({flex:"1 1 100%"}),He=(0,Pe.ZP)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:function(e,n){return n.selectLabel}})((function(e){var n=e.theme;return(0,we.Z)({},n.typography.body2,{flexShrink:0})})),qe=(0,Pe.ZP)(Ze.Z,{name:"MuiTablePagination",slot:"Select",overridesResolver:function(e,n){var t;return(0,we.Z)((t={},(0,be.Z)(t,"& .".concat(We.selectIcon),n.selectIcon),(0,be.Z)(t,"& .".concat(We.select),n.select),t),n.input,n.selectRoot)}})((0,be.Z)({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8},"& .".concat(We.select),{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"})),Ye=(0,Pe.ZP)(ge.Z,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:function(e,n){return n.menuItem}})({}),Je=(0,Pe.ZP)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:function(e,n){return n.displayedRows}})((function(e){var n=e.theme;return(0,we.Z)({},n.typography.body2,{flexShrink:0})}));function Qe(e){var n=e.from,t=e.to,r=e.count;return"".concat(n,"\u2013").concat(t," of ").concat(-1!==r?r:"more than ".concat(t))}function Xe(e){return"Go to ".concat(e," page")}var $e=r.forwardRef((function(e,n){var t,a=(0,ke.Z)({props:e,name:"MuiTablePagination"}),s=a.ActionsComponent,i=void 0===s?Le:s,o=a.backIconButtonProps,l=a.className,c=a.colSpan,u=a.component,p=void 0===u?d.Z:u,h=a.count,f=a.getItemAriaLabel,x=void 0===f?Xe:f,m=a.labelDisplayedRows,Z=void 0===m?Qe:m,g=a.labelRowsPerPage,v=void 0===g?"Rows per page:":g,j=a.nextIconButtonProps,b=a.onPageChange,y=a.onRowsPerPageChange,w=a.page,C=a.rowsPerPage,S=a.rowsPerPageOptions,A=void 0===S?[10,25,50,100]:S,P=a.SelectProps,k=void 0===P?{}:P,I=a.showFirstButton,N=void 0!==I&&I,T=a.showLastButton,O=void 0!==T&&T,M=(0,ye.Z)(a,Ke),D=a,L=function(e){var n=e.classes;return(0,Se.Z)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},_e,n)}(D),B=k.native?"option":Ye;p!==d.Z&&"td"!==p||(t=c||1e3);var z=(0,Be.Z)(k.id),F=(0,Be.Z)(k.labelId);return(0,R.jsx)(Ve,(0,we.Z)({colSpan:t,ref:n,as:p,ownerState:D,className:(0,Ce.Z)(L.root,l)},M,{children:(0,R.jsxs)(Ge,{className:L.toolbar,children:[(0,R.jsx)(Ee,{className:L.spacer}),A.length>1&&(0,R.jsx)(He,{className:L.selectLabel,id:F,children:v}),A.length>1&&(0,R.jsx)(qe,(0,we.Z)({variant:"standard"},!k.variant&&{input:Ue||(Ue=(0,R.jsx)(Ie.ZP,{}))},{value:C,onChange:y,id:z,labelId:F},k,{classes:(0,we.Z)({},k.classes,{root:(0,Ce.Z)(L.input,L.selectRoot,(k.classes||{}).root),select:(0,Ce.Z)(L.select,(k.classes||{}).select),icon:(0,Ce.Z)(L.selectIcon,(k.classes||{}).icon)}),children:A.map((function(e){return(0,r.createElement)(B,(0,we.Z)({},!(0,Ae.Z)(B)&&{ownerState:D},{className:L.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e)}))})),(0,R.jsx)(Je,{className:L.displayedRows,children:Z({from:0===h?0:w*C+1,to:-1===h?(w+1)*C:-1===C?h:Math.min(h,(w+1)*C),count:-1===h?-1:h,page:w})}),(0,R.jsx)(i,{className:L.actions,backIconButtonProps:o,count:h,nextIconButtonProps:j,onPageChange:b,page:w,rowsPerPage:C,showFirstButton:N,showLastButton:O,getItemAriaLabel:x})]})}))})),en=t(91803),nn=t(52898),tn=t(12065),rn=t(27247);function an(e){var n=e.selected,t=e.onButtonClick;if(n.length)return(0,R.jsxs)(Ne.Z,{sx:{pl:{sm:2},pr:{xs:1,sm:1},display:"flex",justifyContent:"space-between",bgcolor:function(e){return(0,tn.Fq)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[(0,R.jsxs)(m.Z,{color:"inherit",variant:"subtitle1",component:"div",sx:{minWidth:200},children:[n.length," selected"]}),(0,R.jsxs)(x.Z,{sx:{display:"flex",alignItems:"center",gap:2,flexDirection:{xs:"row",md:"row"},flexWrap:"wrap"},children:[(0,R.jsx)(D.Z,{variant:"outlined",onClick:function(){return t("addTag")},sx:{minWidth:"max-content"},children:"Add Tag"}),(0,R.jsx)(D.Z,{variant:"outlined",onClick:function(){return t("removeAllTags")},sx:{minWidth:"max-content"},children:"Remove All Tags"}),(0,R.jsx)(D.Z,{variant:"outlined",onClick:function(){return t("removeTag")},sx:{minWidth:"max-content"},children:"Remove Tag"}),(0,R.jsx)(D.Z,{variant:"outlined",onClick:function(){return t("resetPassword")},sx:{minWidth:"max-content"},children:"Reset Passwords"}),(0,R.jsx)(Z.Z,{title:"Delete users",children:(0,R.jsx)(g.Z,{onClick:function(){return t("deleteUser")},children:(0,R.jsx)(rn.Z,{color:"error"})})})]})]})}var sn=t(60753),on=(0,t(81245).Z)((0,R.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),ln=t(49853);function cn(e){return(0,Fe.Z)("MuiTableSortLabel",e)}var dn=(0,ze.Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),un=["active","children","className","direction","hideSortIcon","IconComponent"],pn=(0,Pe.ZP)(sn.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.active&&n.active]}})((function(e){var n=e.theme;return(0,be.Z)({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(n.vars||n).palette.text.secondary},"&:hover":(0,be.Z)({color:(n.vars||n).palette.text.secondary},"& .".concat(dn.icon),{opacity:.5})},"&.".concat(dn.active),(0,be.Z)({color:(n.vars||n).palette.text.primary},"& .".concat(dn.icon),{opacity:1,color:(n.vars||n).palette.text.secondary}))})),hn=(0,Pe.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:function(e,n){var t=e.ownerState;return[n.icon,n["iconDirection".concat((0,ln.Z)(t.direction))]]}})((function(e){var n=e.theme,t=e.ownerState;return(0,we.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:n.transitions.create(["opacity","transform"],{duration:n.transitions.duration.shorter}),userSelect:"none"},"desc"===t.direction&&{transform:"rotate(0deg)"},"asc"===t.direction&&{transform:"rotate(180deg)"})})),fn=r.forwardRef((function(e,n){var t=(0,ke.Z)({props:e,name:"MuiTableSortLabel"}),r=t.active,a=void 0!==r&&r,s=t.children,i=t.className,o=t.direction,l=void 0===o?"asc":o,c=t.hideSortIcon,d=void 0!==c&&c,u=t.IconComponent,p=void 0===u?on:u,h=(0,ye.Z)(t,un),f=(0,we.Z)({},t,{active:a,direction:l,hideSortIcon:d,IconComponent:p}),x=function(e){var n=e.classes,t=e.direction,r={root:["root",e.active&&"active"],icon:["icon","iconDirection".concat((0,ln.Z)(t))]};return(0,Se.Z)(r,cn,n)}(f);return(0,R.jsxs)(pn,(0,we.Z)({className:(0,Ce.Z)(x.root,i),component:"span",disableRipple:!0,ownerState:f,ref:n},h,{children:[s,d&&!a?null:(0,R.jsx)(hn,{as:p,className:(0,Ce.Z)(x.icon),ownerState:f})]}))})),xn={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},mn=[{id:"appId",numeric:!1,disablePadding:!0,label:"App Id",width:100},{id:"firstName",numeric:!0,disablePadding:!1,label:"First Name",width:100},{id:"lastName",numeric:!0,disablePadding:!1,label:"Last Name",width:100},{id:"tags",numeric:!0,disablePadding:!1,label:"User Tags",width:100},{id:"email",numeric:!0,disablePadding:!1,label:"Email",width:100},{id:"lastSeen",numeric:!0,disablePadding:!1,label:"Created/Seen",width:400},{id:"authMethod",numeric:!0,disablePadding:!1,label:"Auth method",width:400},{id:"actions",numeric:!0,disablePadding:!1,label:"Actions",width:100}];function Zn(e){var n=e.onSelectAllClick,t=e.order,r=e.orderBy,a=e.numSelected,s=e.rowCount,i=e.onRequestSort;return(0,R.jsx)(p.Z,{children:(0,R.jsxs)(h.Z,{children:[(0,R.jsx)(d.Z,{padding:"checkbox",children:(0,R.jsx)(T.Z,{color:"primary",indeterminate:a>0&&a<s,checked:s>0&&a===s,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),mn.map((function(e){return(0,R.jsx)(d.Z,{align:e.numeric?"center":"left",padding:e.disablePadding?"none":"normal",sortDirection:r===e.id&&t,children:(0,R.jsxs)(fn,{active:r===e.id,direction:r===e.id?t:"asc",onClick:(n=e.id,function(e){"actions"!==n&&i(e,n)}),children:[e.label,r===e.id?(0,R.jsx)(x.Z,{component:"span",sx:xn,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}function gn(e){var n,t=e.open,a=e.onClose,l=e.type,c=e.updateData,d=e.selectedUsers,u=(0,r.useState)(""),p=(0,o.Z)(u,2),h=p[0],f=p[1],m=(0,r.useState)(!1),Z=(0,o.Z)(m,2),v=Z[0],j=Z[1],b=(0,r.useState)(!1),y=(0,o.Z)(b,2),A=y[0],k=y[1],N=(0,O.D)().showSnackbar,T=d.map((function(e){return e._id})),M=null===d||void 0===d||null===(n=d[0])||void 0===n?void 0:n.appId,B=function(e){var n=e.target.value;f(n)},z=function(){f(""),j(!1),k(!1),a()},F=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.trim().split(","),!d.some((function(e){return e.tags.some((function(e){return n.includes(e)}))}))){e.next=5;break}return N("error","Tags cannot repeat"),e.abrupt("return");case 5:return j(!0),e.prev=6,e.next=9,(0,I.hr)(M,n,T);case 9:return e.next=11,c();case 11:N("success","Tag added"),z(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),N("error","Something went wrong");case 18:return e.next=20,c();case 20:j(!1);case 21:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.trim().split(","),j(!0),e.prev=2,e.next=5,(0,I.r)(M,n,T);case 5:return e.next=7,c();case 7:N("success","Tag removed"),z(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),N("error","Something went wrong");case 14:j(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,(0,I.S1)(M,[],T);case 4:return e.next=6,c();case 6:N("success","All tags removed"),z(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),N("error","Something went wrong");case 13:j(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,(0,I.w9)(M,T);case 4:N("success","Passwords reseted"),z(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),N("error","Something went wrong");case 11:j(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,(0,I.Vt)(M,T);case 4:return e.next=6,c();case 6:N("success","Users deleted"),z(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),N("error","Something went wrong");case 13:j(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return(0,R.jsxs)(w.Z,{maxWidth:!1,open:t,onClose:z,children:[(0,R.jsx)(x.Z,{sx:{position:"absolute",top:0,right:0},children:(0,R.jsx)(g.Z,{onClick:z,children:(0,R.jsx)(S.Z,{})})}),function(){switch(l){case"addTag":return(0,R.jsxs)(x.Z,{style:{width:"350px"},children:[(0,R.jsx)(C.Z,{style:{display:"flex",justifyContent:"space-between"},children:"Add Tags"}),(0,R.jsx)(x.Z,{sx:{display:"flex",justifyContent:"flex-start",pl:3,pr:3},children:(0,R.jsx)(P.Z,{error:A,fullWidth:!0,margin:"dense",label:"Provide tags separated by comma",name:"tags",type:"tags",variant:"outlined",onChange:B,value:h})})]});case"removeTag":return(0,R.jsxs)(x.Z,{style:{width:"350px"},children:[(0,R.jsx)(C.Z,{style:{display:"flex",justifyContent:"space-between"},children:"Remove Tags"}),(0,R.jsx)(x.Z,{sx:{display:"flex",justifyContent:"flex-start",pl:3,pr:3},children:(0,R.jsx)(P.Z,{error:A,fullWidth:!0,margin:"dense",label:"Provide tags separated by comma",name:"tags",type:"tags",variant:"outlined",onChange:B,value:h})})]});case"removeAllTags":return(0,R.jsx)(x.Z,{style:{width:"350px"},children:(0,R.jsxs)(C.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Are you sure you want to remove all tags from"," ",d.length," users?"]})});case"deleteUser":return(0,R.jsx)(x.Z,{style:{width:"350px"},children:(0,R.jsxs)(C.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Are you sure you want to delete ",d.length," ",d.length>1?"users":"user","?"]})});case"resetPassword":return(0,R.jsx)(x.Z,{style:{width:"350px"},children:(0,R.jsxs)(C.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Are you sure you want to force a password reset for"," ",d.length," users?"]})});default:return null}}(),(0,R.jsxs)(L.Z,{children:[(0,R.jsx)(D.Z,{disabled:v,onClick:z,children:"Cancel"}),(0,R.jsx)(D.Z,{disabled:v,onClick:function(){switch(l){case"deleteUser":return K();case"addTag":return h?F():void k(!0);case"removeTag":return h?_():void k(!0);case"removeAllTags":return U();case"resetPassword":return W()}},autoFocus:!0,color:"error",children:"Submit"})]})]})}var vn=t(22873),jn=t(54572),bn=t(24177);function yn(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0}function wn(e,n){return"desc"===e?function(e,t){return yn(e,t,n)}:function(e,t){return-yn(e,t,n)}}function Cn(e,n){var t=e.map((function(e,n){return[e,n]}));return t.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t.map((function(e){return e[0]}))}var Sn=10;function An(){var e,n=(0,r.useState)("asc"),t=(0,o.Z)(n,2),a=t[0],p=t[1],Z=(0,r.useState)("appId"),w=(0,o.Z)(Z,2),C=w[0],A=w[1],P=(0,r.useState)([]),k=(0,o.Z)(P,2),N=k[0],O=k[1],M=(0,r.useState)(0),D=(0,o.Z)(M,2),L=D[0],B=D[1],z=(0,r.useState)({open:!1,type:"addTag"}),F=(0,o.Z)(z,2),_=F[0],U=F[1],W=r.useState(null),K=(0,o.Z)(W,2),V=K[0],G=K[1],E=Boolean(V),H=function(e){e.stopPropagation(),G(e.currentTarget)},q=function(){G(null)},Y=(0,j.K)((function(e){return e.apps})),J=(0,j.K)((function(e){var n;return null===(n=e.user.ACL)||void 0===n?void 0:n.ownerAccess})),Q=(0,r.useState)(!1),X=(0,o.Z)(Q,2),$=X[0],ee=X[1],ne=(0,r.useState)([]),te=(0,o.Z)(ne,2),re=te[0],ae=te[1],se=(0,r.useState)(null===(e=Y[0])||void 0===e?void 0:e._id),ie=(0,o.Z)(se,2),oe=ie[0],le=ie[1],ce=(0,r.useState)({modalOpen:!1,user:null}),de=(0,o.Z)(ce,2),ue=de[0],pe=de[1],he=(0,r.useState)(!1),be=(0,o.Z)(he,2),ye=be[0],we=be[1],Ce=(0,r.useState)(!1),Se=(0,o.Z)(Ce,2),Ae=(Se[0],Se[1],(0,r.useRef)(0)),Pe=(0,j.K)((function(e){return e.ACL.result.find((function(e){return e.appId===oe}))})),ke=J||(null===Pe||void 0===Pe?void 0:Pe.application.appUsers.create);(0,r.useEffect)((function(){we(function(e){var n=null===e||void 0===e?void 0:e.application;if(n){for(var t=Object.keys(n),r=!1,a=0;a<t.length;a++){var s;if(!0===(null===(s=n[t[a]])||void 0===s?void 0:s.admin)){r=!0;break}}return r}return!1}(Pe))}),[Pe]);var Ie=(0,r.useState)(),Ne=(0,o.Z)(Ie,2),Te=Ne[0],Oe=Ne[1],Re=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(n){var t,r,a,i,o=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>1&&void 0!==o[1]?o[1]:Sn,r=o.length>2&&void 0!==o[2]?o[2]:0,e.prev=2,!n){e.next=10;break}return e.next=6,(0,I.ES)(n,t,r);case 6:return a=e.sent,i=a.data,Oe({limit:i.limit,offset:i.offset,total:i.total}),e.abrupt("return",i.items);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:return e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}(),Me=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(n){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(n);case 2:t=e.sent,ae(t),N.length&&(r=N.map((function(e){var n=t.find((function(n){return n._id===e._id}));return{_id:n._id,walletAddress:n.defaultWallet.walletAddress,appId:n.appId,tags:n.tags}})),O(r));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){oe&&Me(oe)}),[oe]);var De=function(e){le(e.target.value),Me(e.target.value)},Le=function(){return pe({modalOpen:!1,user:null})},Be=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U((function(e){return(0,y.Z)((0,y.Z)({},e),{},{open:!1})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me(oe);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=L>0?Math.max(0,(1+L)*Sn-re.length):0;return re.length?(0,R.jsxs)(x.Z,{sx:{width:"100%"},children:[(0,R.jsxs)(f.Z,{sx:{width:"100%",mb:2},children:[(0,R.jsxs)(x.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(m.Z,{variant:"h6",style:{margin:"16px"},children:"Users"}),!!Y.length&&(0,R.jsxs)(xe.Z,{variant:"outlined",sx:{m:1,minWidth:120},children:[(0,R.jsx)(me.Z,{id:"select-label",children:"App"}),(0,R.jsx)(Ze.Z,{labelId:"select-label",id:"select-label",label:"App",value:oe,onChange:De,children:Y.map((function(e){return(0,R.jsx)(ge.Z,{value:e._id,children:e.displayName},e._id)}))})]}),ke&&(0,R.jsx)(g.Z,{onClick:function(){return ee(!0)},size:"large",sx:{marginLeft:"auto"},children:(0,R.jsx)(v.Z,{fontSize:"large",color:"primary"})})]}),(0,R.jsx)(u.Z,{children:(0,R.jsxs)(l.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[(0,R.jsx)(Zn,{numSelected:N.length,order:a,orderBy:C,onSelectAllClick:function(e){if(e.target.checked){var n=re.map((function(e){return{_id:e._id,walletAddress:e.defaultWallet.walletAddress,appId:e.appId,tags:e.tags}}));O(n)}else O([])},onRequestSort:function(e,n){p(C===n&&"asc"===a?"desc":"asc"),A(n)},rowCount:re.length}),(0,R.jsxs)(c.Z,{children:[Cn(re,wn(a,C)).slice(L*Sn,L*Sn+Sn).map((function(e,n){var t,r=(t=e._id.toString(),-1!==N.findIndex((function(e){return e._id===t}))),a="Users-table-checkbox-".concat(n);return(0,R.jsxs)(h.Z,{hover:!0,onClick:function(n){return function(e,n){var t=N.findIndex((function(e){return e._id===n._id})),r={_id:n._id,walletAddress:n.defaultWallet.walletAddress,appId:n.appId,tags:n.tags},a=[];-1===t?a=a.concat(N,r):0===t?a=a.concat(N.slice(1)):t===N.length-1?a=a.concat(N.slice(0,-1)):t>0&&(a=a.concat(N.slice(0,t),N.slice(t+1))),O(a)}(0,e)},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:[(0,R.jsx)(d.Z,{padding:"checkbox",children:(0,R.jsx)(T.Z,{color:"primary",checked:r,inputProps:{"aria-labelledby":a}})}),(0,R.jsx)(d.Z,{component:"th",id:a,scope:"row",padding:"none",children:e.appId}),(0,R.jsx)(d.Z,{align:"right",children:e.firstName}),(0,R.jsx)(d.Z,{align:"right",children:e.lastName}),(0,R.jsx)(d.Z,{align:"center",children:(0,R.jsx)(x.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1,justifyContent:"center"},children:e.tags.map((function(e,n){return(0,R.jsx)(ve.Z,{variant:"filled",color:"primary",label:e},n)}))})}),(0,R.jsx)(d.Z,{align:"right",children:e.email||"No Email"}),(0,R.jsxs)(d.Z,{align:"center",children:[(0,R.jsx)("p",{style:{width:150},children:(0,bn.HM)(e.createdAt)}),(0,R.jsx)("p",{children:e.lastSeen?(0,bn.HM)(e.lastSeen):""})]}),(0,R.jsx)(d.Z,{align:"center",children:e.authMethod||""}),(0,R.jsxs)(d.Z,{align:"right",children:[(0,R.jsx)(g.Z,{disabled:!ye,"aria-label":"more",id:"long-button","aria-controls":E?"long-menu":void 0,"aria-expanded":E?"true":void 0,"aria-haspopup":"true",onClick:H,children:(0,R.jsx)(nn.Z,{})}),(0,R.jsx)(je.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:V,open:E,onClose:q,PaperProps:{style:{maxHeight:216,width:"20ch",boxShadow:"5px 5px 10px 0px rgba(0,0,0,0.05)"}},children:(0,R.jsx)(ge.Z,{onClick:function(n){return function(e,n){e.stopPropagation(),pe({modalOpen:!0,user:n}),q()}(n,e)},children:"Edit Acl"})})]})]},e._id)})),Fe>0&&(0,R.jsx)(h.Z,{style:{height:33*Fe},children:(0,R.jsx)(d.Z,{colSpan:6})})]})]})}),(0,R.jsx)($e,{component:"div",count:Te.total,rowsPerPage:Sn,page:L,onPageChange:function(e,n){var t=10*n;B(n),Ae.current<n&&(Ae.current=n,Re(oe,10,t).then((function(e){ae((function(n){return[].concat((0,fe.Z)(re),(0,fe.Z)(e))}))})))},rowsPerPageOptions:[]}),(0,R.jsx)(an,{onButtonClick:function(e){U({open:!0,type:e})},selected:N})]}),(0,R.jsx)(gn,{type:_.type,open:_.open,onClose:Be,selectedUsers:N,updateData:ze}),(0,R.jsx)(vn.Z,{open:$,setUsers:ae,setOpen:ee,appId:oe}),(0,R.jsx)(en.Z,{open:ue.modalOpen,onClose:Le,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,R.jsxs)(x.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70vw",bgcolor:"background.paper",boxShadow:24,borderRadius:"10px",p:4},children:[(0,R.jsx)(jn.v,{updateData:function(e){var n=re,t=n.findIndex((function(e){return e._id===ue.user._id}));n[t].acl=e.result,ae(n)},onAclError:Le,user:ue.user}),(0,R.jsx)(g.Z,{onClick:Le,sx:{position:"absolute",top:0,right:0,color:"black"},children:(0,R.jsx)(S.Z,{fontSize:"large"})})]})})]}):(0,R.jsxs)(f.Z,{sx:{width:"100%",mb:2},children:[(0,R.jsxs)(x.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(m.Z,{variant:"h6",style:{margin:"16px"},children:"Users"}),!!Y.length&&(0,R.jsxs)(xe.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,R.jsx)(me.Z,{id:"demo-simple-select-label",children:"App"}),(0,R.jsx)(Ze.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"App",value:oe,onChange:De,children:Y.map((function(e){return(0,R.jsx)(ge.Z,{value:e._id,children:e.displayName},e._id)}))})]}),ke&&(0,R.jsx)(g.Z,{onClick:function(){return ee(!0)},size:"large",sx:{marginLeft:"auto"},children:(0,R.jsx)(v.Z,{fontSize:"large",color:"primary"})})]}),(0,R.jsxs)(x.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,R.jsx)(b.Z,{}),(0,R.jsx)(m.Z,{style:{marginTop:"20px",marginBottom:"20px"},children:"Users not found."})]}),(0,R.jsx)(vn.Z,{open:$,setUsers:ae,setOpen:ee,appId:oe})]})}function Pn(){return(0,R.jsx)("div",{style:{backgroundColor:"#edf0f4",padding:"20px"},children:(0,R.jsxs)(he.Z,{maxWidth:"lg",children:[(0,R.jsx)(x.Z,{style:{marginTop:"20px"},children:(0,R.jsx)(ae,{})}),(0,R.jsx)(x.Z,{style:{marginTop:"20px"},children:(0,R.jsx)(An,{})})]})})}},18384:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),s=t(80184),i=(0,a.default)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");n.Z=i},27247:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),s=t(80184),i=(0,a.default)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=i},52898:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),s=t(80184),i=(0,a.default)((0,s.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");n.Z=i},87122:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(45649)),s=t(80184),i=(0,a.default)((0,s.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");n.Z=i}}]);
//# sourceMappingURL=966.cfd8d677.chunk.js.map