"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[986],{59715:function(e,n,t){t.d(n,{A:function(){return c}});t(72791);var i=t(17205),r=t(60788),o=t(77248),s=t(8440),a=t(39571),l=t(40464),d=t(80184);function c(e){var n=e.open,t=e.onClose,c=e.onDeletePress,u=e.loading,m=e.title,f=e.description,h=e.deleteButtonTitle,p=e.cancelButtonTitle;return(0,d.jsxs)(r.Z,{open:n,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,d.jsx)(l.Z,{id:"alert-dialog-title",children:m}),(0,d.jsx)(s.Z,{children:(0,d.jsx)(a.Z,{id:"alert-dialog-description",children:f})}),(0,d.jsxs)(o.Z,{children:[(0,d.jsx)(i.Z,{disabled:u,onClick:t,children:p||"Cancel"}),(0,d.jsx)(i.Z,{disabled:u,onClick:c,autoFocus:!0,color:"error",children:h||"Delete"})]})]})}},23895:function(e,n,t){t.d(n,{c:function(){return d}});var i=t(74165),r=t(15861),o=t(8343),s=t(11210),a=t(73763),l=function(e){return e?e.replace(/([A-Z])/g,"_$1").toLowerCase():"invalid string passed"},d=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n,t,r,d,c){var u,m,f,h,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=[n,t].sort().join("."),m=u.toLowerCase()+a.Ts,f=[r,d].sort().join(" and "),h=s.K.getState().userChatRooms,p=!1,0===h.filter((function(e){return e.jid===m})).length&&(p=!0,o.Z.createNewRoom(u.toLowerCase()),o.Z.setOwner(u.toLowerCase()),o.Z.roomConfig(u.toLowerCase(),{roomName:f}),o.Z.subsribe(m),o.Z.presenceInRoom(m),setTimeout((function(){o.Z.sendInvite(l(n),m.toLowerCase(),l(t))}),1e3)),e.abrupt("return",{roomJid:m,roomName:f,isNewRoom:p});case 7:case"end":return e.stop()}}),e)})));return function(n,t,i,r,o){return e.apply(this,arguments)}}()},96986:function(e,n,t){t.r(n),t.d(n,{default:function(){return Re}});var i,r=t(72791),o=t(20803),s=t(74165),a=t(1413),l=t(15861),d=t(70885),c=t(8343),u=t(11210),m=t(21176),f=t(91482),h=t(16263),p=t(45586),x=t(78703),g=t(31128),v=t(95178),j=t(64880),y=t(17205),Z=t(81872),w=t(48928),C=t(58487),b=t(30199),k=t(13811),S=t(4565),N=t(52898),M=t(52791),I=t(73763),A=t(80184),D=function(e){var n=e.message,t=e.position,i=e.onMessageButtonClick,o=e.toggleTransferDialog,s=e.onMediaMessageClick,a=e.onThreadClick,l=e.isThread,u=n.data.senderFirstName,m=n.data.senderLastName,x=n.data.senderJID.split("/")[0],D=(0,r.useMemo)((function(){var e,n;return null===(e=c.Z.client)||void 0===e||null===(n=e.jid)||void 0===n?void 0:n.toString().split("/")[0]}),[])===x,R=(0,j.k6)(),T=(0,r.useState)(),L=(0,d.Z)(T,2),z=L[0],K=L[1],J=r.useState(null),P=(0,d.Z)(J,2),E=P[0],F=P[1],U=Boolean(E),W=(0,r.useState)("incoming"),_=(0,d.Z)(W,2),B=_[0],V=_[1],O=function(){F(null),o(!0,n)},Y=function(){s(!0,n)},H=function(){var e,t,i,r,o,s,a,l,d;return(0,A.jsxs)(y.Z,{variant:"text",style:{flexDirection:"row",display:"flex",textTransform:"none",textAlign:"left"},children:[(0,A.jsx)(Z.Z,{style:{borderWidth:"3px",borderRadius:"5px",marginRight:"5px"},variant:"middle",orientation:"vertical",flexItem:!0}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("strong",{style:{cursor:"pointer"},children:[(null===(e=n.data.mainMessage)||void 0===e?void 0:e.userName)||"N/A",(0,A.jsx)("br",{})]}),(null===(t=n.data.mainMessage)||void 0===t?void 0:t.imageLocation)&&I.NX[n.data.mainMessage.mimeType]&&(0,A.jsx)(w.Z,{sx:{maxWidth:200},children:(0,A.jsx)(C.Z,{onClick:Y,children:(0,A.jsx)(b.Z,{style:{height:150,objectFit:"cover",objectPosition:"left"},component:"img",height:"150",image:n.data.mainMessage.imageLocation,alt:null===(i=n.data.mainMessage)||void 0===i?void 0:i.originalName})})}),(null===(r=n.data.mainMessage)||void 0===r?void 0:r.imageLocation)&&I.p2[null===(o=n.data.mainMessage)||void 0===o?void 0:o.mimeType]&&(0,A.jsxs)("video",{controls:!0,width:"200px",children:[(0,A.jsx)("source",{src:n.data.mainMessage.imageLocation,type:n.data.mainMessage.mimeType,title:n.data.mainMessage.originalName}),"Sorry, your browser doesn't support videos."]}),(null===(s=n.data.mainMessage)||void 0===s?void 0:s.imageLocation)&&I.KS[null===(a=n.data.mainMessage)||void 0===a?void 0:a.mimeType]&&(0,A.jsxs)("audio",{controls:!0,children:[(0,A.jsx)("source",{src:n.data.mainMessage.imageLocation,type:n.data.mainMessage.mimeType}),"Your browser does not support the audio element."]}),(0,A.jsx)("span",{dangerouslySetInnerHTML:{__html:null===(l=n.data)||void 0===l||null===(d=l.mainMessage)||void 0===d?void 0:d.text.replace(/\b(https?\:\/\/\S+)/gm,'<a href="$1">$1</a>')}})]})]})};return(0,r.useEffect)((function(){n.data.quickReplies&&K(JSON.parse(n.data.quickReplies)),V(D?"outgoing":"incoming")}),[]),(0,A.jsxs)("div",{is:"Message",children:[!!t.separator&&(0,A.jsx)(g.it,{children:t.separator}),(0,A.jsxs)(g.v0,{onContextMenu:n.data.isReply||l?function(){}:function(e){e.preventDefault(),O()},style:{marginBottom:"last"===t.type||"single"===t.type?15:null},model:{sender:u+" "+m,direction:B,position:t.position},avatarPosition:D?"tr":"tl",avatarSpacer:"first"!==t.type&&"single"!==t.type,children:[("first"===t.type||"single"===t.type)&&(0,A.jsx)("img",{style:{borderRadius:"50%",boxSizing:"border-box",width:"42px",height:"42px",cursor:"pointer"},onClick:function(){return R.push("/profile/"+n.data.senderWalletAddress)},is:"Avatar",src:n.data.photoURL?n.data.photoURL:+u+" "+m,onError:function(e){var n=e.currentTarget;n.onerror=null,n.src="https://icotar.com/initials/"+u+" "+m},alt:u}),(0,A.jsxs)(g.v0.CustomContent,{children:[n.data.isReply&&!l&&(0,A.jsx)(H,{}),("first"===t.type||"single"===t.type)&&(0,A.jsxs)("span",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,A.jsxs)("strong",{style:{cursor:"pointer"},onClick:function(){return R.push("/profile/"+n.data.senderWalletAddress)},children:[u," ",m,(0,A.jsx)("br",{})]}),!l&&!n.data.isReply&&(0,A.jsx)(k.Z,{"aria-label":"more",id:"long-button","aria-controls":U?"long-menu":void 0,"aria-expanded":U?"true":void 0,"aria-haspopup":"true",onClick:O,children:(0,A.jsx)(N.Z,{})})]}),n.data.isMediafile&&!!I.NX[n.data.mimetype]&&(0,A.jsx)(w.Z,{sx:{maxWidth:200},children:(0,A.jsx)(C.Z,{onClick:Y,children:(0,A.jsx)(b.Z,{style:{height:150,objectFit:"cover",objectPosition:"left"},component:"img",height:"150",image:n.data.location,alt:n.data.originalName})})}),n.data.isMediafile&&I.hY[n.data.mimetype]&&(0,A.jsx)(w.Z,{sx:{maxWidth:200},children:(0,A.jsx)(C.Z,{onClick:function(e){e.preventDefault(),window.open(n.data.location,"_blank")},children:(0,A.jsx)(b.Z,{style:{height:150,objectFit:"cover",objectPosition:"left"},component:"img",height:"150",image:n.data.locationPreview,alt:n.data.originalName})})}),n.data.isMediafile&&!!I.p2[n.data.mimetype]&&(0,A.jsxs)("video",{controls:!0,width:"200px",children:[(0,A.jsx)("source",{src:n.data.location,type:n.data.mimetype,title:n.data.originalName}),"Sorry, your browser doesn't support videos."]}),n.data.isMediafile&&!!I.KS[n.data.mimetype]&&(0,A.jsxs)("audio",{controls:!0,children:[(0,A.jsx)("source",{src:n.data.location,type:n.data.mimetype}),"Your browser does not support the audio element."]}),!n.data.isMediafile&&(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{dangerouslySetInnerHTML:{__html:n.body.replace(/\b(https?\:\/\/\S+)/gm,'<a href="$1">$1</a>')}}),(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:5,minWidth:200,color:"incoming"===B?"rgb(110, 169, 215)":"#c6e3fa",flexDirection:"incoming"===B?"row":"row-reverse"},children:[(0,A.jsx)("div",{style:{fontSize:12},children:(0,v.Z)(new Date,new Date(n.date))>5?(0,f.Z)(new Date(n.date),"h:mm a"):(0,h.Z)((0,p.Z)(new Date(n.date),0),new Date,{addSuffix:!0})}),n.coinsInMessage>0&&(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,A.jsx)("div",{style:{fontSize:12},children:null===n||void 0===n?void 0:n.coinsInMessage}),(0,A.jsx)("img",{src:"/coin.png",style:{width:25,height:25},alt:"coin"})]}),n.data.isEdited&&(0,A.jsx)("div",{style:{display:"flex",alignItems:"flex-end",marginLeft:3,marginRight:3},children:(0,A.jsx)(S.Z,{fontSize:12,children:"edited"})})]})]})]}),(0,A.jsx)(g.v0.Footer,{children:n.numberOfReplies>0&&"incoming"===B&&!l&&(0,A.jsx)(y.Z,{onClick:function(){a()},variant:"text",children:(0,A.jsxs)(S.Z,{fontSize:"12px",textTransform:"none",children:[n.numberOfReplies," ",1===n.numberOfReplies?"Reply":"Replies"," (tap to review)"]})})})]}),!!z&&(0,A.jsx)(M.Z,{sx:{"& button":{m:.5}},children:(0,A.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"max-content",marginLeft:"45px"},children:z.map((function(e,n){return(0,A.jsx)(y.Z,{variant:"outlined",size:"small",onClick:function(){return i(e)},children:e.name},n)}))})})]})},R=function(e){var n=e.message;e.userJid;return(0,A.jsx)("div",{style:{textAlign:"center",color:"#6ea9d7",fontSize:".8em",boxSizing:"border-box",fontFamily:"Helvetica Neue,Segoe UI,Helvetica,Arial,sans-serif"},children:n.body},n.key)},T=t(50228),L=t(32232),z=t(94162),K=t(18267),J=t(4942),P="/chat/",E=function(e){var n=e.room,t=e.name,i=e.chatId,r=e.setDirection,o=(0,j.k6)();return n?(0,A.jsx)(T.Z,{justifyContent:"center",alignItems:"center",style:{padding:"10px 0",maxWidth:170},children:(0,A.jsx)(y.Z,{onClick:function(){r(),o.push(P+n.roomJid+I.Ts)},children:t})}):(0,A.jsx)(T.Z,{justifyContent:"center",alignItems:"center",style:{padding:"10px 0"},children:(0,A.jsx)(y.Z,{disabled:!i,onClick:function(){r(),o.push(P+"none")},children:"Empty"})})},F=t(74142),U=t(91803),W=t(96580),_=function(e){var n=e.room,t=e.direction,i=e.previousRoom,r=(0,j.k6)();return null!==n&&void 0!==n&&n.name?(0,A.jsxs)(T.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,A.jsx)(S.Z,{sx:{fontWeight:"bold",fontSize:18},children:n.name}),(0,A.jsx)(S.Z,{children:n.description})]}):(0,A.jsxs)(T.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,A.jsxs)(T.Z,{sx:{alignItems:"center",display:"flex"},children:[(0,A.jsxs)(S.Z,{children:["This space is empty. You can build your own room here for"," ",(0,A.jsx)("b",{children:"120 "})]}),(0,A.jsx)("img",{src:"/coin.png",style:{width:20,height:20},alt:"coin"})]}),(0,A.jsx)(y.Z,{onClick:function(){r.push("/newchat",{metaDirection:t,metaRoom:i})},children:"Create Meta Room"})]})},B=t(84094),V="north",O="west",Y="south",H="east",$={north:"n",west:"w",south:"s",east:"e"},q=(i={},(0,J.Z)(i,O,H),(0,J.Z)(i,H,O),(0,J.Z)(i,Y,V),(0,J.Z)(i,V,Y),i),X={name:"",description:"",ownerNavLinks:{west:null,east:null,north:null,south:null},ownerId:"",contractAddress:"",createdAt:new Date,_id:"",roomJid:"",updatedAt:new Date,userNavLinks:{west:null,east:null,north:null,south:null}},G={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",p:2,outline:"none"},Q=function(e){var n=e.chatId,t=e.open,i=e.onClose,o=(0,r.useState)(""),a=(0,d.Z)(o,2),f=a[0],h=a[1],p=(0,r.useState)(!1),x=(0,d.Z)(p,2),g=x[0],v=x[1],j=(0,r.useState)(),y=(0,d.Z)(j,2),Z=y[0],w=y[1],C=(0,r.useState)(X),b=(0,d.Z)(C,2),S=b[0],N=b[1],M=(0,u.K)((function(e){return e.user})),D=(0,F.Z)(),R=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,(0,m.Vy)().get("/room/getRoom/"+n);case 4:t=e.sent,N(t.data.result),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),N(X),console.log(e.t0);case 12:v(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){n||N(X),n&&R()}),[n]);var L=function(e,n,t){var i=M.firstName+" "+M.lastName+" has joined <-",r=M.firstName+" "+M.lastName+" has left ->",o={senderFirstName:M.firstName,senderLastName:M.lastName,senderWalletAddress:M.walletAddress,isSystemMessage:!0,tokenAmount:0,receiverMessageId:"",mucname:e,photoURL:M.profileImage,roomJid:n,isReply:!1,mainMessage:void 0};c.Z.sendMessageStanza(n,t?r:i,o)},z=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.Vy)().post("/room/join/"+n,{});case 3:t=e.sent,console.log(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if((0,r.useEffect)((function(){null!==Z&&void 0!==Z&&Z.name&&L(Z.name,Z.roomJid+I.Ts,!0)}),[Z]),(0,r.useEffect)((function(){S.name&&(L(S.name,S.roomJid+I.Ts,!1),z())}),[S]),!S.roomJid&&!f)return null;var K=function(e){var t,i,r,o,s=function(e){return q[e]}(f);return function(){var e,n,t,i,r,o,s,a;return!(null!==S&&void 0!==S&&null!==(e=S.ownerNavLinks)&&void 0!==e&&e.south)&&!(null!==S&&void 0!==S&&null!==(n=S.ownerNavLinks)&&void 0!==n&&n.east)&&!(null!==S&&void 0!==S&&null!==(t=S.ownerNavLinks)&&void 0!==t&&t.west)&&!(null!==S&&void 0!==S&&null!==(i=S.ownerNavLinks)&&void 0!==i&&i.north)&&!(null!==S&&void 0!==S&&null!==(r=S.userNavLinks)&&void 0!==r&&r.south)&&!(null!==S&&void 0!==S&&null!==(o=S.userNavLinks)&&void 0!==o&&o.east)&&!(null!==S&&void 0!==S&&null!==(s=S.userNavLinks)&&void 0!==s&&s.west)&&!(null!==S&&void 0!==S&&null!==(a=S.userNavLinks)&&void 0!==a&&a.north)}()&&e===s?(0,A.jsx)(E,{name:s+":"+(null===Z||void 0===Z?void 0:Z.name),chatId:n,room:Z,setDirection:function(){h(s),w(Z)}}):(0,A.jsx)(E,{name:$[e]+":"+((null===(t=S.ownerNavLinks[e])||void 0===t?void 0:t.name)||(null===(i=S.userNavLinks[e])||void 0===i?void 0:i.name)),chatId:n,room:(null===S||void 0===S||null===(r=S.ownerNavLinks)||void 0===r?void 0:r[e])||(null===S||void 0===S||null===(o=S.userNavLinks)||void 0===o?void 0:o[e]),setDirection:function(){h(e),w(S)}})};return(0,A.jsx)(U.Z,{open:t,onClose:i,children:(0,A.jsx)(T.Z,{sx:G,children:g?(0,A.jsx)(W.Z,{size:50}):(0,A.jsxs)(T.Z,{children:[(0,A.jsx)(T.Z,{sx:{bgcolor:"white",mb:"10px",borderRadius:"10px",p:2},children:(0,A.jsx)(_,{room:S,direction:f,previousRoom:Z})}),(0,A.jsxs)(T.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",bgcolor:"white",borderRadius:"10px",p:2},children:[K(V),(0,A.jsxs)(T.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",alignItems:"center",justifyContent:"center"},children:[(0,A.jsx)(T.Z,{sx:{display:"flex"},children:K(O)}),(0,A.jsx)(T.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,A.jsx)(k.Z,{sx:{color:D.palette.primary.main},children:(0,A.jsx)(B.Z,{fontSize:"large"})})}),(0,A.jsx)(T.Z,{sx:{display:"flex"},children:K(H)})]}),K(Y)]})]})})})},ee=t(61102),ne=t(14250),te=t(68438),ie=t(45473),re=t(29823),oe=function(e){var n=e.onPaste,t=e.placeholder,i=e.onChange,o=e.onSend,s=e.sendFile,a=r.useRef(null);return(0,A.jsxs)("div",{children:[(0,A.jsx)(g.Ru,{onPaste:n,placeholder:t,onChange:i,onSend:o,onAttachClick:function(){return a.current.click()}}),(0,A.jsx)("input",{type:"file",name:"file",id:"file",onChange:function(e){return s(e.target.files[0],!0)},ref:a,style:{display:"none"}})]})},se=t(24177),ae=t(59425),le=function(e){var n,t,i=e.roomData,o=e.handleSetThreadView,s=e.isThreadView,a=e.profile,l=e.currentPickedRoom,m=e.currentRoom,f=(e.onYReachStart,e.sendFile),h=e.toggleMediaModal,p=e.toggleTransferDialog,v=e.handleShowInChannel,y=e.showInChannel,w=(0,u.K)((function(e){return e.currentThreadViewMessage})),C=(0,r.useState)(""),b=(0,d.Z)(C,2),N=b[0],M=b[1],I=(0,u.K)((function(e){return e.user})),L=(0,u.K)((function(e){return e.userChatRooms})),z=(0,u.K)((function(e){return e.historyMessages})),K=(0,j.UO)().roomJID,J=z.filter((function(e){var n,t;return e.roomJID.includes(K)&&e.data.isReply&&(null===(n=e.data)||void 0===n||null===(t=n.mainMessage)||void 0===t?void 0:t.id)===w.id})),P=(0,u.K)((function(e){return e.currentUntrackedChatRoom})),E=(0,u.K)((function(e){return e.loaderArchive})),F=(0,j.k6)(),U=function(e){if(N.trim().length>0){null!==a&&void 0!==a&&a.profileImage&&(null===a||void 0===a?void 0:a.profileImage);var n=x.sanitize(N),t=(0,se.Vt)(n);if(t.trim().length>0){var r={senderFirstName:I.firstName,senderLastName:I.lastName,senderWalletAddress:I.walletAddress,isSystemMessage:!1,tokenAmount:0,receiverMessageId:w.data.receiverMessageId,mucname:i.name,photoURL:I.profileImage,roomJid:i.jid,isReply:!0,mainMessage:(0,ae.a)(w),showInChannel:y,push:!0};c.Z.sendMessageStanza(m,t,r)}}};return(0,A.jsxs)(g.uU,{style:{borderLeftWidth:"2px"},children:[!!i&&(0,A.jsxs)("div",{is:"ConversationHeader",children:[(0,A.jsxs)(g.BU,{style:{height:"70px"},children:[(0,A.jsx)(g.BU.Content,{datatype:"dad",userName:(0,A.jsxs)("div",{children:[(0,A.jsx)(S.Z,{fontWeight:"bold",children:"Thread"}),(0,A.jsx)(S.Z,{children:i.name})]}),onClick:function(){F.push("/chatDetails/"+P)}}),(0,A.jsx)(g.BU.Actions,{children:(0,A.jsx)(k.Z,{sx:{color:"black"},onClick:function(){return o(!1)},children:(0,A.jsx)(re.Z,{})})})]}),(0,A.jsx)(T.Z,{width:"100%",padding:2,children:(0,A.jsx)("span",{children:(0,A.jsx)("div",{children:(0,A.jsx)(D,{onMediaMessageClick:h,toggleTransferDialog:p,isThread:s,is:"Message",position:{position:"single",type:"single"},message:w,onMessageButtonClick:U},w.id)})})}),(0,A.jsx)(Z.Z,{children:w.numberOfReplies})]}),(0,A.jsxs)(g.rN,{style:{backgroundImage:null!==l&&void 0!==l&&l.room_background?"url(".concat(l.room_background,")"):"white",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"},disableOnYReachWhenNoScroll:!0,typingIndicator:!(null===(n=L.filter((function(e){return e.jid===m}))[0])||void 0===n||!n.composing)&&(0,A.jsx)(g.c2,{style:{opacity:".6"},content:null===(t=L.filter((function(e){return e.jid===m}))[0])||void 0===t?void 0:t.composing}),children:[J.map((function(e,n,t){var i,r;return"false"===e.data.isSystemMessage?(0,A.jsx)(D,{onMediaMessageClick:h,toggleTransferDialog:p,isThread:!0,is:"Message",position:(0,se.bt)(t,e,n),message:e,onMessageButtonClick:U},e.id):(0,A.jsx)(R,{is:"Message",message:e,userJid:null===(i=c.Z.client)||void 0===i||null===(r=i.jid)||void 0===r?void 0:r.toString()},e.id)})),J.length<=0||!m&&(0,A.jsx)(g.rN.Content,{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",textAlign:"center",fontSize:"1.2em"},children:E?"Loading...":(0,A.jsx)("span",{children:!m&&"To get started, please select a chat room."})}),!E&&m&&J.length<=0&&(0,A.jsx)(g.rN.Content,{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",textAlign:"center",fontSize:"1.2em"},children:"Message list is empty"})]}),!(null===i||void 0===i||!i.name)&&(0,A.jsxs)("div",{is:"MessageInput",children:[(0,A.jsx)(Z.Z,{}),(0,A.jsxs)(T.Z,{borderColor:"#D3D3D3",height:"30px",alignItems:"center",flexDirection:"row",display:"flex",width:"100%",children:[(0,A.jsx)(ie.Z,{checked:y,onChange:v,inputProps:{"aria-label":"controlled"}}),(0,A.jsx)(S.Z,{children:"Also send to room"})]}),(0,A.jsx)(oe,{onChange:function(e){M(e),c.Z.isComposing(I.walletAddress,i.jid,I.firstName+" "+I.lastName)},onPaste:function(e){var n=Array.from(e.clipboardData.items).find((function(e){return/^image\//.test(e.type)}));if(n){var t=n.getAsFile();f(t,!1)}},onSend:U,placeholder:"Type message here",sendFile:f})]})]})},de=t(59911),ce=t(60788),ue=t(8440),me=t(21686),fe=t(64558),he=t(23895),pe=t(52775),xe=t(82637),ge=t(41286),ve=t(28741),je=[1,3,5,"x"],ye="dialog",Ze="clarification",we="transfer";function Ce(e){var n,t=e.open,i=e.onClose,o=(e.loading,e.message),a=e.onPrivateRoomClick,f=e.onThreadClick,h=e.onEditClick,p=e.onDeleteClick,x=(0,u.K)((function(e){return e.user})),g=(0,r.useState)(1),v=(0,d.Z)(g,2),j=v[0],w=v[1],C=(0,r.useState)(ye),b=(0,d.Z)(C,2),k=b[0],N=b[1],M=(0,u.K)((function(e){return e.balance})),D=(0,u.K)((function(e){return e.setNewUserChatRoom})),R=(0,pe.D)().showSnackbar,T=null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.senderJID.split("/")[0],L=(0,r.useMemo)((function(){return(0,ve.I)(x.walletAddress)+I.yK}),[])===T,z=M.filter((function(e){return!e.tokenType&&e.contractAddress.length>10})),K=function(){f(),i()},J=function(){h(!0,o),i()},P=function(){p(!0,o),i()},E=function(e){"clarify"!==e?("block"===e&&(c.Z.blacklistUser(o.data.senderJID),c.Z.getBlackList(),u.K.getState().removeAllInMessageHistory(o.data.senderJID)),i()):N(Ze)},F=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var t,r,a,l,d,u,f;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Number(n||j),e.prev=1,e.next=4,(0,m.tZ)("DPT",z[0].tokenName,t,o.data.senderWalletAddress);case 4:r=e.sent,a=z[0].tokenName===te.zl?te.w5:z[0].tokenName,l=x.firstName+" "+x.lastName,d=o.data.senderFirstName+" "+o.data.senderLastName,u="".concat(l," -> ").concat(j," ").concat(a," -> ").concat(d),f=r.data.transaction._id,c.Z.sendSystemMessage(o.roomJID,x.firstName,x.lastName,x.walletAddress,u,t,o.id,f),i(),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),R("error","An error occurred during the coin transfer."),i();case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(n){return e.apply(this,arguments)}}(),U=function(){(0,he.c)(x.walletAddress,o.data.senderWalletAddress,x.firstName,o.data.senderFirstName,o.data.senderJID).then((function(e){if(e.isNewRoom){var n={jid:e.roomJid,name:e.roomName,room_background:"none",room_thumbnail:"none",users_cnt:"2",unreadMessages:0,composing:"",toUpdate:!0,description:""};D(n),a(e.roomJid)}else a(e.roomJid)})).catch((function(e){console.log("openPrivateRoom Error: ",e)})),i()};return(0,A.jsx)(ce.Z,{open:t,onClose:i,maxWidth:"xl",children:(0,A.jsx)(ue.Z,{children:function(){if(!o)return null;switch(k){case Ze:return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:["Are you sure you want to block the user?",(0,A.jsx)(y.Z,{onClick:function(){return E("block")},variant:"outlined",size:"small",children:"To block list"})]});case ye:return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[!L&&(0,A.jsxs)("div",{children:["Reward"," ",(0,A.jsx)("strong",{children:o.data.senderFirstName+" "+o.data.senderLastName})," ","with coins"]}),!L&&(0,A.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"10px 0px 10px 0px"},children:je.map((function(e){return(0,A.jsxs)("div",{style:{textAlign:"center",cursor:"pointer"},onClick:function(){"number"===typeof e?F(e):N(we)},children:[(0,A.jsx)("img",{src:"/coin.png",style:{width:25,height:25},alt:"coin"}),(0,A.jsx)(S.Z,{sx:{fontWeight:"bold"},children:e})]},e)}))}),!L&&(0,A.jsx)(Z.Z,{style:{margin:"10px"}}),!L&&(0,A.jsx)(y.Z,{onClick:U,variant:"outlined",startIcon:(0,A.jsx)(me.Z,{}),children:"Direct message"}),(0,A.jsx)(y.Z,{style:{margin:"10px 0px 0px 0px"},onClick:K,variant:"outlined",startIcon:(0,A.jsx)(xe.Z,{}),children:"Reply"}),L&&(0,A.jsx)(y.Z,{style:{margin:"10px 0px 0px 0px"},onClick:J,variant:"outlined",startIcon:(0,A.jsx)(ge.Z,{}),children:"Edit"}),L&&(0,A.jsx)(y.Z,{style:{margin:"10px 0px 0px 0px"},onClick:P,variant:"outlined",startIcon:(0,A.jsx)(ge.Z,{}),children:"Delete"}),!L&&(0,A.jsx)(Z.Z,{style:{margin:"10px"}}),!L&&(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,A.jsx)(y.Z,{onClick:function(){return E("clarify")},variant:"contained",startIcon:(0,A.jsx)(fe.Z,{}),children:"Block this user"}),(0,A.jsx)(S.Z,{style:{textAlign:"center"},variant:"caption",display:"block",gutterBottom:!0,children:"Stop seeing this user."})]})]});case we:return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsx)(de.Z,{id:"standard-basic",type:"number",label:"Enter transfer amount",variant:"standard",onChange:function(e){return w(Number(e.target.value))}}),(0,A.jsx)(y.Z,{style:{marginTop:10},onClick:function(){return F()},variant:"outlined",size:"small",children:"Send coins"})]});default:return null}}()})})}var be={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"10px"},ke=function(e){var n=e.open,t=e.onClose,i=e.mimetype,r=e.url;return(0,A.jsx)(U.Z,{open:n,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,A.jsxs)(T.Z,{sx:be,children:[(0,A.jsx)(k.Z,{onClick:t,sx:{position:"absolute",top:0,right:0,color:"black"},children:(0,A.jsx)(re.Z,{})}),function(){switch(i){case"image/jpeg":case"image/png":case"image/jpg":return(0,A.jsx)("img",{src:r,alt:"image1",style:{maxWidth:"100%",maxHeight:"90vh"}});default:return null}}()]})})},Se=t(95958);function Ne(e){var n=e.profile,t=e.currentRoom,i=e.roomData,o=(0,u.K)((function(e){return e.user})),a=(0,r.useState)(!1),f=(0,d.Z)(a,2),h=f[0],p=f[1],x=(0,Se.I)(),g=(0,pe.D)().showSnackbar;return(0,A.jsxs)(T.Z,{children:[(0,A.jsx)(T.Z,{style:{display:h?"none":"block"},children:(0,A.jsx)(Se.h,{recorderControls:x,onRecordingComplete:function(e){p(!0);var r=new FormData;r.append("files",e),(0,m.cT)(r).then((function(e){var r="";null!==n&&void 0!==n&&n.profileImage&&(r=null===n||void 0===n?void 0:n.profileImage),e.data.results.map(function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={firstName:o.firstName,lastName:o.lastName,walletAddress:o.walletAddress,chatName:i.name,userAvatar:r,createdAt:n.createdAt,expiresAt:n.expiresAt,fileName:n.filename,isVisible:n.isVisible,location:n.location,locationPreview:n.locationPreview,mimetype:n.mimetype,originalName:n.originalname,ownerKey:n.ownerKey,size:n.size,duration:null===n||void 0===n?void 0:n.duration,updatedAt:n.updatedAt,userId:n.userId,waveForm:"",attachmentId:n._id,wrappable:!0},c.Z.sendMediaMessageStanza(t,a);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})).catch((function(e){console.log(e),g("error","An error occurred while loading your audio.")})),p(!1)}})}),h&&(0,A.jsx)(W.Z,{color:"secondary",size:"20px"})]})}var Me=t(59715),Ie=t(54270),Ae="none"+I.Ts;function De(){var e,n,t,i,o,v,y=(0,u.K)((function(e){return e.historyMessages})),w=(0,u.K)((function(e){return e.user})),C=(0,u.K)((function(e){return e.userChatRooms})),b=(0,u.K)((function(e){return e.currentThreadViewMessage})),N=(0,u.K)((function(e){return e.setCurrentThreadViewMessage})),M=(0,u.K)((function(e){return e.loaderArchive})),J=(0,u.K)((function(e){return e.currentUntrackedChatRoom})),P=(0,j.UO)().roomJID,E=(0,r.useState)(),F=(0,d.Z)(E,2),U=F[0],W=F[1],_=(0,r.useState)(""),B=(0,d.Z)(_,2),V=B[0],O=B[1],Y=(0,r.useState)(!0),H=(0,d.Z)(Y,2),$=H[0],q=H[1],X=(0,r.useState)(!1),G=(0,d.Z)(X,2),ie=G[0],oe=G[1],de=r.useState(!1),ce=(0,d.Z)(de,2),ue=ce[0],me=ce[1],fe=r.useState(!1),he=(0,d.Z)(fe,2),xe=he[0],ve=he[1],je=r.useState(),ye=(0,d.Z)(je,2),Ze=ye[0],we=ye[1],be=r.useState(!1),Se=(0,d.Z)(be,2),De=Se[0],Re=Se[1],Te=r.useState(),Le=(0,d.Z)(Te,2),ze=Le[0],Ke=Le[1],Je=function(e){return N(e)},Pe=function(){Re(!1),Ke(null)},Ee=(0,r.useState)(""),Fe=(0,d.Z)(Ee,2),Ue=Fe[0],We=Fe[1],_e=(0,r.useMemo)((function(){return C.find((function(e){return e.jid===Ue}))}),[C,Ue]),Be=y.filter((function(e){return e.data.roomJid===P+I.Ts&&(e.data.showInChannel||!e.data.isReply)})),Ve=(0,r.useState)({jid:"",name:"",room_background:"",room_thumbnail:"",users_cnt:""}),Oe=(0,d.Z)(Ve,2),Ye=Oe[0],He=Oe[1],$e=(0,r.useState)({open:!1,message:null}),qe=(0,d.Z)($e,2),Xe=qe[0],Ge=qe[1],Qe=(0,r.useState)({open:!1,message:null}),en=(0,d.Z)(Qe,2),nn=en[0],tn=en[1],rn=(0,r.useState)(!1),on=(0,d.Z)(rn,2),sn=on[0],an=on[1],ln=(0,r.useState)(!1),dn=(0,d.Z)(ln,2),cn=dn[0],un=dn[1],mn=(0,r.useState)(!0),fn=(0,d.Z)(mn,2),hn=fn[0],pn=fn[1],xn=(0,u.K)((function(e){return e.activeRoomFilter})),gn=(0,u.K)((function(e){return e.setActiveRoomFilter})),vn=xn===te.hx.meta,jn=(0,j.k6)(),yn=(0,r.useRef)(null),Zn=(0,pe.D)().showSnackbar,wn=(0,r.useCallback)((function(e){Rn(e[0],!1)}),[Ye]),Cn=(0,K.uI)({onDrop:wn,noClick:!0,maxFiles:1}).getRootProps,bn=function(){var e=y.filter((function(e){return e.roomJID===Ue}));if(!M){var n=e[0].id;c.Z.getPaginatedArchive(Ue,String(n),10)}};(0,r.useEffect)((function(){P&&(Mn(P),q(!0))}),[P]),(0,r.useEffect)((function(){(0,m.k2)(w.walletAddress).then((function(e){W(e.data.result)}))}),[]);var kn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ge({open:e,message:n})},Sn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;tn({open:e,message:n})},Nn=function(e){jn.push("/chat/"+e.split("@")[0]),Mn(e)},Mn=function(e){We(e);var n=C.filter((function(n){return n.jid===e}))[0];He(n),u.K.getState().clearCounterChatRoom(e),u.K.getState().setCurrentUntrackedChatRoom(e);var t=y.filter((function(n){return n.roomJID===e}));if(pn(!0),!M&&t.length<=10&&t.length>0){var i=t[0].id;c.Z.getPaginatedArchive(e,String(i),50)}},In=function(e){var n=y.filter((function(n){return n.roomJID===e})).slice(-1);return M&&n.length<=0?"Loading...":n.length>0?n[0].body:"No messages yet"},An=function(e){var n=y.filter((function(n){return n.roomJID===e})).slice(-1);return n.length<=0?"":(0,f.Z)(new Date(n[0].date),"H:mm")},Dn=function(e){if(V.trim().length>0){var n="";null!==U&&void 0!==U&&U.profileImage&&(n=null===U||void 0===U?void 0:U.profileImage);var t=x.sanitize(V),i=(0,se.Vt)(t);if(i.trim().length>0)if(xe){var r={senderFirstName:w.firstName,senderLastName:w.lastName,senderWalletAddress:w.walletAddress,isSystemMessage:!1,tokenAmount:0,receiverMessageId:Ze.data.receiverMessageId,mucname:Ye.name,photoURL:n,roomJid:P,isReply:!1,mainMessage:void 0,push:!0};c.Z.sendReplaceMessageStanza(J,i,Ze.id.toString(),r),ve(!1)}else c.Z.sendMessage(Ue,w.firstName,w.lastName,n,w.walletAddress,"object"===typeof e?e.value:i,"object"===typeof e?e.notDisplayedValue:null)}},Rn=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n,t){var i,r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new FormData).append("files",n),un(!0),e.prev=3,e.next=6,(0,m.cT)(i);case 6:r=e.sent,o="",null!==U&&void 0!==U&&U.profileImage&&(o=null===U||void 0===U?void 0:U.profileImage),r.data.results.map(function(){var e=(0,l.Z)((0,s.Z)().mark((function e(n){var i,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={firstName:w.firstName,lastName:w.lastName,walletAddress:w.walletAddress,chatName:Ye.name,userAvatar:o,createdAt:n.createdAt,expiresAt:n.expiresAt,fileName:n.filename,isVisible:n.isVisible,location:n.location,locationPreview:n.locationPreview,mimetype:n.mimetype,originalName:n.originalname,ownerKey:n.ownerKey,size:n.size,duration:null===n||void 0===n?void 0:n.duration,updatedAt:n.updatedAt,userId:n.userId,waveForm:"",attachmentId:n._id,wrappable:!0,roomJid:Ue},r={isReply:t,mainMessage:t?(0,ae.a)(b):void 0,showInChannel:ue},c.Z.sendMediaMessageStanza(Ue,(0,a.Z)((0,a.Z)({},i),r));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),Zn("error","Cannot upload file");case 15:yn.current&&(yn.current.value=""),un(!1);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(n,t){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){var e=setTimeout((function(){c.Z.pausedComposing(w.walletAddress,null===Ye||void 0===Ye?void 0:Ye.jid)}),1e3);return function(){return clearTimeout(e)}}),[V]);var Tn=function(){u.K.getState().setCurrentUntrackedChatRoom("")},Ln=function(){Ue&&(u.K.getState().setCurrentUntrackedChatRoom(Ue),u.K.getState().clearCounterChatRoom(Ue))};(0,r.useEffect)((function(){return J&&(P&&"none"!==P&&""!==P&&J.split("@")[0]!==P||(J.split("@")[1]?Nn(J):Nn(J+I.Ts))),J.split("@")[0]!==P&&"none"!==P&&""!==P&&(u.K.getState().setCurrentUntrackedChatRoom(P),Nn(P)),window.addEventListener("blur",Tn),window.addEventListener("focus",Ln),function(){window.removeEventListener("blur",Tn),window.removeEventListener("focus",Ln)}}),[Ue]),(0,r.useEffect)((function(){var e=y.filter((function(e){return e.roomJID===Ue}));if(!M&&e.length>0&&e.length<=51&&Ue&&hn){var n=e[0];e.length>=10&&e.length<15&&n.data.isSystemMessage?(pn(!1),c.Z.getPaginatedArchive(Ue,String(n.id),5)):1===e.length&&(pn(!1),c.Z.getPaginatedArchive(Ue,String(n.id),50))}0===e.length&&hn&&"online"===c.Z.client.status&&c.Z.getRoomArchiveStanza(Ue,50)}),[y]);var zn,Kn,Jn=function(e,n){ve(e),function(e){we(e)}(n)};return(0,A.jsxs)(T.Z,{style:{paddingBlock:"20px",height:"100%"},children:[!!_e&&(0,A.jsxs)(Ie.q,{children:[(0,A.jsx)("title",{children:te.DJ+": "+_e.name}),(0,A.jsx)("meta",{property:"og:title",content:_e.name}),(0,A.jsx)("meta",{name:"description",content:_e.description})]}),(0,A.jsxs)(g.tz,{responsive:!0,children:[(0,A.jsxs)(g.YE,{position:"left",scrollable:!1,children:[(0,A.jsx)(g.ol,{placeholder:"Search..."}),(0,A.jsx)(g.p7,{loading:M,children:(zn=C,Kn=xn,Kn===te.hx.official||Kn===te.hx.favourite?zn.filter((function(e){return e.group===te.hx.official||e.group===te.hx.favourite})):zn.filter((function(e){return e.group!==te.hx.official&&e.group!==te.hx.favourite}))).map((function(e){return(0,A.jsx)(g.ri,{active:e.jid===Ue,unreadCnt:e.unreadMessages,onClick:function(){Nn(e.jid),oe(!1)},name:e.name,info:In(e.jid),lastActivityTime:An(e.jid),children:(0,A.jsx)(g.qE,{src:"none"!==e.room_thumbnail?e.room_thumbnail:"https://icotar.com/initials/"+e.name})},e.jid)}))})]}),(0,A.jsxs)("div",(0,a.Z)((0,a.Z)({},Cn()),{},{style:{width:"100%",height:"100%",flexDirection:"row",display:"flex"},children:[(0,A.jsxs)(g.uU,{children:[!!Ye&&(0,A.jsxs)(g.BU,{style:{height:"70px"},children:[(0,A.jsx)(g.BU.Back,{}),Be.length>0&&(0,A.jsx)(g.BU.Content,{userName:Ye.name,onClick:function(){jn.push("/chatDetails/"+J)},info:y.filter((function(e){return e.roomJID===Ue})).length>0&&"Active "+(0,h.Z)((0,p.Z)(new Date(Be.slice(-1)[0].date),0),new Date,{addSuffix:!0})}),(0,A.jsxs)(g.BU.Actions,{children:[(0,A.jsx)(Ne,{profile:U,currentRoom:Ue,roomData:Ye}),(0,A.jsx)(k.Z,{sx:{color:"black"},onClick:function(){return an(!0)},children:(0,A.jsx)(ee.Z,{})})]})]}),(0,A.jsxs)(g.rN,{style:{backgroundImage:null!==_e&&void 0!==_e&&_e.room_background?"url(".concat(_e.room_background,")"):"white",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"},loadingMore:M||cn,onYReachStart:bn,disableOnYReachWhenNoScroll:!0,typingIndicator:!(null===(e=C.filter((function(e){return e.jid===Ue}))[0])||void 0===e||!e.composing)&&(0,A.jsx)(g.c2,{style:{opacity:".6"},content:null===(n=C.filter((function(e){return e.jid===Ue}))[0])||void 0===n?void 0:n.composing}),children:[Be.map((function(e,n,t){var i,r,o=(0,se.bt)(t,e,n);return"false"===e.data.isSystemMessage?(0,A.jsx)(D,{onThreadClick:function(){return function(e){oe(!0),Je(e)}(e)},is:"Message",position:o,message:e,onMessageButtonClick:Dn,toggleTransferDialog:kn,onMediaMessageClick:Sn},e.id):(0,A.jsx)(R,{is:"Message",message:e,userJid:null===(i=c.Z.client)||void 0===i||null===(r=i.jid)||void 0===r?void 0:r.toString()},e.id)})),Be.length<=0||!Ue||Ue===Ae&&(0,A.jsx)(g.rN.Content,{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",textAlign:"center",fontSize:"1.2em"},children:M?"Loading...":(0,A.jsx)("span",{children:Ue&&Ue!==Ae?null:"Choose a chat room or create one to start a conversation."})}),!M&&Ue&&Ue!==Ae&&Be.length<=0&&(0,A.jsx)(g.rN.Content,{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",textAlign:"center",fontSize:"1.2em"},children:"Message list is empty"})]}),!(null===Ye||void 0===Ye||!Ye.name)&&(0,A.jsxs)("div",{is:"MessageInput",children:[xe&&(0,A.jsx)(Z.Z,{}),(0,A.jsx)(L.Z,{direction:"up",in:xe,mountOnEnter:!0,unmountOnExit:!0,children:(0,A.jsxs)(z.Z,{display:"flex",height:"50px",width:"100%",direction:"row",children:[(0,A.jsx)("div",{style:{display:"flex",flex:"0.05",justifyContent:"center",alignItems:"center"},children:(0,A.jsx)(ge.Z,{color:"info"})}),(0,A.jsxs)("div",{style:{display:"flex",flex:"0.90",flexDirection:"column"},children:[(0,A.jsx)(S.Z,{color:"#1976d2",fontWeight:"bold",children:"Edit Message"}),(0,A.jsx)(S.Z,{children:null===Ze||void 0===Ze?void 0:Ze.body})]}),(0,A.jsx)("div",{style:{display:"flex",flex:"0.05",justifyContent:"center",alignItems:"center"},children:(0,A.jsx)(k.Z,{onClick:function(){return Jn(!1,void 0)},"aria-label":"close",children:(0,A.jsx)(re.Z,{})})})]})}),(0,A.jsx)(g.Ru,{onPaste:function(e){var n=Array.from(e.clipboardData.items).find((function(e){return/^image\//.test(e.type)}));if(n){var t=n.getAsFile();Rn(t,!1)}},placeholder:"Type message here",onChange:function(e){O(e),c.Z.isComposing(w.walletAddress,Ye.jid,w.firstName+" "+w.lastName)},onSend:Dn,onAttachClick:function(){return yn.current.click()}}),(0,A.jsx)("input",{type:"file",name:"file",id:"file",onChange:function(e){return Rn(e.target.files[0],!1)},ref:yn,style:{display:"none"}})]})]}),ie&&(0,A.jsx)(le,{chooseRoom:Nn,currentPickedRoom:_e,currentRoom:Ue,handleSetThreadView:function(e){return oe(e)},handleShowInChannel:function(e){return me(e.target.checked)},isThreadView:ie,onYReachStart:bn,profile:U,roomData:Ye,sendFile:Rn,showInChannel:ue,toggleMediaModal:Sn,toggleTransferDialog:kn})]}))]}),(0,A.jsx)(Ce,{open:Xe.open,onClose:function(){return kn(!1)},loading:!1,onPrivateRoomClick:Nn,message:Xe.message,onThreadClick:function(){oe(!0),Je(Xe.message)},onEditClick:Jn,onDeleteClick:function(e,n){Re(e),function(e){Ke(e)}(n)}}),(0,A.jsx)(ke,{open:nn.open,onClose:function(){return Sn(!1)},mimetype:null===(t=nn.message)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.mimetype,url:null===(o=nn.message)||void 0===o||null===(v=o.data)||void 0===v?void 0:v.location}),(0,A.jsx)(Me.A,{open:De,onClose:Pe,onDeletePress:function(){u.K.getState().deleteMessage(ze.id),c.Z.deleteMessageStanza(J,ze.id.toString()),Pe()},description:"Are you sure you want to delete this message.",title:"Delete message"}),(0,A.jsx)(ne.z,{open:sn,link:(0,se.C$)({roomAddress:null===_e||void 0===_e?void 0:_e.jid}),onClose:function(){an(!1)},title:"Share Chatroom"}),(0,A.jsx)(Q,{open:$||vn,chatId:Ue.split("@")[0],onClose:function(){q(!1),vn&&gn("")}})]})}function Re(){return(0,A.jsx)(o.Z,{maxWidth:"xl",style:{height:"calc(100vh - 68px)"},children:(0,A.jsx)(De,{})})}},14250:function(e,n,t){t.d(n,{z:function(){return m}});t(72791);var i=t(60788),r=t(40464),o=t(17205),s=t(13811),a=t(52791),l=t(80925),d=t(24177),c=t(29823),u=t(80184),m=function(e){var n=e.title,t=e.open,m=e.link,f=e.onClose;return(0,u.jsxs)(i.Z,{maxWidth:!1,open:t,onClose:f,children:[!!n&&(0,u.jsx)(r.Z,{sx:{padding:"0 24px",paddingTop:"20px"},children:n}),(0,u.jsxs)(a.Z,{sx:{padding:"20px"},children:[(0,u.jsx)(l.Z,{size:256,style:{height:"50vh",maxWidth:"100%",width:"100%"},value:m,viewBox:"0 0 256 256"}),(0,u.jsxs)(a.Z,{sx:{boxShadow:"0px 0px 10px -5px rgba(0,0,0,0.75)",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",pl:"10px",my:"10px"},children:[(0,u.jsx)("span",{children:(0,d.aS)(m,50)}),(0,u.jsx)(o.Z,{variant:"contained",sx:{borderRadius:"10px",marginLeft:"5px"},onClick:function(){return navigator.clipboard.writeText(m)},children:"Copy"})]}),(0,u.jsx)(s.Z,{onClick:f,sx:{color:"black",position:"absolute",top:10,right:10,fontSize:"30px"},children:(0,u.jsx)(c.Z,{fontSize:"inherit"})})]})]})}}}]);
//# sourceMappingURL=986.b0da2e96.chunk.js.map