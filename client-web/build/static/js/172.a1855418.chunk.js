"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[172],{54572:function(e,n,r){r.d(n,{v:function(){return D}});var t=r(4942),a=r(74165),i=r(15861),o=r(70885),s=r(1413),l=r(72791),d=r(21680),u=r(19773),c=r(24390),p=r(69963),h=r(9827),f=r(60807),v=r(56650),Z=r(45473),m=r(4565),x=r(17205),g=r(47409),j=r(52791),b=r(45100),w=r(11210),C=r(52775),N=r(80184),k={inputProps:{"aria-label":"Checkbox"}},y=function(e,n){return!!e&&!!e.find((function(e){return e===n}))},S=function(e){return!!e&&!!Object.entries(e).find((function(e){return"admin"===e[0]&&!!e[1]}))},A=function(e){var n=e.name,r=e.row,t=e.onChange,a=e.disableAllRow,i=(0,w.K)((function(e){var n;return null===(n=e.user)||void 0===n?void 0:n.ACL.ownerAccess}));return(0,N.jsxs)(f.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,N.jsx)(c.Z,{component:"th",scope:"row",children:n}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"create")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,s.Z)({checked:null===r||void 0===r?void 0:r.create,name:"create",disabled:(y(null===r||void 0===r?void 0:r.disabled,"create")||a)&&!i,onChange:function(e){return t(e,n)}},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"read")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,s.Z)({name:"read",onChange:function(e){return t(e,n)},disabled:y(null===r||void 0===r?void 0:r.disabled,"read")||a,checked:null===r||void 0===r?void 0:r.read},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"update")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,s.Z)({name:"update",onChange:function(e){return t(e,n)},disabled:y(null===r||void 0===r?void 0:r.disabled,"update")||a,checked:null===r||void 0===r?void 0:r.update},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"delete")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,s.Z)({name:"delete",onChange:function(e){return t(e,n)},disabled:y(null===r||void 0===r?void 0:r.disabled,"delete")||a,checked:null===r||void 0===r?void 0:r.delete},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"admin")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,s.Z)({name:"admin",onChange:function(e){return t(e,n)},disabled:y(null===r||void 0===r?void 0:r.disabled,"admin")||a,checked:null===r||void 0===r?void 0:r.admin},k))})]})},D=function(e){var n=e.userId,r=e.updateData,Z=e.onAclError,k=(0,l.useState)(),y=(0,o.Z)(k,2),D=y[0],R=y[1],M=(0,l.useState)([]),T=(0,o.Z)(M,2),B=T[0],L=T[1],O=(0,l.useState)([]),W=(0,o.Z)(O,2),F=W[0],P=W[1],U=(0,w.K)((function(e){return e.ACL})),z=(0,l.useState)(!1),I=(0,o.Z)(z,2),_=I[0],q=I[1],E=(0,C.D)().showSnackbar,K=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r,t,i,o,s,l,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,(0,g.wX)(n);case 4:r=e.sent,t=r.data,console.log("getAcl ",t),R(t),i=Object.keys(t.result.application),o=Object.keys(t.result.network),L(i),P(o),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),E("error","Cannot get user ACL "+(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l||null===(d=l.errors[0])||void 0===d?void 0:d.msg)||0),Z&&Z(),console.log(e.t0);case 19:q(!1);case 20:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),V=function(e,n){R((function(r){return{result:(0,s.Z)((0,s.Z)({},r.result),{},{application:(0,s.Z)((0,s.Z)({},r.result.application),{},(0,t.Z)({},n,(0,s.Z)((0,s.Z)({},r.result.application[n]),{},(0,t.Z)({},e.target.name,e.target.checked))))})}}))},H=function(e,n){R((function(n){return{result:(0,s.Z)((0,s.Z)({},n.result),{},{network:(0,s.Z)((0,s.Z)({},n.result.network),{},{netStats:(0,s.Z)((0,s.Z)({},n.result.network.netStats),{},(0,t.Z)({},e.target.name,e.target.checked))})})}}))},Y=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,i,o,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,t=Object.fromEntries(Object.entries(D.result.application).map((function(e){return delete e[1].disabled,e}))),i=Object.fromEntries(Object.entries(D.result.network).map((function(e){return delete e[1].disabled,e}))),o={application:t,network:i},e.next=7,(0,g.eU)(n,o);case 7:s=e.sent,l=s.data,r&&r(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:q(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){K()}),[]),_?(0,N.jsx)(b.A,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.Z,{marginBottom:"10px",fontWeight:"bold",children:"Applications"}),(0,N.jsx)(p.Z,{component:v.Z,children:(0,N.jsxs)(d.Z,{size:"small",sx:{minWidth:650},"aria-label":"simple table",children:[(0,N.jsx)(h.Z,{children:(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(c.Z,{children:"Name"}),(0,N.jsx)(c.Z,{children:"Create"}),(0,N.jsx)(c.Z,{align:"left",children:"Read"}),(0,N.jsx)(c.Z,{align:"left",children:"Update"}),(0,N.jsx)(c.Z,{align:"left",children:"Delete"}),(0,N.jsx)(c.Z,{align:"left",children:"Admin"})]})}),(0,N.jsx)(u.Z,{children:U.result&&B.map((function(e){var n=D.result.application[e],r=U.result.application[e];return(0,N.jsx)(A,{disableAllRow:!S(r),onChange:V,name:e,row:n},e)}))})]})}),(0,N.jsx)(m.Z,{marginBottom:"10px",marginTop:"10px",fontWeight:"bold",children:"Networks"}),(0,N.jsx)(p.Z,{component:v.Z,children:(0,N.jsxs)(d.Z,{size:"small",sx:{minWidth:650},"aria-label":"simple table",children:[(0,N.jsx)(h.Z,{children:(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(c.Z,{children:"Name"}),(0,N.jsx)(c.Z,{children:"Create"}),(0,N.jsx)(c.Z,{align:"left",children:"Read"}),(0,N.jsx)(c.Z,{align:"left",children:"Update"}),(0,N.jsx)(c.Z,{align:"left",children:"Delete"}),(0,N.jsx)(c.Z,{align:"left",children:"Admin"})]})}),(0,N.jsx)(u.Z,{children:F.map((function(e){var n=D.result.network.netStats,r=U.result.network.netStats;return(0,N.jsx)(A,{disableAllRow:!S(r),onChange:H,name:e,row:n},e)}))})]})}),(0,N.jsx)(j.Z,{sx:{display:"flex",width:"100%",justifyContent:"flex-end",marginTop:"20px"},children:(0,N.jsx)(x.Z,{variant:"contained",onClick:Y,children:"Update Acl"})})]})}},32037:function(e,n,r){r.d(n,{Z:function(){return a}});r(72791);var t=r(80184);function a(){return(0,t.jsx)("div",{className:"noDataImg"})}},22873:function(e,n,r){r.d(n,{Z:function(){return k}});var t=r(74165),a=r(42982),i=r(15861),o=(r(72791),r(60788)),s=r(40464),l=r(50228),d=r(13811),u=r(29823),c=r(55705),p=r(59911),h=r(11210),f=r(81898),v=r(40508),Z=r(39709),m=r(47409),x=r(8440),g=r(39571),j=r(17205),b=r(77248),w=r(63818),C=r(52775),N=r(80184);function k(e){var n,r=e.open,k=e.setOpen,y=e.setUsers,S=(0,h.K)((function(e){return e.apps})),A=((0,h.K)((function(e){return e.addAppUsers})),(0,C.D)().showSnackbar),D=(0,c.TA)({initialValues:{firstName:"",lastName:"",username:"",password:"",appId:null===(n=S[0])||void 0===n?void 0:n._id},validate:function(e){var n={};return e.firstName||(n.firstName="Required"),e.lastName||(n.lastName="Required"),e.username||(n.username="Required"),e.password||(n.password="Required"),n},onSubmit:function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n,r){var i,o,s,l,d,u,c,p,h,f,v,Z;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.username,o=n.firstName,s=n.lastName,l=n.password,d=n.appId,u=r.resetForm,(c=r.setSubmitting)(!0),p=S.find((function(e){return e._id===d})),e.prev=4,e.next=7,m.dd(i,l,o,s,null===p||void 0===p?void 0:p.appToken);case 7:h=e.sent,y((function(e){return[].concat((0,a.Z)(e),[h.data.user])})),u(),k(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),A("error","Cannot create user "+(null===(f=e.t0.response)||void 0===f||null===(v=f.data)||void 0===v||null===(Z=v.errors[0])||void 0===Z?void 0:Z.msg)||0);case 16:c(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(n,r){return e.apply(this,arguments)}}()});return 0===S.length?(0,N.jsxs)(o.Z,{open:r,onClose:function(){return k(!1)},"aria-labelledby":"responsive-dialog-title",children:[(0,N.jsx)(s.Z,{id:"responsive-dialog-title",children:"There is no apps"}),(0,N.jsx)(x.Z,{children:(0,N.jsx)(g.Z,{children:"You should create app first please!"})}),(0,N.jsx)(b.Z,{children:(0,N.jsx)(j.Z,{disabled:D.isSubmitting,variant:"contained",autoFocus:!0,onClick:function(){return k(!1)},children:"Close"})})]}):(0,N.jsx)(o.Z,{onClose:function(){return k(!1)},open:r,children:(0,N.jsxs)(l.Z,{style:{width:"400px"},children:[(0,N.jsxs)(s.Z,{style:{display:"flex",justifyContent:"space-between"},children:["New User",(0,N.jsx)(d.Z,{disabled:D.isSubmitting,onClick:function(){return k(!1)},children:(0,N.jsx)(u.Z,{})})]}),(0,N.jsx)(l.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,N.jsxs)("form",{onSubmit:D.handleSubmit,children:[(0,N.jsx)(l.Z,{children:(0,N.jsxs)(f.Z,{fullWidth:!0,children:[(0,N.jsx)(v.Z,{variant:"standard",htmlFor:"uncontrolled-native",children:"App"}),(0,N.jsx)(w.Z,{inputProps:{name:"appName",id:"uncontrolled-native"},onChange:function(e){D.setFieldValue("appId",e.target.value)},children:S.map((function(e){return(0,N.jsx)("option",{value:e._id,children:e.appName},e._id)}))})]})}),(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(p.Z,{fullWidth:!0,error:!(!D.touched.firstName||!D.errors.firstName),helperText:D.touched.firstName&&D.errors.firstName?D.errors.firstName:"",margin:"dense",label:"First Name",name:"firstName",variant:"standard",onChange:D.handleChange,onBlur:D.handleBlur,value:D.values.firstName}),(0,N.jsx)(p.Z,{fullWidth:!0,error:!(!D.touched.lastName||!D.errors.lastName),helperText:D.touched.lastName&&D.errors.lastName?D.errors.lastName:"",margin:"dense",label:"Last Name",name:"lastName",variant:"standard",onChange:D.handleChange,onBlur:D.handleBlur,value:D.values.lastName}),(0,N.jsx)(p.Z,{fullWidth:!0,error:!(!D.touched.lastName||!D.errors.username),helperText:D.touched.username&&D.errors.username?D.errors.username:"",margin:"dense",label:"Username",name:"username",variant:"standard",onChange:D.handleChange,onBlur:D.handleBlur,value:D.values.username}),(0,N.jsx)(p.Z,{fullWidth:!0,error:!(!D.touched.password||!D.errors.password),helperText:D.touched.password&&D.errors.password?D.errors.password:"",margin:"dense",label:"Password",name:"password",variant:"standard",onChange:D.handleChange,onBlur:D.handleBlur,value:D.values.password})]}),(0,N.jsx)(l.Z,{style:{display:"flex",justifyContent:"center"},children:(0,N.jsx)(Z.Z,{loading:D.isSubmitting,variant:"contained",style:{marginTop:"15px"},type:"submit",disabled:D.isSubmitting,children:"Create New User"})})]})})]})})}},68439:function(e,n,r){var t=r(64836);n.Z=void 0;var a=t(r(45649)),i=r(80184),o=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");n.Z=o},77248:function(e,n,r){r.d(n,{Z:function(){return Z}});var t=r(63366),a=r(87462),i=r(72791),o=r(28182),s=r(94419),l=r(60277),d=r(85513),u=r(75878),c=r(21217);function p(e){return(0,c.Z)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var h=r(80184),f=["className","disableSpacing"],v=(0,l.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(e,n){var r=e.ownerState;return[n.root,!r.disableSpacing&&n.spacing]}})((function(e){var n=e.ownerState;return(0,a.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!n.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),Z=i.forwardRef((function(e,n){var r=(0,d.Z)({props:e,name:"MuiDialogActions"}),i=r.className,l=r.disableSpacing,u=void 0!==l&&l,c=(0,t.Z)(r,f),Z=(0,a.Z)({},r,{disableSpacing:u}),m=function(e){var n=e.classes,r={root:["root",!e.disableSpacing&&"spacing"]};return(0,s.Z)(r,p,n)}(Z);return(0,h.jsx)(v,(0,a.Z)({className:(0,o.Z)(m.root,i),ownerState:Z,ref:n},c))}))},8440:function(e,n,r){r.d(n,{Z:function(){return x}});var t=r(4942),a=r(63366),i=r(87462),o=r(72791),s=r(28182),l=r(94419),d=r(60277),u=r(85513),c=r(75878),p=r(21217);function h(e){return(0,p.Z)("MuiDialogContent",e)}(0,c.Z)("MuiDialogContent",["root","dividers"]);var f=r(5186),v=r(80184),Z=["className","dividers"],m=(0,d.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(e,n){var r=e.ownerState;return[n.root,r.dividers&&n.dividers]}})((function(e){var n=e.theme,r=e.ownerState;return(0,i.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},r.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((n.vars||n).palette.divider),borderBottom:"1px solid ".concat((n.vars||n).palette.divider)}:(0,t.Z)({},".".concat(f.Z.root," + &"),{paddingTop:0}))})),x=o.forwardRef((function(e,n){var r=(0,u.Z)({props:e,name:"MuiDialogContent"}),t=r.className,o=r.dividers,d=void 0!==o&&o,c=(0,a.Z)(r,Z),p=(0,i.Z)({},r,{dividers:d}),f=function(e){var n=e.classes,r={root:["root",e.dividers&&"dividers"]};return(0,l.Z)(r,h,n)}(p);return(0,v.jsx)(m,(0,i.Z)({className:(0,s.Z)(f.root,t),ownerState:p,ref:n},c))}))},39571:function(e,n,r){r.d(n,{Z:function(){return m}});var t=r(63366),a=r(87462),i=r(72791),o=r(28182),s=r(94419),l=r(60277),d=r(85513),u=r(4565),c=r(75878),p=r(21217);function h(e){return(0,p.Z)("MuiDialogContentText",e)}(0,c.Z)("MuiDialogContentText",["root"]);var f=r(80184),v=["children","className"],Z=(0,l.ZP)(u.Z,{shouldForwardProp:function(e){return(0,l.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,n){return n.root}})({}),m=i.forwardRef((function(e,n){var r=(0,d.Z)({props:e,name:"MuiDialogContentText"}),i=r.className,l=(0,t.Z)(r,v),u=function(e){var n=e.classes,r=(0,s.Z)({root:["root"]},h,n);return(0,a.Z)({},n,r)}(l);return(0,f.jsx)(Z,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:l,className:(0,o.Z)(u.root,i)},r,{classes:u}))}))},68840:function(e,n,r){r(72791);var t=r(81245),a=r(80184);n.Z=(0,t.Z)((0,a.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage")},19458:function(e,n,r){r(72791);var t=r(81245),a=r(80184);n.Z=(0,t.Z)((0,a.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage")},52791:function(e,n,r){var t=(0,r(23814).Z)();n.Z=t}}]);
//# sourceMappingURL=172.a1855418.chunk.js.map