"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[588],{77588:function(n,e,i){i.r(e),i.d(e,{default:function(){return M}});var t=i(72791),o=i(20803),r=i(74165),l=i(15861),s=i(70885),a=i(50228),d=i(13811),u=i(73978),c=i(4565),f=i(91803),h=i(59911),x=i(17205),p=i(64880),m=i(11210),j=i(85554),Z=i(41286),b=i(75426),v=i(60340),g=i(68438),y=i(27247),C=i(50412),w=i(80184);function k(){var n,e=(0,p.UO)().roomJID,i=(0,t.useState)(""),k=(0,s.Z)(i,2),S=k[0],P=k[1],R=(0,t.useState)(""),D=(0,s.Z)(R,2),z=D[0],L=D[1],M=(0,t.useState)(!1),K=(0,s.Z)(M,2),_=K[0],U=K[1],A=(0,t.useState)(!1),J=(0,s.Z)(A,2),E=J[0],W=J[1],$=(0,t.useState)(!1),N=(0,s.Z)($,2),O=N[0],q=N[1],G=(0,m.K)((function(n){return n.userChatRooms})).find((function(n){return(null===n||void 0===n?void 0:n.jid)===e})),H=(0,m.K)((function(n){return n.roomRoles})),T=(0,p.k6)(),V=null===(n=H.find((function(n){return n.roomJID===(null===G||void 0===G?void 0:G.jid)})))||void 0===n?void 0:n.role,B=(0,m.K)((function(n){return n.updateChatRoomGroups})),Y=(0,m.K)((function(n){return n.userChatRoomGroups})).find((function(n){return(null===n||void 0===n?void 0:n.jid)===e})),F=Y&&(Y.group===g.hx.official||Y.group===g.hx.favourite),Q=function(n){var e={jid:G.jid,group:n};B(e)},X=function(){W(!1)},nn=function(){var n=(0,l.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:j.ZP.leaveTheRoom(e),j.ZP.unsubscribe(e),X(),T.push("/chat/none");case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,w.jsxs)(o.Z,{style:{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,w.jsx)("div",{style:{cursor:"pointer"},children:(0,w.jsxs)(a.Z,{sx:{width:200,height:200,margin:5,backgroundColor:"primary.dark",justifyContent:"center",alignItems:"center",display:"flex",borderRadius:"10px",position:"relative"},children:[(0,w.jsxs)(a.Z,{sx:{position:"absolute",top:0,right:0,display:"flex",flexDirection:"column",zIndex:99999},children:[(0,w.jsx)(d.Z,{sx:{color:"white"},onClick:function(){return Q(F?"":g.hx.official)},children:F?(0,w.jsx)(v.Z,{}):(0,w.jsx)(b.Z,{})}),(null===Y||void 0===Y?void 0:Y.group)!==g.hx.official&&(0,w.jsx)(d.Z,{sx:{color:"red"},onClick:function(){return W(!0)},children:(0,w.jsx)(y.Z,{})})]}),(0,w.jsx)(d.Z,{disableRipple:!0,onClick:function(n){"moderator"!==V&&"owner"!==V&&"admin"!==V||T.push("/changebg/"+e)},children:null!==G&&void 0!==G&&G.room_thumbnail&&"none"!==(null===G||void 0===G?void 0:G.room_thumbnail)?(0,w.jsx)(u.Z,{sx:{width:100,height:100},variant:"square",src:G.room_thumbnail}):(0,w.jsx)(c.Z,{color:"white",fontSize:"120px",children:null===G||void 0===G?void 0:G.name[0]})})]})}),(0,w.jsxs)(a.Z,{flexDirection:"row",display:"flex",children:[(0,w.jsx)(c.Z,{fontSize:"20px",fontWeight:"bold",children:null===G||void 0===G?void 0:G.name}),(0,w.jsx)(d.Z,{onClick:function(){return q(!0)},style:{marginLeft:10},children:(0,w.jsx)(Z.Z,{fontSize:"small"})})]}),(0,w.jsxs)(o.Z,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center",display:"flex"},children:[(0,w.jsx)(c.Z,{fontSize:"20px",children:null!==G&&void 0!==G&&G.description?G.description:"No description"}),(0,w.jsx)(d.Z,{onClick:function(){return U(!0)},style:{marginLeft:10},children:(0,w.jsx)(Z.Z,{fontSize:"small"})})]}),(0,w.jsx)(f.Z,{open:_,onClose:function(){return U(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,w.jsxs)(a.Z,{sx:I,children:[(0,w.jsx)(c.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Set new description"}),(0,w.jsx)(h.Z,{onChange:function(n){return P(n.target.value)},margin:"normal",id:"outlined-basic",label:"Description",variant:"outlined"}),(0,w.jsx)(x.Z,{onClick:function(){U(!1),function(n){j.ZP.changeRoomDescription(e,n)}(S)},style:{justifyContent:"center",alignItems:"center",display:"flex"},variant:"outlined",children:(0,w.jsx)(c.Z,{id:"modal-modal-description",children:"Submit"})})]})}),(0,w.jsx)(f.Z,{open:O,onClose:function(){return q(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,w.jsxs)(a.Z,{sx:I,children:[(0,w.jsx)(c.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Set new room name"}),(0,w.jsx)(h.Z,{onChange:function(n){return L(n.target.value)},margin:"normal",id:"outlined-basic",label:"Room Name",variant:"outlined"}),(0,w.jsx)(x.Z,{onClick:function(){q(!1),function(n){j.ZP.changeRoomName(e,n)}(z)},style:{justifyContent:"center",alignItems:"center",display:"flex"},variant:"outlined",children:(0,w.jsx)(c.Z,{id:"modal-modal-description",children:"Submit"})})]})}),(0,w.jsx)(C.A,{open:E,title:"Delete",description:"Do you want to delete this room?",onDeletePress:nn,onClose:X})]})}var I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,justifyContent:"center",flex:"display"},S=i(45629),P=i(76132),R=i(16992),D=i(70324),z=i(52898);function L(){var n,e=(0,p.UO)().roomJID,i=(0,m.K)((function(n){return n.userChatRooms})),o=(0,m.K)((function(n){return n.roomMemberInfo.filter((function(n){return"none"!==n.name}))})),r=(0,m.K)((function(n){return n.user})),l=i.find((function(n){return(null===n||void 0===n?void 0:n.jid)===e})),f=(0,t.useState)(!1),h=(0,s.Z)(f,2),x=h[0],Z=h[1],b=(0,t.useState)(),v=(0,s.Z)(b,2),g=(v[0],v[1]),y=(0,t.useState)(null),C=(0,s.Z)(y,2),k=C[0],I=C[1],L=(0,m.K)((function(n){return n.roomRoles})),M=(0,p.k6)(),K=null===(n=L.find((function(n){return n.roomJID===(null===l||void 0===l?void 0:l.jid)})))||void 0===n?void 0:n.role,_=function(n){n.stopPropagation(),I(null),Z(!1)};return(0,w.jsxs)(a.Z,{children:[(0,w.jsxs)(c.Z,{variant:"h5",children:["Members (",o.length,")"]}),(0,w.jsx)(S.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:o.map((function(n){return(0,w.jsxs)(P.ZP,{dense:!0,onClick:function(){return function(n){n.jid.includes((0,j.$I)(r.walletAddress))?M.push("/profile/"+r.walletAddress):M.push("/profile/"+(0,j.$2)(n.jid.split("@")[0]))}(n)},style:{flexDirection:"row",alignItems:"center"},children:[(0,w.jsx)(a.Z,{alignItems:"center",justifyContent:"center",style:{background:"#003E9C",width:"40px",height:"40px",margin:5,display:"flex"},children:"none"!==n.profile?(0,w.jsx)(u.Z,{style:{width:"40px",height:"40px"},variant:"square",src:n.profile}):(0,w.jsx)(c.Z,{style:{color:"white"},children:n.name?n.name[0]:null})}),(0,w.jsx)(c.Z,{children:n.jid.includes((0,j.$I)(r.walletAddress))?"You":n.name}),!n.jid.includes((0,j.$I)(r.walletAddress))&&("moderator"===K||"owner"===K)&&(0,w.jsx)(d.Z,{"aria-label":"more",id:"long-button","aria-haspopup":"true",onClick:function(e){return function(n,e){n.stopPropagation(),g(e),I(n.currentTarget),Z(!0)}(e,n)},children:(0,w.jsx)(z.Z,{})}),"owner"===n.role&&(0,w.jsx)(a.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,w.jsx)(c.Z,{children:n.role})}),"clear"!==n.ban_status?(0,w.jsx)(a.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,w.jsx)(c.Z,{children:"banned"})}):null,(0,w.jsx)(R.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:k,open:x,onClose:_,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:(0,w.jsx)(D.Z,{onClick:function(e){return function(n,e){"clear"===n.ban_status?j.ZP.banUserStanza(n.jid,l.jid):j.ZP.unbanUserStanza(n.jid,l.jid),j.ZP.getRoomMemberInfo(l.jid),_(e)}(n,e)},children:"clear"===(null===n||void 0===n?void 0:n.ban_status)?"Ban":"Unban"})})]},n.jid)}))})]})}function M(){var n=(0,p.UO)().roomJID;return(0,t.useEffect)((function(){j.ZP.getRoomMemberInfo(n),j.ZP.getRoomInfo(n)}),[]),(0,w.jsxs)(o.Z,{maxWidth:"xl",children:[(0,w.jsx)(k,{}),(0,w.jsx)(L,{})]})}},41286:function(n,e,i){var t=i(64836);e.Z=void 0;var o=t(i(45649)),r=i(80184),l=(0,o.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");e.Z=l},52898:function(n,e,i){var t=i(64836);e.Z=void 0;var o=t(i(45649)),r=i(80184),l=(0,o.default)((0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");e.Z=l},75426:function(n,e,i){var t=i(64836);e.Z=void 0;var o=t(i(45649)),r=i(80184),l=(0,o.default)((0,r.jsx)("path",{d:"m12 8.89.94 3.11h2.82l-2.27 1.62.93 3.01L12 14.79l-2.42 1.84.93-3.01L8.24 12h2.82L12 8.89M12 2l-2.42 8H2l6.17 4.41L5.83 22 12 17.31 18.18 22l-2.35-7.59L22 10h-7.58L12 2z"}),"StarPurple500");e.Z=l}}]);
//# sourceMappingURL=588.60168bbe.chunk.js.map