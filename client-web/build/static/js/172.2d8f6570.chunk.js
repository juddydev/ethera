"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[172],{54572:function(e,n,r){r.d(n,{v:function(){return D}});var t=r(4942),a=r(74165),i=r(15861),s=r(70885),o=r(1413),l=r(72791),d=r(21680),u=r(19773),c=r(24390),p=r(69963),f=r(9827),h=r(60807),v=r(56650),Z=r(45473),m=r(4565),x=r(17205),g=r(47409),j=r(52791),b=r(45100),w=r(11210),C=r(52775),N=r(80184),k={inputProps:{"aria-label":"Checkbox"}},y=function(e,n){return!!e&&!!e.find((function(e){return e===n}))},S=function(e){return!!e&&!!Object.entries(e).find((function(e){return"admin"===e[0]&&!!e[1]}))},A=function(e){var n=e.name,r=e.row,t=e.onChange,a=e.disableAllRow,i=(0,w.K)((function(e){var n,r;return null===(n=e.user)||void 0===n||null===(r=n.ACL)||void 0===r?void 0:r.ownerAccess}));return(0,N.jsxs)(h.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,N.jsx)(c.Z,{component:"th",scope:"row",children:n}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"create")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({checked:null===r||void 0===r?void 0:r.create,name:"create",disabled:(y(null===r||void 0===r?void 0:r.disabled,"create")||a)&&!i,onChange:function(e){return t(e,n)}},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"read")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({name:"read",onChange:function(e){return t(e,n)},disabled:y(null===r||void 0===r?void 0:r.disabled,"read")||a,checked:null===r||void 0===r?void 0:r.read},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"update")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({name:"update",onChange:function(e){return t(e,n)},disabled:y(null===r||void 0===r?void 0:r.disabled,"update")||a,checked:null===r||void 0===r?void 0:r.update},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"delete")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({name:"delete",onChange:function(e){return t(e,n)},disabled:y(null===r||void 0===r?void 0:r.disabled,"delete")||a,checked:null===r||void 0===r?void 0:r.delete},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===r||void 0===r?void 0:r.disabled,"admin")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({name:"admin",onChange:function(e){return t(e,n)},disabled:y(null===r||void 0===r?void 0:r.disabled,"admin")||a,checked:null===r||void 0===r?void 0:r.admin},k))})]})},D=function(e){var n=e.updateData,r=(e.onAclError,e.user),Z=(0,l.useState)({result:r.acl}),k=(0,s.Z)(Z,2),y=k[0],D=k[1],R=(0,l.useState)([]),M=(0,s.Z)(R,2),T=M[0],O=M[1],B=(0,l.useState)([]),L=(0,s.Z)(B,2),U=L[0],W=L[1],z={result:(0,w.K)((function(e){return e.ACL.result.find((function(e){var n;return e.appId===(null===y||void 0===y||null===(n=y.result)||void 0===n?void 0:n.appId)}))}))},P=(0,l.useState)(!1),F=(0,s.Z)(P,2),I=F[0],q=F[1],E=(0,C.D)().showSnackbar,J=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D({result:r.acl}),n=Object.keys(y.result.application),t=Object.keys(y.result.network),O(n),W(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e,n){D((function(r){return{result:(0,o.Z)((0,o.Z)({},r.result),{},{application:(0,o.Z)((0,o.Z)({},r.result.application),{},(0,t.Z)({},n,(0,o.Z)((0,o.Z)({},r.result.application[n]),{},(0,t.Z)({},e.target.name,e.target.checked))))})}}))},_=function(e,n){D((function(n){return{result:(0,o.Z)((0,o.Z)({},n.result),{},{network:(0,o.Z)((0,o.Z)({},n.result.network),{},{netStats:(0,o.Z)((0,o.Z)({},n.result.network.netStats),{},(0,t.Z)({},e.target.name,e.target.checked))})})}}))},H=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,i,s,o,l,d,u,c,p,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),t=JSON.parse(JSON.stringify(y.result.application)),i=JSON.parse(JSON.stringify(y.result.network)),e.prev=3,s=Object.fromEntries(Object.entries(t).map((function(e){return delete e[1].disabled,e}))),o=Object.fromEntries(Object.entries(i).map((function(e){return delete e[1].disabled,e}))),l={application:s,network:o},e.next=9,(0,g.eU)(r._id,r.appId,l);case 9:d=e.sent,u=d.data,n&&n(u),E("success","ACL updated successfully"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),E("error","Cannot change ACL "+(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(p=c.data)||void 0===p||null===(f=p.error)||void 0===f||null===(h=f.details[0])||void 0===h?void 0:h.message)||0),console.log(e.t0);case 19:q(!1);case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){r&&J()}),[r]),I?(0,N.jsx)(b.A,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.Z,{marginBottom:"10px",fontWeight:"bold",children:"Applications"}),(0,N.jsx)(p.Z,{component:v.Z,children:(0,N.jsxs)(d.Z,{size:"small",sx:{minWidth:650},"aria-label":"simple table",children:[(0,N.jsx)(f.Z,{children:(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(c.Z,{children:"Name"}),(0,N.jsx)(c.Z,{children:"Create"}),(0,N.jsx)(c.Z,{align:"left",children:"Read"}),(0,N.jsx)(c.Z,{align:"left",children:"Update"}),(0,N.jsx)(c.Z,{align:"left",children:"Delete"}),(0,N.jsx)(c.Z,{align:"left",children:"Admin"})]})}),(0,N.jsx)(u.Z,{children:z.result&&T.map((function(e){var n=y.result.application[e],r=z.result.application[e];return(0,N.jsx)(A,{disableAllRow:!S(r),onChange:K,name:e,row:n},e)}))})]})}),(0,N.jsx)(m.Z,{marginBottom:"10px",marginTop:"10px",fontWeight:"bold",children:"Networks"}),(0,N.jsx)(p.Z,{component:v.Z,children:(0,N.jsxs)(d.Z,{size:"small",sx:{minWidth:650},"aria-label":"simple table",children:[(0,N.jsx)(f.Z,{children:(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(c.Z,{children:"Name"}),(0,N.jsx)(c.Z,{children:"Create"}),(0,N.jsx)(c.Z,{align:"left",children:"Read"}),(0,N.jsx)(c.Z,{align:"left",children:"Update"}),(0,N.jsx)(c.Z,{align:"left",children:"Delete"}),(0,N.jsx)(c.Z,{align:"left",children:"Admin"})]})}),(0,N.jsx)(u.Z,{children:U.map((function(e){var n=y.result.network.netStats,r=z.result.network.netStats;return(0,N.jsx)(A,{disableAllRow:!S(r),onChange:_,name:e,row:n},e)}))})]})}),(0,N.jsx)(j.Z,{sx:{display:"flex",width:"100%",justifyContent:"flex-end",marginTop:"20px"},children:(0,N.jsx)(x.Z,{variant:"contained",onClick:H,children:"Update Acl"})})]})}},32037:function(e,n,r){r.d(n,{Z:function(){return a}});r(72791);var t=r(80184);function a(){return(0,t.jsx)("div",{className:"noDataImg"})}},22873:function(e,n,r){r.d(n,{Z:function(){return w}});var t=r(74165),a=r(42982),i=r(15861),s=(r(72791),r(60788)),o=r(40464),l=r(50228),d=r(13811),u=r(29823),c=r(55705),p=r(59911),f=r(11210),h=r(39709),v=r(47409),Z=r(8440),m=r(39571),x=r(17205),g=r(77248),j=r(52775),b=r(80184);function w(e){var n=e.open,r=e.setOpen,w=e.setUsers,C=e.appId,N=(0,f.K)((function(e){return e.apps})),k=((0,f.K)((function(e){return e.addAppUsers})),(0,j.D)().showSnackbar),y=(0,c.TA)({initialValues:{firstName:"",lastName:"",username:"",password:""},validate:function(e){var n={};return e.firstName||(n.firstName="Required"),e.lastName||(n.lastName="Required"),e.username||(n.username="Required"),e.password||(n.password="Required"),n},onSubmit:function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n,i){var s,o,l,d,u,c,p,f,h,Z,m;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.username,o=n.firstName,l=n.lastName,d=n.password,u=i.resetForm,(c=i.setSubmitting)(!0),p=N.find((function(e){return e._id===C})),e.prev=4,e.next=7,v.dd(s,d,o,l,null===p||void 0===p?void 0:p.appToken);case 7:f=e.sent,w((function(e){return[].concat((0,a.Z)(e),[f.data.user])})),u(),r(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),k("error","Cannot create user "+(null===(h=e.t0.response)||void 0===h||null===(Z=h.data)||void 0===Z||null===(m=Z.errors[0])||void 0===m?void 0:m.msg)||0);case 16:c(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(n,r){return e.apply(this,arguments)}}()});return 0===N.length?(0,b.jsxs)(s.Z,{open:n,onClose:function(){return r(!1)},"aria-labelledby":"responsive-dialog-title",children:[(0,b.jsx)(o.Z,{id:"responsive-dialog-title",children:"There is no apps"}),(0,b.jsx)(Z.Z,{children:(0,b.jsx)(m.Z,{children:"You should create app first please!"})}),(0,b.jsx)(g.Z,{children:(0,b.jsx)(x.Z,{disabled:y.isSubmitting,variant:"contained",autoFocus:!0,onClick:function(){return r(!1)},children:"Close"})})]}):(0,b.jsx)(s.Z,{onClose:function(){return r(!1)},open:n,children:(0,b.jsxs)(l.Z,{style:{width:"400px"},children:[(0,b.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",padding:1,m:0},children:["New User",(0,b.jsx)(d.Z,{disabled:y.isSubmitting,onClick:function(){return r(!1)},children:(0,b.jsx)(u.Z,{})})]}),(0,b.jsx)(l.Z,{sx:{width:"100%",typography:"body1",padding:1,pt:0},children:(0,b.jsxs)("form",{onSubmit:y.handleSubmit,children:[(0,b.jsxs)(l.Z,{children:[(0,b.jsx)(p.Z,{fullWidth:!0,error:!(!y.touched.firstName||!y.errors.firstName),helperText:y.touched.firstName&&y.errors.firstName?y.errors.firstName:"",margin:"dense",label:"First Name",name:"firstName",variant:"standard",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.firstName}),(0,b.jsx)(p.Z,{fullWidth:!0,error:!(!y.touched.lastName||!y.errors.lastName),helperText:y.touched.lastName&&y.errors.lastName?y.errors.lastName:"",margin:"dense",label:"Last Name",name:"lastName",variant:"standard",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.lastName}),(0,b.jsx)(p.Z,{fullWidth:!0,error:!(!y.touched.lastName||!y.errors.username),helperText:y.touched.username&&y.errors.username?y.errors.username:"",margin:"dense",label:"Username",name:"username",variant:"standard",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.username}),(0,b.jsx)(p.Z,{fullWidth:!0,error:!(!y.touched.password||!y.errors.password),helperText:y.touched.password&&y.errors.password?y.errors.password:"",margin:"dense",label:"Password",name:"password",variant:"standard",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.password})]}),(0,b.jsx)(l.Z,{style:{display:"flex",justifyContent:"center"},children:(0,b.jsx)(h.Z,{loading:y.isSubmitting,variant:"contained",style:{marginTop:"15px"},type:"submit",disabled:y.isSubmitting,children:"Create New User"})})]})})]})})}},68439:function(e,n,r){var t=r(64836);n.Z=void 0;var a=t(r(45649)),i=r(80184),s=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");n.Z=s},77248:function(e,n,r){r.d(n,{Z:function(){return Z}});var t=r(63366),a=r(87462),i=r(72791),s=r(28182),o=r(94419),l=r(60277),d=r(85513),u=r(75878),c=r(21217);function p(e){return(0,c.Z)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var f=r(80184),h=["className","disableSpacing"],v=(0,l.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(e,n){var r=e.ownerState;return[n.root,!r.disableSpacing&&n.spacing]}})((function(e){var n=e.ownerState;return(0,a.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!n.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),Z=i.forwardRef((function(e,n){var r=(0,d.Z)({props:e,name:"MuiDialogActions"}),i=r.className,l=r.disableSpacing,u=void 0!==l&&l,c=(0,t.Z)(r,h),Z=(0,a.Z)({},r,{disableSpacing:u}),m=function(e){var n=e.classes,r={root:["root",!e.disableSpacing&&"spacing"]};return(0,o.Z)(r,p,n)}(Z);return(0,f.jsx)(v,(0,a.Z)({className:(0,s.Z)(m.root,i),ownerState:Z,ref:n},c))}))},8440:function(e,n,r){r.d(n,{Z:function(){return x}});var t=r(4942),a=r(63366),i=r(87462),s=r(72791),o=r(28182),l=r(94419),d=r(60277),u=r(85513),c=r(75878),p=r(21217);function f(e){return(0,p.Z)("MuiDialogContent",e)}(0,c.Z)("MuiDialogContent",["root","dividers"]);var h=r(5186),v=r(80184),Z=["className","dividers"],m=(0,d.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(e,n){var r=e.ownerState;return[n.root,r.dividers&&n.dividers]}})((function(e){var n=e.theme,r=e.ownerState;return(0,i.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},r.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((n.vars||n).palette.divider),borderBottom:"1px solid ".concat((n.vars||n).palette.divider)}:(0,t.Z)({},".".concat(h.Z.root," + &"),{paddingTop:0}))})),x=s.forwardRef((function(e,n){var r=(0,u.Z)({props:e,name:"MuiDialogContent"}),t=r.className,s=r.dividers,d=void 0!==s&&s,c=(0,a.Z)(r,Z),p=(0,i.Z)({},r,{dividers:d}),h=function(e){var n=e.classes,r={root:["root",e.dividers&&"dividers"]};return(0,l.Z)(r,f,n)}(p);return(0,v.jsx)(m,(0,i.Z)({className:(0,o.Z)(h.root,t),ownerState:p,ref:n},c))}))},39571:function(e,n,r){r.d(n,{Z:function(){return m}});var t=r(63366),a=r(87462),i=r(72791),s=r(28182),o=r(94419),l=r(60277),d=r(85513),u=r(4565),c=r(75878),p=r(21217);function f(e){return(0,p.Z)("MuiDialogContentText",e)}(0,c.Z)("MuiDialogContentText",["root"]);var h=r(80184),v=["children","className"],Z=(0,l.ZP)(u.Z,{shouldForwardProp:function(e){return(0,l.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,n){return n.root}})({}),m=i.forwardRef((function(e,n){var r=(0,d.Z)({props:e,name:"MuiDialogContentText"}),i=r.className,l=(0,t.Z)(r,v),u=function(e){var n=e.classes,r=(0,o.Z)({root:["root"]},f,n);return(0,a.Z)({},n,r)}(l);return(0,h.jsx)(Z,(0,a.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:l,className:(0,s.Z)(u.root,i)},r,{classes:u}))}))},68840:function(e,n,r){r(72791);var t=r(81245),a=r(80184);n.Z=(0,t.Z)((0,a.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage")},19458:function(e,n,r){r(72791);var t=r(81245),a=r(80184);n.Z=(0,t.Z)((0,a.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage")},52791:function(e,n,r){var t=(0,r(23814).Z)();n.Z=t}}]);
//# sourceMappingURL=172.2d8f6570.chunk.js.map