"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[373],{23895:function(e,n,t){t.d(n,{c:function(){return l}});var s=t(74165),r=t(15861),i=t(85554),a=function(e){return e?e.replace(/([A-Z])/g,"_$1").toLowerCase():"invalid string passed"},l=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n,t,r,l,o,d){var c,u,p;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[n,t].sort().join("."),u=c.toLowerCase()+o,p=[r,l].sort().join(" and "),i.ZP.createNewRoom(c.toLowerCase()),i.ZP.setOwner(c.toLowerCase()),i.ZP.roomConfig(c.toLowerCase(),{roomName:p}),i.ZP.subsribe(u),i.ZP.presenceInRoom(u),setTimeout((function(){i.ZP.sendInvite(a(n),u.toLowerCase(),a(t))}),1e3),e.abrupt("return",{roomJid:u,roomName:p});case 10:case"end":return e.stop()}}),e)})));return function(n,t,s,r,i,a){return e.apply(this,arguments)}}()},93641:function(e,n,t){t.r(n),t.d(n,{default:function(){return de}});var s=t(72791),r=t(11210),i=t(64880),a=t(70885),l=t(20803),o=t(50228),d=t(48928),c=t.p+"static/media/def-ava.3a614f4c231447b5ae52.png",u=t(1413),p=t(60788),x=t(40464),f=t(13811),h=t(29823),m=t(55705),g=t(59911),j=t(39709),Z=t(57337),v=t(72900),y=t(88823),w=t(17205),b=t(98234),C=t.n(b),N=(t(89390),t(80184));function A(e){var n=e.open,t=e.setOpen,i=(0,r.K)((function(e){return e.user})),l=(0,r.K)((function(e){return e.setUser})),d=(0,s.useRef)(null),c=(0,s.useState)(""),m=(0,a.Z)(c,2),g=m[0],j=m[1],v=(0,s.useRef)(null),y=(0,s.useState)(),A=(0,a.Z)(y,2),k=A[0],I=A[1],P=(0,s.useState)(),O=(0,a.Z)(P,2),S=O[0],R=O[1];return(0,N.jsx)(p.Z,{onClose:function(){},open:n,children:(0,N.jsxs)(o.Z,{children:[(0,N.jsxs)(x.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Change Image",(0,N.jsx)(f.Z,{onClick:function(){j(""),t(!1)},children:(0,N.jsx)(h.Z,{})})]}),(0,N.jsx)(o.Z,{sx:{typography:"body1",padding:1},children:(0,N.jsxs)(o.Z,{style:{width:"400px"},children:[!g&&(0,N.jsxs)(o.Z,{style:{height:"200px",display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,N.jsx)("input",{type:"file",ref:d,style:{display:"none"},accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var n=new FileReader;n.addEventListener("load",(function(){var e;return j((null===(e=n.result)||void 0===e?void 0:e.toString())||"")})),n.readAsDataURL(e.target.files[0])}}}),(0,N.jsx)(w.Z,{onClick:function(){return d.current.click()},children:"Upload"})]}),!!g&&(0,N.jsxs)(o.Z,{children:[(0,N.jsx)(C(),{crop:k,onChange:function(e,n){return I(n)},onComplete:function(e){var n=document.createElement("canvas"),t=window.devicePixelRatio,s=v.current.naturalWidth/v.current.width,r=v.current.naturalHeight/v.current.height,i=n.getContext("2d");n.width=e.width*t*s,n.height=e.height*t*r,i.setTransform(t,0,0,t,0,0),i.imageSmoothingQuality="high",i.drawImage(v.current,e.x*s,e.y*r,e.width*s,e.height*r,0,0,e.width*s,e.height*r),n.toBlob((function(e){e?R(e):console.error("Canvas is empty")}),"image/jpeg",1)},minWidth:100,minHeight:100,children:(0,N.jsx)("img",{style:{width:"400px",height:"auto"},ref:v,alt:"Crop me",src:g,onLoad:function(e){var n=e.currentTarget,t=n.width,s=n.height;I(function(e,n,t){return(0,b.centerCrop)((0,b.makeAspectCrop)({unit:"%",width:90},t,e,n),e,n)}(t,s,2))}})}),(0,N.jsx)(o.Z,{style:{display:"flex"},children:(0,N.jsx)(w.Z,{onClick:function(){var e=new FormData;e.append("file",S,"profileImg"),Z.ck(e).then((function(e){l((0,u.Z)((0,u.Z)({},i),{},{profileImage:e.data.user.profileImage})),t(!1)})).catch((function(e){return console.log(e)}))},style:{marginLeft:"auto"},children:"Save"})})]})]})})]})})}function k(e){var n=e.open,t=e.setOpen,i=e.user,l=(0,s.useState)(!1),d=(0,a.Z)(l,2),w=d[0],b=d[1],C=(0,s.useState)(!1),k=(0,a.Z)(C,2),I=k[0],P=k[1],O=(0,r.K)((function(e){return e.setUser})),S=(0,m.TA)({initialValues:{firstName:i.firstName,lastName:i.lastName,description:i.description?i.description:"",isProfileOpen:i.isProfileOpen,isAssetsOpen:i.isAssetsOpen},validate:function(e){var n={};return e.firstName||(n.firstName="Required"),e.lastName||(n.lastName="Required"),n},onSubmit:function(e){var n=new FormData;n.append("firstName",e.firstName),n.append("lastName",e.lastName),e.description&&n.append("description",e.description),n.append("isProfileOpen",e.isProfileOpen),n.append("isAssetsOpen",e.isAssetsOpen),P(!0),(0,Z.Vy)().put("/users",n).then((function(e){var n=e.data.user;O((0,u.Z)((0,u.Z)({},i),{},{firstName:n.firstName,lastName:n.lastName,description:n.description,isProfileOpen:n.isProfileOpen,isAssetsOpen:n.isAssetsOpen})),t(!1)})).finally((function(){return P(!1)}))}});return(0,N.jsxs)(p.Z,{onClose:function(){},open:n,children:[(0,N.jsxs)(o.Z,{children:[(0,N.jsxs)(x.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Edit Profile",(0,N.jsx)(f.Z,{onClick:function(){return t(!1)},children:(0,N.jsx)(h.Z,{})})]}),(0,N.jsx)(o.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,N.jsxs)(o.Z,{style:{display:"flex"},children:[(0,N.jsxs)(o.Z,{sx:{marginRight:"10px"},style:{display:"flex",flexDirection:"column"},children:[(0,N.jsx)("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:i.profileImage?i.profileImage:c}),(0,N.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),b(!0)},children:"change image"})]}),(0,N.jsx)(o.Z,{children:(0,N.jsxs)("form",{style:{display:"flex",flexDirection:"column"},onSubmit:S.handleSubmit,children:[(0,N.jsx)(g.Z,{margin:"dense",label:"First Name",name:"firstName",variant:"standard",error:!(!S.touched.firstName||!S.errors.firstName),helperText:S.touched.firstName&&S.errors.firstName?S.errors.firstName:"",onChange:S.handleChange,onBlur:S.handleBlur,value:S.values.firstName}),(0,N.jsx)(g.Z,{margin:"dense",label:"Last Name",name:"lastName",variant:"standard",error:!(!S.touched.lastName||!S.errors.lastName),helperText:S.touched.lastName&&S.errors.lastName?S.errors.lastName:"",onChange:S.handleChange,onBlur:S.handleBlur,value:S.values.lastName}),(0,N.jsx)(g.Z,{margin:"dense",label:"Profile Description",name:"description",variant:"standard",onChange:S.handleChange,onBlur:S.handleBlur,value:S.values.description}),(0,N.jsx)(v.Z,{checked:S.values.isProfileOpen,name:"isProfileOpen",control:(0,N.jsx)(y.Z,{onChange:function(e){S.setFieldValue("isProfileOpen",e.target.checked)}}),label:"Is Profile Open",labelPlacement:"end"}),(0,N.jsx)(v.Z,{checked:S.values.isAssetsOpen,name:"isAssetsOpen",control:(0,N.jsx)(y.Z,{onChange:function(e){S.setFieldValue("isAssetsOpen",e.target.checked)}}),label:"Is Assets Open",labelPlacement:"end"}),(0,N.jsx)(j.Z,{type:"submit",loading:I,variant:"contained",children:"Save"})]})})]})})]}),w&&(0,N.jsx)(A,{open:w,setOpen:b})]})}var I=t(23895),P=t(85554),O=t(73763),S=t(24177),R=t(61102),D=t(52791),F=t(80925),L=function(e){var n=e.open,t=e.link,s=e.onClose;return(0,N.jsx)(p.Z,{maxWidth:!1,open:n,onClose:s,children:(0,N.jsxs)(D.Z,{sx:{padding:"20px"},children:[(0,N.jsx)(F.Z,{size:256,style:{height:"60vh",maxWidth:"100%",width:"100%"},value:t,viewBox:"0 0 256 256"}),(0,N.jsxs)(D.Z,{sx:{boxShadow:"2px 0px 5px 0px rgba(0,0,0,0.75)",borderRadius:"10px",display:"flex",justifyContent:"space-between",alignItems:"center",pl:"10px",my:"10px"},children:[(0,N.jsx)("span",{children:(0,S.aS)(t,50)}),(0,N.jsx)(w.Z,{variant:"contained",sx:{borderRadius:"10px"},onClick:function(){return navigator.clipboard.writeText(t)},children:"Copy"})]})]})})};function T(e){var n=e.profile,t=e.walletAddress,l=(0,s.useState)(!1),u=(0,a.Z)(l,2),p=u[0],x=u[1],h=(0,r.K)((function(e){return e.user})),m=(0,s.useState)(!1),g=(0,a.Z)(m,2),j=g[0],Z=g[1],v=(0,i.k6)();return n?(0,N.jsx)(o.Z,{style:{marginTop:"10px",marginRight:"10px"},children:(0,N.jsxs)(d.Z,{sx:{display:"flex",padding:"10px",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,N.jsx)(o.Z,{sx:{marginRight:"10px"},children:!!n.firstName&&(0,N.jsx)("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:n.profileImage||c})}),(0,N.jsxs)(o.Z,{children:[(0,N.jsxs)(o.Z,{sx:{fontWeight:"bold"},children:[null===n||void 0===n?void 0:n.firstName," ",null===n||void 0===n?void 0:n.lastName]}),(null===n||void 0===n?void 0:n.description)&&(0,N.jsxs)(o.Z,{children:["Description: ",null===n||void 0===n?void 0:n.description]}),(0,N.jsx)(w.Z,{onClick:function(){(0,I.c)(h.walletAddress,t,h.firstName,n.firstName,O.Ts).then((function(e){P.ZP.getRooms(),r.K.getState().setCurrentUntrackedChatRoom(e.roomJid),v.push("/chat/"+e.roomJid)})).catch((function(e){console.log("openPrivateRoom Error: ",e)}))},variant:"contained",size:"small",children:"Direct message"})]})]})}):(0,N.jsxs)(o.Z,{style:{marginTop:"10px",marginRight:"10px"},children:[(0,N.jsxs)(d.Z,{sx:{display:"flex",padding:"10px",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,N.jsx)(o.Z,{sx:{marginRight:"10px"},children:(0,N.jsx)("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:h.profileImage||c})}),(0,N.jsx)(o.Z,{children:!!h.firstName&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(o.Z,{sx:{fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[null===h||void 0===h?void 0:h.firstName," ",null===h||void 0===h?void 0:h.lastName,(0,N.jsx)(f.Z,{sx:{color:"black"},onClick:function(){return Z(!0)},children:(0,N.jsx)(R.Z,{})})]}),(null===h||void 0===h?void 0:h.description)&&(0,N.jsxs)(o.Z,{children:["Description: ",null===h||void 0===h?void 0:h.description]})]})}),h.firstName&&(0,N.jsx)(w.Z,{onClick:function(e){x(!0)},children:"Edit"})]}),p&&(0,N.jsx)(k,{open:p,setOpen:x,user:h}),(0,N.jsx)(L,{open:j,link:(0,S.nx)({firstName:h.firstName,lastName:h.lastName,walletAddress:h.walletAddress,xmppId:(0,P.$I)(h.walletAddress)+O.Ts}),onClose:function(){return Z(!1)}})]})}var K=t(74142),B=t(76132),W=t(19978),E=t(5682),U=t(73978),X=t(4346),z=t(65209),_=t(45629),q=function(e){var n=e.item,t=e.walletAddress,s=(0,K.Z)(),r=(0,i.k6)();return(0,N.jsx)(B.ZP,{children:(0,N.jsxs)(W.Z,{onClick:function(){r.push({pathname:"/provenance",state:{nftItem:n,walletAddress:t}})},children:[(0,N.jsx)(E.Z,{children:(0,N.jsx)(U.Z,{style:{backgroundColor:s.palette.primary.main},src:n.imagePreview})}),(0,N.jsx)(X.Z,{primary:n.tokenName}),(0,N.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,N.jsxs)("span",{style:{textAlign:"left",width:50},children:[n.balance,"/",n.total]})})]})},n.nftId)},H=function(e){var n=e.item,t=e.walletAddress,s=(0,K.Z)(),r=(0,i.k6)();return(0,N.jsx)(B.ZP,{children:(0,N.jsxs)(W.Z,{onClick:function(){r.push({pathname:"/provenance",state:{nftItem:n,walletAddress:t}})},children:[(0,N.jsx)(E.Z,{children:(0,N.jsx)(U.Z,{style:{backgroundColor:s.palette.primary.main},src:n.nftFileUrl})}),(0,N.jsx)(X.Z,{primary:n.tokenName}),(0,N.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[(0,N.jsx)(o.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:n.traits.map((function(e){return(0,N.jsx)(z.Z,{sx:{backgroundColor:O.Xk[e].color,marginRight:"5px"},label:e},e)}))}),(0,N.jsxs)("span",{style:{textAlign:"left",width:50},children:[n.balance,"/",n.total]})]})]})},n.nftId)};function M(e){var n=e.balance,t=e.walletAddress,s=n.filter((function(e){return"NFT"===e.tokenType})),r=(0,S.Ev)(n);return(0,N.jsxs)(_.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:[s.map((function(e,n){return(0,N.jsx)(q,{walletAddress:t,item:e},e.nftId)})),r.map((function(e,n){return(0,N.jsx)(H,{walletAddress:t,item:e},e.nftId+n)}))]})}var V=t(79299),G=t(4565),J=t(91482),Q=function(e){var n,t=e.item,s=e.walletAddress,r=(0,K.Z)(),a=(0,i.k6)();return(0,N.jsx)(B.ZP,{children:(0,N.jsxs)(W.Z,{onClick:function(){a.push({pathname:"/provenance",state:{nftItem:t,walletAddress:s}})},children:[(0,N.jsx)(E.Z,{children:(0,N.jsx)(U.Z,{style:{backgroundColor:r.palette.primary.main},src:(null===t||void 0===t||null===(n=t.file)||void 0===n?void 0:n.locationPreview)||(null===t||void 0===t?void 0:t.location)})}),(0,N.jsx)(X.Z,{primary:t.documentName,secondary:(0,J.Z)(new Date(t.createdAt),"pp PP")}),(0,N.jsx)(D.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,N.jsx)(f.Z,{sx:{color:"black"},children:(0,N.jsx)(R.Z,{})})})]})},t._id)};function Y(e){var n=e.documents,t=e.walletAddress;return(0,N.jsx)(_.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:n.map((function(e){return(0,N.jsx)(Q,{walletAddress:t,item:e},e._id)}))})}var $=t(11302),ee=t(72426),ne=t(94586),te=(0,ee.ZF)({apiKey:"AIzaSyDQdkvvxKKx4-WrjLQoYf08GFARgi_qO4g",authDomain:"ethora-668e9.firebaseapp.com",projectId:"ethora-668e9",storageBucket:"ethora-668e9.appspot.com",messagingSenderId:"972933470054",appId:"1:972933470054:web:d4682e76ef02fd9b9cdaa7",measurementId:"G-WHM7XRZ4C8"});function se(){var e=(0,ne.KL)(te);return(0,ne.LP)(e,{vapidKey:"BCzcT7yzF8F188maOgPAISXqWCTDavGzWW0SWLOBx9vX2mYFjBXMaTMBDR3HXlmXOduyE253sblF9HP6aEBbx38"})}function re(){var e=(0,s.useState)(!1),n=(0,a.Z)(e,2),t=n[0],i=n[1],d=(0,s.useState)(),c=(0,a.Z)(d,2),u=c[0],p=c[1],x=(0,r.K)((function(e){return e.user})),f=(0,r.K)((function(e){return e.balance})),h=(0,r.K)((function(e){return e.documents}));return(0,s.useEffect)((function(){if(console.log("MyProfile init"),i(!0),(0,Z.f1)(x.walletAddress).then((function(e){p(e.data)})).finally((function(){return i(!1)})),"denied"===Notification.permission)alert("Please enable notifications for this app in your browser");else{if("granted"===Notification.permission)return console.log("geting token"),void se().then((function(e){console.log("my fb token ",e)}));Notification.requestPermission().then((function(e){if("granted"===e)return console.log("geting token"),void se().then((function(e){console.log("my fb token ",e)}))}))}}),[]),t?(0,N.jsx)($.A,{}):(0,N.jsxs)(l.Z,{maxWidth:"xl",style:{height:"calc(100vh - 80px)"},children:[(0,N.jsx)(o.Z,{sx:{margin:"auto",width:"200px"},children:(0,N.jsx)(T,{})}),(0,N.jsx)(G.Z,{variant:"h6",style:{margin:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,N.jsx)("span",{children:"Items"})}),(0,N.jsx)(M,{balance:f.filter(S.LK),walletAddress:x.walletAddress}),!!h.length&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(G.Z,{variant:"h6",style:{margin:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,N.jsx)("span",{children:"Documents"})}),(0,N.jsx)(Y,{walletAddress:x.walletAddress,documents:h})]}),!!u&&(0,N.jsxs)(o.Z,{children:[(0,N.jsx)(G.Z,{variant:"h6",style:{margin:"16px"},children:"Transactions"}),(0,N.jsx)(V.P,{transactions:u.items})]})]})}var ie=t(74165),ae=t(37762),le=t(15861);function oe(e){var n=(0,s.useState)(!0),t=(0,a.Z)(n,2),r=t[0],i=t[1],d=(0,s.useState)(),c=(0,a.Z)(d,2),u=c[0],p=c[1],x=(0,s.useState)(),f=(0,a.Z)(x,2),h=f[0],m=f[1],g=(0,s.useState)([]),j=(0,a.Z)(g,2),v=j[0],y=j[1],w=(0,s.useState)([]),b=(0,a.Z)(w,2),C=b[0],A=b[1],k=function(){var e=(0,le.Z)((0,ie.Z)().mark((function e(n){var t,s,r,i;return(0,ie.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],s=(0,ae.Z)(n);try{for(s.s();!(r=s.n()).done;){i=r.value;try{i.location=i.locations[0],t.push(i)}catch(a){console.log(i.files[0],"sdjfkls")}}}catch(l){s.e(l)}finally{s.f()}A(t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){i(!0),(0,Z.k2)(e.walletAddress).then((function(e){p(e.data),y(e.data.balances.balance),k(e.data.documents)})),i(!1),(0,Z.f1)(e.walletAddress).then((function(e){m(e.data)}))}),[]),r?(0,N.jsx)($.A,{}):(0,N.jsxs)(l.Z,{maxWidth:"xl",style:{height:"calc(100vh - 80px)"},children:[(0,N.jsxs)(o.Z,{children:[!(null===u||void 0===u||!u.firstName)&&(0,N.jsx)(o.Z,{sx:{width:"200px",margin:"auto",padding:"10px"},children:(0,N.jsx)(T,{profile:u,walletAddress:e.walletAddress})}),!!v.filter(S.LK).length&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(G.Z,{variant:"h6",style:{margin:"16px"},children:"Items"}),(0,N.jsx)(M,{balance:v.filter(S.LK),walletAddress:e.walletAddress})]})]}),!!C.length&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(G.Z,{variant:"h6",style:{margin:"16px"},children:"Documents"}),(0,N.jsx)(Y,{walletAddress:e.walletAddress,documents:C})]}),!!h&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(G.Z,{variant:"h6",style:{margin:"16px"},children:"Transactions"}),(0,N.jsx)(V.P,{transactions:h.items})]})]})}function de(){var e=(0,r.K)((function(e){return e.user})),n=(0,i.UO)();return e.walletAddress===n.wallet?(0,N.jsx)(re,{}):(0,N.jsx)(oe,{walletAddress:n.wallet})}}}]);
//# sourceMappingURL=373.0f6b60c3.chunk.js.map