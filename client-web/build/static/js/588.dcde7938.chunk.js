"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[588],{77588:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(72791),i=t(20803),o=t(70885),l=t(50228),s=t(73978),a=t(4565),d=t(13811),c=t(91803),u=t(59911),f=t(17205),h=t(64880),m=t(11210),p=t(85554),x=t(41286),j=t(80184);function b(){var e=(0,h.UO)().roomJID,n=(0,r.useState)(""),t=(0,o.Z)(n,2),b=t[0],g=t[1],v=(0,r.useState)(!1),y=(0,o.Z)(v,2),w=y[0],C=y[1],I=(0,m.K)((function(e){return e.userChatRooms})).filter((function(n){return n.jid===e}))[0];return(0,j.jsxs)(i.Z,{style:{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,j.jsx)(l.Z,{sx:{width:300,height:300,margin:5,backgroundColor:"primary.dark",justifyContent:"center",alignItems:"center",display:"flex"},children:null!==I&&void 0!==I&&I.room_thumbnail&&"none"!==(null===I||void 0===I?void 0:I.room_thumbnail)?(0,j.jsx)(s.Z,{sx:{width:300,height:300},variant:"square",src:I.room_thumbnail}):(0,j.jsx)(a.Z,{color:"white",fontSize:"120px",children:null===I||void 0===I?void 0:I.name[0]})}),(0,j.jsx)(a.Z,{fontSize:"20px",fontWeight:"bold",children:null===I||void 0===I?void 0:I.name}),(0,j.jsxs)(i.Z,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center",display:"flex"},children:[(0,j.jsx)(a.Z,{fontSize:"20px",children:null!==I&&void 0!==I&&I.description?I.description:"No description set"}),(0,j.jsx)(d.Z,{onClick:function(){return C(!0)},style:{marginLeft:10},children:(0,j.jsx)(x.Z,{fontSize:"small"})})]}),(0,j.jsx)(c.Z,{open:w,onClose:C,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,j.jsxs)(l.Z,{sx:Z,children:[(0,j.jsx)(a.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Set new description"}),(0,j.jsx)(u.Z,{onChange:function(e){return g(e.target.value)},margin:"normal",id:"outlined-basic",label:"Description",variant:"outlined"}),(0,j.jsx)(f.Z,{onClick:function(){C(!1),function(n){p.ZP.changeRoomDescription(e,n)}(b)},style:{justifyContent:"center",alignItems:"center",display:"flex"},variant:"outlined",children:(0,j.jsx)(a.Z,{id:"modal-modal-description",children:"Submit"})})]})})]})}var Z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,justifyContent:"center",flex:"display"},g=t(70324),v=t(45629),y=t(76132),w=t(16992),C=t(52898);function I(){var e=(0,h.UO)().roomJID,n=(0,m.K)((function(e){return e.userChatRooms})),t=(0,m.K)((function(e){return e.roomMemberInfo.filter((function(e){return"none"!==e.name}))})),i=(0,m.K)((function(e){return e.user})),c=n.filter((function(n){return n.jid===e}))[0],u=(0,m.K)((function(e){return e.roomRoles})),f=(0,r.useState)(!1),x=(0,o.Z)(f,2),b=x[0],Z=x[1],I=(0,r.useState)(),k=(0,o.Z)(I,2),S=k[0],P=k[1],z=(0,r.useState)(null),D=(0,o.Z)(z,2),M=D[0],R=D[1],_=(0,r.useState)(!1),L=(0,o.Z)(_,2),U=(L[0],L[1]),A=(0,h.k6)();console.log(t),(0,r.useEffect)((function(){t.map((function(e){(e.jid.includes((0,p.$I)(i.walletAddress))&&"owner"===e.role||"moderator"===e.role)&&U(!0)}))}),[]);var E=function(e){e.stopPropagation(),R(null),Z(!1)},K=function(e){return console.log(e,":asdadasd"),(0,j.jsx)(g.Z,{onClick:function(n){return function(e,n){console.log(e,"ban member"),"clear"===e.ban_status?p.ZP.banUserStanza(e.jid,c.jid):p.ZP.unbanUserStanza(e.jid,c.jid),p.ZP.getRoomMemberInfo(c.jid),E(n)}(e,n)},children:"clear"===(null===e||void 0===e?void 0:e.ban_status)?"Ban":"Unban"})},$=function(e){var n=u.find((function(e){return e.roomJID===c.jid})).role;return e.jid.includes((0,p.$I)(i.walletAddress))?null:"moderator"===n||"owner"===n?(0,j.jsx)(d.Z,{"aria-label":"more",id:"long-button","aria-haspopup":"true",onClick:function(n){n.stopPropagation(),P(e),R(n.currentTarget),Z(!0)},children:(0,j.jsx)(C.Z,{})}):void 0};return(0,j.jsxs)(l.Z,{children:[(0,j.jsxs)(a.Z,{variant:"h5",children:["Members (",t.length,")"]}),(0,j.jsx)(v.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:t.map((function(e){return(0,j.jsxs)(y.ZP,{dense:!0,onClick:function(){return function(e){e.jid.includes((0,p.$I)(i.walletAddress))?A.push("/profile/"+i.walletAddress):A.push("/profile/"+(0,p.$2)(e.jid.split("@")[0]))}(e)},style:{flexDirection:"row",alignItems:"center"},children:[(0,j.jsx)(l.Z,{alignItems:"center",justifyContent:"center",style:{background:"#003E9C",width:"40px",height:"40px",margin:5,display:"flex"},children:"none"!==e.profile?(0,j.jsx)(s.Z,{style:{width:"40px",height:"40px"},variant:"square",src:e.profile}):(0,j.jsx)(a.Z,{style:{color:"white"},children:e.name?e.name[0]:null})}),(0,j.jsx)(a.Z,{children:e.jid.includes((0,p.$I)(i.walletAddress))?"You":e.name}),$(e),"owner"===e.role?(0,j.jsx)(l.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,j.jsx)(a.Z,{children:e.role})}):null,"clear"!==e.ban_status?(0,j.jsx)(l.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,j.jsx)(a.Z,{children:"banned"})}):null,(0,j.jsx)(w.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:M,open:b,onClose:E,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:K(S)})]})}))})]})}function k(){var e=(0,h.UO)().roomJID;return(0,r.useEffect)((function(){p.ZP.getRoomMemberInfo(e),p.ZP.getRoomInfo(e)}),[]),(0,j.jsxs)(i.Z,{maxWidth:"xl",children:[(0,j.jsx)(b,{}),(0,j.jsx)(I,{})]})}},41286:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),o=t(80184),l=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=l},52898:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),o=t(80184),l=(0,i.default)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");n.Z=l}}]);
//# sourceMappingURL=588.dcde7938.chunk.js.map