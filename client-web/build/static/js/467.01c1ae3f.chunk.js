(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[467],{68092:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return le}});var r=n(72791),i=n(16090),a=n(79271),o=n(70885),s=n(57020),l=n(96580),d=n(50228),c=n(87462),h=n(63366),u=n(28182),p=n(94419),g=n(60277),f=n(85513),x=n(56650),m=n(21217);function w(e){return(0,m.Z)("MuiCard",e)}(0,n(75878).Z)("MuiCard",["root"]);var v=n(80184),y=["className","raised"],C=(0,g.ZP)(x.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),j=r.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiCard"}),r=n.className,i=n.raised,a=void 0!==i&&i,o=(0,h.Z)(n,y),s=(0,c.Z)({},n,{raised:a}),l=function(e){var t=e.classes;return(0,p.Z)({root:["root"]},w,t)}(s);return(0,v.jsx)(C,(0,c.Z)({className:(0,u.Z)(l.root,r),elevation:a?8:void 0,ref:t,ownerState:s},o))})),Z=n.p+"static/media/def-ava.3a614f4c231447b5ae52.png",b=n(1413),D=n(60788),k=n(40464),N=n(13811),R=n(29823),S=n(55705),A=n(59911),P=n(39709),O=n(57337),I=n(72900),_=n(88823),M=n(17205),B=n(98234),E=n.n(B);function K(e){var t=e.open,n=e.setOpen,a=(0,i.K)((function(e){return e.user})),s=(0,i.K)((function(e){return e.setUser})),l=(0,r.useRef)(null),c=(0,r.useState)(""),h=(0,o.Z)(c,2),u=h[0],p=h[1],g=(0,r.useRef)(null),f=(0,r.useState)(),x=(0,o.Z)(f,2),m=x[0],w=x[1],y=(0,r.useState)(),C=(0,o.Z)(y,2),j=C[0],Z=C[1];return(0,v.jsx)(D.Z,{onClose:function(){},open:t,children:(0,v.jsxs)(d.Z,{children:[(0,v.jsxs)(k.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Change Image",(0,v.jsx)(N.Z,{onClick:function(){p(""),n(!1)},children:(0,v.jsx)(R.Z,{})})]}),(0,v.jsx)(d.Z,{sx:{typography:"body1",padding:1},children:(0,v.jsxs)(d.Z,{style:{width:"400px"},children:[!u&&(0,v.jsxs)(d.Z,{style:{height:"200px",display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,v.jsx)("input",{type:"file",ref:l,style:{display:"none"},accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){var e;return p((null===(e=t.result)||void 0===e?void 0:e.toString())||"")})),t.readAsDataURL(e.target.files[0])}}}),(0,v.jsx)(M.Z,{onClick:function(){return l.current.click()},children:"Upload"})]}),!!u&&(0,v.jsxs)(d.Z,{children:[(0,v.jsx)(E(),{crop:m,onChange:function(e,t){return w(t)},onComplete:function(e){var t=document.createElement("canvas"),n=window.devicePixelRatio,r=g.current.naturalWidth/g.current.width,i=g.current.naturalHeight/g.current.height,a=t.getContext("2d");t.width=e.width*n*r,t.height=e.height*n*i,a.setTransform(n,0,0,n,0,0),a.imageSmoothingQuality="high",a.drawImage(g.current,e.x*r,e.y*i,e.width*r,e.height*i,0,0,e.width*r,e.height*i),t.toBlob((function(e){e?Z(e):console.error("Canvas is empty")}),"image/jpeg",1)},minWidth:100,minHeight:100,children:(0,v.jsx)("img",{style:{width:"400px",height:"auto"},ref:g,alt:"Crop me",src:u,onLoad:function(e){var t=e.currentTarget,n=t.width,r=t.height;w(function(e,t,n){return(0,B.centerCrop)((0,B.makeAspectCrop)({unit:"%",width:90},n,e,t),e,t)}(n,r,2))}})}),(0,v.jsx)(d.Z,{style:{display:"flex"},children:(0,v.jsx)(M.Z,{onClick:function(){var e=new FormData;e.append("file",j,"profileImg"),O.ck(e).then((function(e){s((0,b.Z)((0,b.Z)({},a),{},{profileImage:e.data.user.profileImage})),n(!1)})).catch((function(e){return console.log(e)}))},style:{marginLeft:"auto"},children:"Save"})})]})]})})]})})}function T(e){var t=e.open,n=e.setOpen,a=e.user,s=(0,r.useState)(!1),l=(0,o.Z)(s,2),c=l[0],h=l[1],u=(0,r.useState)(!1),p=(0,o.Z)(u,2),g=p[0],f=p[1],x=(0,i.K)((function(e){return e.setUser})),m=(0,S.TA)({initialValues:{firstName:a.firstName,lastName:a.lastName,description:a.description?a.description:"",isProfileOpen:a.isProfileOpen,isAssetsOpen:a.isAssetsOpen},validate:function(e){var t={};return e.firstName||(t.firstName="Required"),e.lastName||(t.lastName="Required"),t},onSubmit:function(e){var t=new FormData;t.append("firstName",e.firstName),t.append("lastName",e.lastName),e.description&&t.append("description",e.description),t.append("isProfileOpen",e.isProfileOpen),t.append("isAssetsOpen",e.isAssetsOpen),f(!0),(0,O.Vy)().put("/users",t).then((function(e){var t=e.data.user;x((0,b.Z)((0,b.Z)({},a),{},{firstName:t.firstName,lastName:t.lastName,description:t.description,isProfileOpen:t.isProfileOpen,isAssetsOpen:t.isAssetsOpen})),n(!1)})).finally((function(){return f(!1)}))}});return(0,v.jsxs)(D.Z,{onClose:function(){},open:t,children:[(0,v.jsxs)(d.Z,{children:[(0,v.jsxs)(k.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Edit Profile",(0,v.jsx)(N.Z,{onClick:function(){return n(!1)},children:(0,v.jsx)(R.Z,{})})]}),(0,v.jsx)(d.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,v.jsxs)(d.Z,{style:{display:"flex"},children:[(0,v.jsxs)(d.Z,{sx:{marginRight:"10px"},style:{display:"flex",flexDirection:"column"},children:[(0,v.jsx)("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:a.profileImage?a.profileImage:Z}),(0,v.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),h(!0)},children:"change image"})]}),(0,v.jsx)(d.Z,{children:(0,v.jsxs)("form",{style:{display:"flex",flexDirection:"column"},onSubmit:m.handleSubmit,children:[(0,v.jsx)(A.Z,{margin:"dense",label:"First Name",name:"firstName",variant:"standard",error:!(!m.touched.firstName||!m.errors.firstName),helperText:m.touched.firstName&&m.errors.firstName?m.errors.firstName:"",onChange:m.handleChange,onBlur:m.handleBlur,value:m.values.firstName}),(0,v.jsx)(A.Z,{margin:"dense",label:"Last Name",name:"lastName",variant:"standard",error:!(!m.touched.lastName||!m.errors.lastName),helperText:m.touched.lastName&&m.errors.lastName?m.errors.lastName:"",onChange:m.handleChange,onBlur:m.handleBlur,value:m.values.lastName}),(0,v.jsx)(A.Z,{margin:"dense",label:"Profile Description",name:"description",variant:"standard",onChange:m.handleChange,onBlur:m.handleBlur,value:m.values.description}),(0,v.jsx)(I.Z,{checked:m.values.isProfileOpen,name:"isProfileOpen",control:(0,v.jsx)(_.Z,{onChange:function(e){m.setFieldValue("isProfileOpen",e.target.checked)}}),label:"Is Profile Open",labelPlacement:"end"}),(0,v.jsx)(I.Z,{checked:m.values.isAssetsOpen,name:"isAssetsOpen",control:(0,v.jsx)(_.Z,{onChange:function(e){m.setFieldValue("isAssetsOpen",e.target.checked)}}),label:"Is Assets Open",labelPlacement:"end"}),(0,v.jsx)(P.Z,{type:"submit",loading:g,variant:"contained",children:"Save"})]})})]})})]}),c&&(0,v.jsx)(K,{open:c,setOpen:h})]})}function H(e){var t=e.profile,n=r.useState(!1),a=(0,o.Z)(n,2),s=a[0],l=a[1],c=(0,i.K)((function(e){return e.user}));return t?(0,v.jsx)(d.Z,{style:{marginTop:"10px",marginRight:"10px"},children:(0,v.jsxs)(j,{sx:{display:"flex",padding:"10px",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,v.jsx)(d.Z,{sx:{marginRight:"10px"},children:!!t.firstName&&(0,v.jsx)("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:t.profileImage||Z})}),(0,v.jsxs)(d.Z,{children:[(0,v.jsxs)(d.Z,{sx:{fontWeight:"bold"},children:[null===t||void 0===t?void 0:t.firstName," ",null===t||void 0===t?void 0:t.lastName]}),(null===t||void 0===t?void 0:t.description)&&(0,v.jsxs)(d.Z,{children:["Description: ",null===t||void 0===t?void 0:t.description]})]})]})}):(0,v.jsxs)(d.Z,{style:{marginTop:"10px",marginRight:"10px"},children:[(0,v.jsxs)(j,{sx:{display:"flex",padding:"10px",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,v.jsx)(d.Z,{sx:{marginRight:"10px"},children:(0,v.jsx)("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:c.profileImage||Z})}),(0,v.jsx)(d.Z,{children:!!c.firstName&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(d.Z,{sx:{fontWeight:"bold"},children:[null===c||void 0===c?void 0:c.firstName," ",null===c||void 0===c?void 0:c.lastName]}),(null===c||void 0===c?void 0:c.description)&&(0,v.jsxs)(d.Z,{children:["Description: ",null===c||void 0===c?void 0:c.description]})]})}),c.firstName&&(0,v.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),l(!0)},children:"Edit"})]}),s&&(0,v.jsx)(T,{open:s,setOpen:l,user:c})]})}var Y=n(74165),X=n(15861),L=n(21680),U=n(19773),F=n(24390),W=n(69963),z=n(9827),V=n(60807),q=n(4565),Q=n(63818),G=n(68439),J=n(52791),$=n(81898),ee=n(79365);function te(e){var t=e.open,n=e.setOpen,i=(0,r.useState)(!1),a=(0,o.Z)(i,2),s=a[0],l=a[1],c=(0,S.TA)({initialValues:{transferAmount:"",to:""},validate:function(e){var t={};return e.to||(t.to="Required"),t},onSubmit:function(e){l(!0),(0,O.Vy)().post("tokens/transfer/items",{nftId:"",receiverWallet:"",amount:""}).finally((function(){return l(!1)}))}});return(0,v.jsx)(D.Z,{onClose:function(){},open:t,children:(0,v.jsxs)(d.Z,{style:{width:"400px"},children:[(0,v.jsxs)(k.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Transfer Item",(0,v.jsx)(N.Z,{onClick:function(){return n(!1)},children:(0,v.jsx)(R.Z,{})})]}),(0,v.jsx)(d.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,v.jsxs)("form",{onSubmit:c.handleSubmit,children:[(0,v.jsxs)($.Z,{fullWidth:!0,children:[(0,v.jsx)(ee.Z,{variant:"standard",htmlFor:"uncontrolled-native",children:"Transfer Amount"}),(0,v.jsx)(Q.Z,{inputProps:{name:"transferAmount",id:"uncontrolled-native"},onChange:function(e){c.setFieldValue("transferAmount",e.target.value)},children:(0,v.jsx)("option",{value:1,children:"1"},1)})]}),(0,v.jsx)(A.Z,{fullWidth:!0,error:!(!c.touched.to||!c.errors.to),helperText:c.touched.to&&c.errors.to?c.errors.to:"",margin:"dense",label:"Recipient Wallet Address",name:"to",variant:"standard",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.to}),(0,v.jsx)(d.Z,{style:{display:"flex",justifyContent:"flex-end"},children:(0,v.jsx)(P.Z,{type:"submit",variant:"contained",loading:s,children:"Send"})})]})})]})})}function ne(){var e=(0,r.useState)(!1),t=(0,o.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(null),l=(0,o.Z)(s,2),d=l[0],c=l[1],h=(0,r.useState)(null),u=(0,o.Z)(h,2),p=u[0],g=u[1],f=(0,r.useRef)(null),x=(0,r.useState)(""),m=(0,o.Z)(x,2),w=m[0],y=m[1],C=(0,r.useState)(!1),j=(0,o.Z)(C,2),Z=j[0],b=j[1],I=(0,r.useState)(!1),_=(0,o.Z)(I,2),B=_[0],E=_[1],K=(0,i.K)((function(e){return e.balance.filter((function(e){return"NFT"===e.tokenType}))})),T=(0,i.K)((function(e){return e.user})),H=(0,i.K)((function(e){return e.setBalance})),ne=(0,S.TA)({initialValues:{tokenName:"",rarity:"1"},validate:function(e){var t={};return e.tokenName||(t.tokenName="Required"),t},onSubmit:function(){var e=(0,X.Z)((0,Y.Z)().mark((function e(t){var n;return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=3;break}return y("required"),e.abrupt("return");case 3:(n=new FormData).append("files",p),E(!0),O.cT(n).then(function(){var e=(0,X.Z)((0,Y.Z)().mark((function e(n){var r;return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O._U(t.tokenName,n.data.results[0]._id,t.rarity);case 2:return e.next=4,O.sb(T.walletAddress);case 4:r=e.sent,H(r.data.balance),re();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){return E(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),re=function(){ne.resetForm(),c(null),g(null),a(!1),y("")};return(0,v.jsxs)(W.Z,{style:{flex:1,marginTop:"10px"},children:[(0,v.jsxs)(J.Z,{style:{display:"flex",alignItems:"center"},children:[(0,v.jsx)(q.Z,{variant:"h6",style:{margin:"16px"},children:"Items"}),(0,v.jsx)(N.Z,{onClick:function(){a(!0)},size:"large",color:"success",children:(0,v.jsx)(G.Z,{fontSize:"large"})})]}),(0,v.jsxs)(L.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,v.jsx)(z.Z,{children:(0,v.jsxs)(V.Z,{children:[(0,v.jsx)(F.Z,{align:"center",width:200,children:"Image"}),(0,v.jsx)(F.Z,{align:"center",children:"Name"}),(0,v.jsx)(F.Z,{align:"center",children:"Balance"}),(0,v.jsx)(F.Z,{align:"center",children:"Total"}),(0,v.jsx)(F.Z,{align:"center",children:"Actions"})]})}),(0,v.jsx)(U.Z,{children:K.map((function(e){return(0,v.jsxs)(V.Z,{children:[(0,v.jsx)(F.Z,{style:{width:"200px"},align:"center",children:(0,v.jsx)("img",{alt:"",src:e.imagePreview,style:{width:100,borderRadius:5}})}),(0,v.jsx)(F.Z,{align:"center",children:e.tokenName}),(0,v.jsx)(F.Z,{align:"center",children:e.balance}),(0,v.jsx)(F.Z,{align:"center",children:e.total}),(0,v.jsx)(F.Z,{align:"center",children:(0,v.jsx)(M.Z,{onClick:function(){b(!0)},children:"Transfer"})})]},e.contractAddress)}))})]}),(0,v.jsx)(D.Z,{onClose:function(){},maxWidth:!1,open:n,children:(0,v.jsxs)(J.Z,{style:{width:"400px"},children:[(0,v.jsxs)(k.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Create new Item Token",(0,v.jsx)(N.Z,{onClick:re,children:(0,v.jsx)(R.Z,{})})]}),(0,v.jsxs)(J.Z,{sx:{width:"100%",typography:"body1",padding:1,display:"flex"},children:[(0,v.jsx)(J.Z,{style:{flex:"1",padding:"5px",marginBottom:"10px"},children:(0,v.jsxs)(J.Z,{style:{padding:"10px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"end",border:"1px solid gray",borderRadius:"10px",height:"100%",backgroundImage:d?"url(".concat(d,")"):"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[(0,v.jsx)("input",{onChange:function(e){var t=e.target;if(t.files){var n=new FileReader;n.onload=function(e){var t;e&&(null!==(t=e.target)&&void 0!==t&&t.result&&c(e.target.result))},y(""),g(t.files[0]),n.readAsDataURL(t.files[0])}},ref:f,type:"file",accept:"image/*",style:{display:"none"}}),(0,v.jsx)(M.Z,{color:"secondary",variant:"contained",onClick:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.click()},children:"upload image"}),w?(0,v.jsx)(J.Z,{style:{color:"red"},children:"File is required"}):null]})}),(0,v.jsxs)("form",{style:{flex:"1"},onSubmit:ne.handleSubmit,children:[(0,v.jsx)(A.Z,{margin:"dense",inputProps:{autoComplete:"off"},label:"Token Name",name:"tokenName",type:"text",fullWidth:!0,variant:"standard",onChange:function(e){console.log("onChange ",e),ne.handleChange(e)},onBlur:ne.handleBlur,error:ne.touched.tokenName&&Boolean(ne.errors.tokenName),helperText:ne.touched.tokenName&&ne.errors.tokenName?ne.errors.tokenName:""}),(0,v.jsxs)($.Z,{fullWidth:!0,children:[(0,v.jsx)(ee.Z,{variant:"standard",htmlFor:"uncontrolled-native",children:"Rarity"}),(0,v.jsxs)(Q.Z,{inputProps:{name:"rarity",id:"uncontrolled-native"},onChange:function(e){console.log(e),ne.handleChange(e)},children:[(0,v.jsx)("option",{value:1,children:"1"}),(0,v.jsx)("option",{value:2,children:"2"}),(0,v.jsx)("option",{value:3,children:"3"})]})]}),(0,v.jsx)(J.Z,{sx:{margin:2,display:"flex",justifyContent:"center"},children:(0,v.jsx)(P.Z,{loading:B,type:"submit",variant:"contained",children:"Create"})})]})]})]})}),(0,v.jsx)(te,{open:Z,setOpen:b})]})}var re=n(50873);function ie(){var e=(0,r.useState)(!1),t=(0,o.Z)(e,2),n=t[0],a=t[1],c=(0,r.useState)(),h=(0,o.Z)(c,2),u=h[0],p=h[1],g=(0,i.K)((function(e){return e.user}));return(0,r.useEffect)((function(){a(!0),(0,O.f1)(g.walletAddress).then((function(e){p(e.data)})).finally((function(){return a(!1)}))}),[]),(0,v.jsxs)(s.Z,{maxWidth:"xl",style:{height:"calc(100vh - 80px)"},children:[n&&(0,v.jsx)(d.Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:0,left:0,bottom:0,right:0},children:(0,v.jsx)(l.Z,{})}),(0,v.jsx)(d.Z,{sx:{margin:"auto",width:"200px"},children:(0,v.jsx)(H,{})}),(0,v.jsx)(ne,{}),!!u&&(0,v.jsxs)(d.Z,{children:[(0,v.jsx)(q.Z,{variant:"h6",style:{margin:"16px"},children:"Transactions"}),(0,v.jsx)(re.P,{transactions:u.items})]})]})}function ae(e){var t=r.useState([]),n=(0,o.Z)(t,2),i=n[0],a=n[1];return r.useEffect((function(){e.walletAddress&&O.k2(e.walletAddress).then((function(e){console.log("getPublicProvile ",e),a(e.data.balances.balance.filter((function(e){return"NFT"===e.tokenType})))}))}),[e.walletAddress]),i.length?(0,v.jsxs)(W.Z,{style:{flex:1,marginTop:"10px"},children:[(0,v.jsx)(J.Z,{style:{display:"flex",alignItems:"center"},children:(0,v.jsx)(q.Z,{variant:"h6",style:{margin:"16px"},children:"Items"})}),(0,v.jsxs)(L.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,v.jsx)(z.Z,{children:(0,v.jsxs)(V.Z,{children:[(0,v.jsx)(F.Z,{align:"center",width:200,children:"Image"}),(0,v.jsx)(F.Z,{align:"center",children:"Name"}),(0,v.jsx)(F.Z,{align:"center",children:"Balance"}),(0,v.jsx)(F.Z,{align:"center",children:"Total"})]})}),(0,v.jsx)(U.Z,{children:i.map((function(e){return(0,v.jsxs)(V.Z,{children:[(0,v.jsx)(F.Z,{style:{width:"200"},children:(0,v.jsx)("img",{alt:"",src:e.imagePreview})}),(0,v.jsx)(F.Z,{align:"center",children:e.tokenName}),(0,v.jsx)(F.Z,{align:"center",children:e.balance}),(0,v.jsx)(F.Z,{align:"center",children:e.total})]},e.contractAddress)}))})]})]}):null}var oe=n(11302);function se(e){var t=(0,r.useState)(!0),n=(0,o.Z)(t,2),i=n[0],a=n[1],l=(0,r.useState)(),c=(0,o.Z)(l,2),h=c[0],u=c[1],p=(0,r.useState)(),g=(0,o.Z)(p,2),f=g[0],x=g[1],m=(0,r.useState)(),w=(0,o.Z)(m,2),y=(w[0],w[1]);return(0,r.useEffect)((function(){a(!0),(0,O.k2)(e.walletAddress).then((function(e){console.log("getPublicProfile ",e.data),u(e.data)})),a(!1),(0,O.f1)(e.walletAddress).then((function(e){x(e.data),console.log("balance ",e.data)})),(0,O.sb)(e.walletAddress).then((function(e){y(e.data)}))}),[]),i?(0,v.jsx)(oe.A,{}):(0,v.jsxs)(s.Z,{maxWidth:"xl",style:{height:"calc(100vh - 80px)"},children:[(0,v.jsxs)(d.Z,{children:[!!h&&(0,v.jsx)(d.Z,{sx:{width:"200px",margin:"auto",padding:"10px"},children:(0,v.jsx)(H,{profile:h})}),(0,v.jsx)(ae,{walletAddress:e.walletAddress})]}),!!f&&(0,v.jsx)(re.P,{transactions:f.items})]})}function le(){var e=(0,i.K)((function(e){return e.user})),t=(0,a.UO)();return e.walletAddress===t.wallet?(0,v.jsx)(ie,{}):(0,v.jsx)(se,{walletAddress:t.wallet})}},98234:function(e,t,n){var r,i=n(56690).default,a=n(89728).default,o=n(66115).default,s=n(61655).default,l=n(26389).default,d=n(42122).default;e.exports=(r=n(72791),function(){"use strict";var e={899:function(e){e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return function(){n.r(c),n.d(c,{Component:function(){return C},areCropsEqual:function(){return p},centerCrop:function(){return f},clamp:function(){return u},containCrop:function(){return w},convertToPercentCrop:function(){return x},convertToPixelCrop:function(){return m},default:function(){return C},defaultCrop:function(){return h},makeAspectCrop:function(){return g},nudgeCrop:function(){return v}});var e=n(899),t=n.n(e);function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}var h={x:0,y:0,width:0,height:0,unit:"px"};function u(e,t,n){return Math.min(Math.max(e,t),n)}function p(e,t){return e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit}function g(e,t,n,r){var i=m(e,n,r);return e.width&&(i.height=i.width/t),e.height&&(i.width=i.height*t),i.y+i.height>r&&(i.height=r-i.y,i.width=i.height*t),i.x+i.width>n&&(i.width=n-i.x,i.height=i.width/t),"%"===e.unit?x(i,n,r):i}function f(e,t,n){var r=m(e,t,n);return r.x=(t-r.width)/2,r.y=(n-r.height)/2,"%"===e.unit?x(r,t,n):r}function x(e,t,n){return"%"===e.unit?d(d(d({},h),e),{},{unit:"%"}):{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/n*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/n*100:0}}function m(e,t,n){return e.unit?"px"===e.unit?d(d(d({},h),e),{},{unit:"px"}):{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*n/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*n/100:0}:d(d(d({},h),e),{},{unit:"px"})}function w(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:i,c=d({},e),h=Math.min(a,r),u=Math.min(o,i),p=Math.min(s,r),g=Math.min(l,i);t&&(t>1?(u=(h=o?o*t:h)/t,p=s*t):(h=(u=a?a/t:u)*t,g=l/t)),c.y<0&&(c.height=Math.max(c.height+c.y,u),c.y=0),c.x<0&&(c.width=Math.max(c.width+c.x,h),c.x=0);var f=r-(c.x+c.width);f<0&&(c.x=Math.min(c.x,r-h),c.width+=f);var x=i-(c.y+c.height);if(x<0&&(c.y=Math.min(c.y,i-u),c.height+=x),c.width<h&&("sw"!==n&&"nw"!=n||(c.x-=h-c.width),c.width=h),c.height<u&&("nw"!==n&&"ne"!=n||(c.y-=u-c.height),c.height=u),c.width>p&&("sw"!==n&&"nw"!=n||(c.x-=p-c.width),c.width=p),c.height>g&&("nw"!==n&&"ne"!=n||(c.y-=g-c.height),c.height=g),t){var m=c.width/c.height;if(m<t){var w=Math.max(c.width/t,u);"nw"!==n&&"ne"!=n||(c.y-=w-c.height),c.height=w}else if(m>t){var v=Math.max(c.height*t,h);"sw"!==n&&"nw"!=n||(c.x-=v-c.width),c.width=v}}return c}function v(e,t,n,r){var i=d({},e);return"ArrowLeft"===t?"nw"===r?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):"w"===r?(i.x-=n,i.width+=n):"sw"===r?(i.x-=n,i.width+=n,i.height+=n):"ne"===r?(i.y+=n,i.width-=n,i.height-=n):"e"===r?i.width-=n:"se"===r&&(i.width-=n,i.height-=n):"ArrowRight"===t&&("nw"===r?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):"w"===r?(i.x+=n,i.width-=n):"sw"===r?(i.x+=n,i.width-=n,i.height-=n):"ne"===r?(i.y-=n,i.width+=n,i.height+=n):"e"===r?i.width+=n:"se"===r&&(i.width+=n,i.height+=n)),"ArrowUp"===t?"nw"===r?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):"n"===r?(i.y-=n,i.height+=n):"ne"===r?(i.y-=n,i.width+=n,i.height+=n):"sw"===r?(i.x+=n,i.width-=n,i.height-=n):"s"===r?i.height-=n:"se"===r&&(i.width-=n,i.height-=n):"ArrowDown"===t&&("nw"===r?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):"n"===r?(i.y+=n,i.height-=n):"ne"===r?(i.y+=n,i.width-=n,i.height-=n):"sw"===r?(i.x-=n,i.width+=n,i.height+=n):"s"===r?i.height+=n:"se"===r&&(i.width+=n,i.height+=n)),i}var y={capture:!0,passive:!1},C=function(n){s(g,n);var c=l(g);function g(){var t;return i(this,g),(t=c.apply(this,arguments)).docMoveBound=!1,t.mouseDownOnCrop=!1,t.dragStarted=!1,t.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},t.componentRef=(0,e.createRef)(),t.mediaRef=(0,e.createRef)(),t.initChangeCalled=!1,t.state={cropIsActive:!1,newCropIsBeingDrawn:!1},t.onCropPointerDown=function(e){var n=t.props,r=n.crop,i=n.disabled,a=t.getBox();if(r){var o=m(r,a.width,a.height);if(!i){e.cancelable&&e.preventDefault(),t.bindDocMove(),t.componentRef.current.focus({preventScroll:!0});var s=e.target.dataset.ord,l=Boolean(s),d=e.clientX,c=e.clientY,h=o.x,u=o.y;if(s){var p=e.clientX-a.x,g=e.clientY-a.y,f=0,x=0;"ne"===s||"e"==s?(f=p-(o.x+o.width),x=g-o.y,h=o.x,u=o.y+o.height):"se"===s||"s"===s?(f=p-(o.x+o.width),x=g-(o.y+o.height),h=o.x,u=o.y):"sw"===s||"w"==s?(f=p-o.x,x=g-(o.y+o.height),h=o.x+o.width,u=o.y):"nw"!==s&&"n"!=s||(f=p-o.x,x=g-o.y,h=o.x+o.width,u=o.y+o.height),d=h+a.x+f,c=u+a.y+x}t.evData={startClientX:d,startClientY:c,startCropX:h,startCropY:u,clientX:e.clientX,clientY:e.clientY,isResize:l,ord:s},t.mouseDownOnCrop=!0,t.setState({cropIsActive:!0})}}},t.onComponentPointerDown=function(e){var n=t.props,r=n.crop,i=n.disabled,a=n.locked,o=n.keepSelection,s=n.onChange,l=t.getBox();if(!(i||a||o&&r)){e.cancelable&&e.preventDefault(),t.bindDocMove(),t.componentRef.current.focus({preventScroll:!0});var d=e.clientX-l.x,c=e.clientY-l.y,h={unit:"px",x:d,y:c,width:0,height:0};t.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:d,startCropY:c,clientX:e.clientX,clientY:e.clientY,isResize:!0},t.mouseDownOnCrop=!0,s(m(h,l.width,l.height),x(h,l.width,l.height)),t.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}},t.onDocPointerMove=function(e){var n=t.props,r=n.crop,i=n.disabled,a=n.onChange,s=n.onDragStart,l=t.getBox();if(!i&&r&&t.mouseDownOnCrop){e.cancelable&&e.preventDefault(),t.dragStarted||(t.dragStarted=!0,s&&s(e));var d,c=o(t).evData;c.clientX=e.clientX,c.clientY=e.clientY,p(r,d=c.isResize?t.resizeCrop():t.dragCrop())||a(m(d,l.width,l.height),x(d,l.width,l.height))}},t.onComponentKeyDown=function(e){var n=t.props,r=n.crop,i=n.disabled,a=n.onChange,o=n.onComplete,s=t.getBox();if(!i){var l=e.key,d=!1;if(r){var c=t.makePixelCrop(),h=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?g.nudgeStepLarge:e.shiftKey?g.nudgeStepMedium:g.nudgeStep;if("ArrowLeft"===l?(c.x-=h,d=!0):"ArrowRight"===l?(c.x+=h,d=!0):"ArrowUp"===l?(c.y-=h,d=!0):"ArrowDown"===l&&(c.y+=h,d=!0),d){e.cancelable&&e.preventDefault(),c.x=u(c.x,0,s.width-c.width),c.y=u(c.y,0,s.height-c.height);var p=m(c,s.width,s.height),f=x(c,s.width,s.height);a(p,f),o&&o(p,f)}}}},t.onHandlerKeyDown=function(e,n){var r=t.props,i=r.aspect,a=void 0===i?0:i,o=r.crop,s=r.disabled,l=r.minWidth,d=void 0===l?0:l,c=r.minHeight,h=void 0===c?0:c,u=r.maxWidth,f=r.maxHeight,y=r.onChange,C=r.onComplete,j=t.getBox();if(!s&&o&&("ArrowUp"===e.key||"ArrowDown"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key)){e.stopPropagation(),e.preventDefault();var Z=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?g.nudgeStepLarge:e.shiftKey?g.nudgeStepMedium:g.nudgeStep,b=w(v(m(o,j.width,j.height),e.key,Z,n),a,n,j.width,j.height,d,h,u,f);if(!p(o,b)){var D=x(b,j.width,j.height);y(b,D),C&&C(b,D)}}},t.onDocPointerDone=function(e){var n=t.props,r=n.crop,i=n.disabled,a=n.onComplete,o=n.onDragEnd,s=t.getBox();t.unbindDocMove(),!i&&r&&t.mouseDownOnCrop&&(t.mouseDownOnCrop=!1,t.dragStarted=!1,o&&o(e),a&&a(m(r,s.width,s.height),x(r,s.width,s.height)),t.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},t.onDragFocus=function(e){var n;null===(n=t.componentRef.current)||void 0===n||n.scrollTo(0,0)},t}return a(g,[{key:"document",get:function(){return document}},{key:"getBox",value:function(){var e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};var t=e.getBoundingClientRect();return{x:t.x,y:t.y,width:t.width,height:t.height}}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.crop,r=t.onComplete;if(r&&!e.crop&&n){var i=this.getBox(),a=i.width,o=i.height;a&&o&&r(m(n,a,o),x(n,a,o))}}},{key:"componentWillUnmount",value:function(){this.resizeObserver&&this.resizeObserver.disconnect()}},{key:"bindDocMove",value:function(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,y),this.document.addEventListener("pointerup",this.onDocPointerDone,y),this.document.addEventListener("pointercancel",this.onDocPointerDone,y),this.docMoveBound=!0)}},{key:"unbindDocMove",value:function(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,y),this.document.removeEventListener("pointerup",this.onDocPointerDone,y),this.document.removeEventListener("pointercancel",this.onDocPointerDone,y),this.docMoveBound=!1)}},{key:"getCropStyle",value:function(){var e=this.props.crop;if(e)return{top:"".concat(e.y).concat(e.unit),left:"".concat(e.x).concat(e.unit),width:"".concat(e.width).concat(e.unit),height:"".concat(e.height).concat(e.unit)}}},{key:"dragCrop",value:function(){var e=this.evData,t=this.getBox(),n=this.makePixelCrop(),r=e.clientX-e.startClientX,i=e.clientY-e.startClientY;return n.x=u(e.startCropX+r,0,t.width-n.width),n.y=u(e.startCropY+i,0,t.height-n.height),n}},{key:"getPointRegion",value:function(e){var t=this.evData,n=t.clientX-e.x,r=t.clientY-e.y<t.startCropY;return n<t.startCropX?r?"nw":"sw":r?"ne":"se"}},{key:"resizeCrop",value:function(){var e=this.evData,t=this.getBox(),n=this.props,r=n.aspect,i=void 0===r?0:r,a=n.minWidth,o=void 0===a?0:a,s=n.minHeight,l=void 0===s?0:s,d=n.maxWidth,c=n.maxHeight,h=this.getPointRegion(t),u=this.makePixelCrop(),p=e.ord?e.ord:h,f=e.clientX-e.startClientX,x=e.clientY-e.startClientY,m={unit:"px",x:0,y:0,width:0,height:0};"ne"===h?(m.x=e.startCropX,m.width=f,i?(m.height=m.width/i,m.y=e.startCropY-m.height):(m.height=Math.abs(x),m.y=e.startCropY-m.height)):"se"===h?(m.x=e.startCropX,m.y=e.startCropY,m.width=f,m.height=i?m.width/i:x):"sw"===h?(m.x=e.startCropX+f,m.y=e.startCropY,m.width=Math.abs(f),m.height=i?m.width/i:x):"nw"===h&&(m.x=e.startCropX+f,m.width=Math.abs(f),i?(m.height=m.width/i,m.y=e.startCropY-m.height):(m.height=Math.abs(x),m.y=e.startCropY+x));var v=w(m,i,h,t.width,t.height,o,l,d,c);return i||g.xyOrds.indexOf(p)>-1?(u.x=v.x,u.y=v.y,u.width=v.width,u.height=v.height):g.xOrds.indexOf(p)>-1?(u.x=v.x,u.width=v.width):g.yOrds.indexOf(p)>-1&&(u.y=v.y,u.height=v.height),u}},{key:"createCropSelection",value:function(){var e=this,n=this.props,r=n.ariaLabels,i=void 0===r?g.defaultProps.ariaLabels:r,a=n.disabled,o=n.locked,s=n.renderSelectionAddon,l=n.ruleOfThirds,d=n.crop,c=this.getCropStyle();if(d)return t().createElement("div",{style:c,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":i.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!a&&!o&&t().createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},t().createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":i.nwDragHandle,onKeyDown:function(t){return e.onHandlerKeyDown(t,"nw")},role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":i.nDragHandle,onKeyDown:function(t){return e.onHandlerKeyDown(t,"n")},role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":i.neDragHandle,onKeyDown:function(t){return e.onHandlerKeyDown(t,"ne")},role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":i.eDragHandle,onKeyDown:function(t){return e.onHandlerKeyDown(t,"e")},role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":i.seDragHandle,onKeyDown:function(t){return e.onHandlerKeyDown(t,"se")},role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":i.sDragHandle,onKeyDown:function(t){return e.onHandlerKeyDown(t,"s")},role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":i.swDragHandle,onKeyDown:function(t){return e.onHandlerKeyDown(t,"sw")},role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":i.wDragHandle,onKeyDown:function(t){return e.onHandlerKeyDown(t,"w")},role:"button"})),s&&t().createElement("div",{className:"ReactCrop__selection-addon",onMouseDown:function(e){return e.stopPropagation()}},s(this.state)),l&&t().createElement(t().Fragment,null,t().createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),t().createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}},{key:"makePixelCrop",value:function(){var e=d(d({},h),this.props.crop||{}),t=this.getBox();return m(e,t.width,t.height)}},{key:"render",value:function(){var e=this.props,n=e.aspect,i=e.children,a=e.circularCrop,o=e.className,s=e.crop,l=e.disabled,d=e.locked,c=e.style,h=e.ruleOfThirds,u=this.state,p=u.cropIsActive,g=u.newCropIsBeingDrawn,f=s?this.createCropSelection():null,x=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}("ReactCrop",o,{"ReactCrop--active":p,"ReactCrop--disabled":l,"ReactCrop--locked":d,"ReactCrop--new-crop":g,"ReactCrop--fixed-aspect":s&&n,"ReactCrop--circular-crop":s&&a,"ReactCrop--rule-of-thirds":s&&h,"ReactCrop--invisible-crop":!this.dragStarted&&s&&!s.width&&!s.height});return t().createElement("div",{ref:this.componentRef,className:x,style:c},t().createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},i),f)}}]),g}(e.PureComponent);C.xOrds=["e","w"],C.yOrds=["n","s"],C.xyOrds=["nw","ne","se","sw"],C.nudgeStep=1,C.nudgeStepMedium=10,C.nudgeStepLarge=100,C.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}}}(),c}())}}]);
//# sourceMappingURL=467.01c1ae3f.chunk.js.map