"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[694],{74921:function(e,n,t){t.r(n),t.d(n,{default:function(){return se}});var s=t(72791),r=t(88522),i=t(79271),a=t(70885),l=t(20803),o=t(50228),c=t(48928),d=t.p+"static/media/def-ava.3a614f4c231447b5ae52.png",u=t(1413),p=t(60788),h=t(40464),f=t(13811),x=t(29823),m=t(55705),j=t(59911),g=t(39709),Z=t(57337),v=t(72900),y=t(88823),w=t(17205),b=t(98234),N=t.n(b),C=(t(89390),t(80184));function k(e){var n=e.open,t=e.setOpen,i=(0,r.K)((function(e){return e.user})),l=(0,r.K)((function(e){return e.setUser})),c=(0,s.useRef)(null),d=(0,s.useState)(""),m=(0,a.Z)(d,2),j=m[0],g=m[1],v=(0,s.useRef)(null),y=(0,s.useState)(),k=(0,a.Z)(y,2),A=k[0],I=k[1],O=(0,s.useState)(),S=(0,a.Z)(O,2),P=S[0],D=S[1];return(0,C.jsx)(p.Z,{onClose:function(){},open:n,children:(0,C.jsxs)(o.Z,{children:[(0,C.jsxs)(h.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Change Image",(0,C.jsx)(f.Z,{onClick:function(){g(""),t(!1)},children:(0,C.jsx)(x.Z,{})})]}),(0,C.jsx)(o.Z,{sx:{typography:"body1",padding:1},children:(0,C.jsxs)(o.Z,{style:{width:"400px"},children:[!j&&(0,C.jsxs)(o.Z,{style:{height:"200px",display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,C.jsx)("input",{type:"file",ref:c,style:{display:"none"},accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var n=new FileReader;n.addEventListener("load",(function(){var e;return g((null===(e=n.result)||void 0===e?void 0:e.toString())||"")})),n.readAsDataURL(e.target.files[0])}}}),(0,C.jsx)(w.Z,{onClick:function(){return c.current.click()},children:"Upload"})]}),!!j&&(0,C.jsxs)(o.Z,{children:[(0,C.jsx)(N(),{crop:A,onChange:function(e,n){return I(n)},onComplete:function(e){var n=document.createElement("canvas"),t=window.devicePixelRatio,s=v.current.naturalWidth/v.current.width,r=v.current.naturalHeight/v.current.height,i=n.getContext("2d");n.width=e.width*t*s,n.height=e.height*t*r,i.setTransform(t,0,0,t,0,0),i.imageSmoothingQuality="high",i.drawImage(v.current,e.x*s,e.y*r,e.width*s,e.height*r,0,0,e.width*s,e.height*r),n.toBlob((function(e){e?D(e):console.error("Canvas is empty")}),"image/jpeg",1)},minWidth:100,minHeight:100,children:(0,C.jsx)("img",{style:{width:"400px",height:"auto"},ref:v,alt:"Crop me",src:j,onLoad:function(e){var n=e.currentTarget,t=n.width,s=n.height;I(function(e,n,t){return(0,b.centerCrop)((0,b.makeAspectCrop)({unit:"%",width:90},t,e,n),e,n)}(t,s,2))}})}),(0,C.jsx)(o.Z,{style:{display:"flex"},children:(0,C.jsx)(w.Z,{onClick:function(){var e=new FormData;e.append("file",P,"profileImg"),Z.ck(e).then((function(e){l((0,u.Z)((0,u.Z)({},i),{},{profileImage:e.data.user.profileImage})),t(!1)})).catch((function(e){return console.log(e)}))},style:{marginLeft:"auto"},children:"Save"})})]})]})})]})})}function A(e){var n=e.open,t=e.setOpen,i=e.user,l=(0,s.useState)(!1),c=(0,a.Z)(l,2),w=c[0],b=c[1],N=(0,s.useState)(!1),A=(0,a.Z)(N,2),I=A[0],O=A[1],S=(0,r.K)((function(e){return e.setUser})),P=(0,m.TA)({initialValues:{firstName:i.firstName,lastName:i.lastName,description:i.description?i.description:"",isProfileOpen:i.isProfileOpen,isAssetsOpen:i.isAssetsOpen},validate:function(e){var n={};return e.firstName||(n.firstName="Required"),e.lastName||(n.lastName="Required"),n},onSubmit:function(e){var n=new FormData;n.append("firstName",e.firstName),n.append("lastName",e.lastName),e.description&&n.append("description",e.description),n.append("isProfileOpen",e.isProfileOpen),n.append("isAssetsOpen",e.isAssetsOpen),O(!0),(0,Z.Vy)().put("/users",n).then((function(e){var n=e.data.user;S((0,u.Z)((0,u.Z)({},i),{},{firstName:n.firstName,lastName:n.lastName,description:n.description,isProfileOpen:n.isProfileOpen,isAssetsOpen:n.isAssetsOpen})),t(!1)})).finally((function(){return O(!1)}))}});return(0,C.jsxs)(p.Z,{onClose:function(){},open:n,children:[(0,C.jsxs)(o.Z,{children:[(0,C.jsxs)(h.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Edit Profile",(0,C.jsx)(f.Z,{onClick:function(){return t(!1)},children:(0,C.jsx)(x.Z,{})})]}),(0,C.jsx)(o.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,C.jsxs)(o.Z,{style:{display:"flex"},children:[(0,C.jsxs)(o.Z,{sx:{marginRight:"10px"},style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:i.profileImage?i.profileImage:d}),(0,C.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),b(!0)},children:"change image"})]}),(0,C.jsx)(o.Z,{children:(0,C.jsxs)("form",{style:{display:"flex",flexDirection:"column"},onSubmit:P.handleSubmit,children:[(0,C.jsx)(j.Z,{margin:"dense",label:"First Name",name:"firstName",variant:"standard",error:!(!P.touched.firstName||!P.errors.firstName),helperText:P.touched.firstName&&P.errors.firstName?P.errors.firstName:"",onChange:P.handleChange,onBlur:P.handleBlur,value:P.values.firstName}),(0,C.jsx)(j.Z,{margin:"dense",label:"Last Name",name:"lastName",variant:"standard",error:!(!P.touched.lastName||!P.errors.lastName),helperText:P.touched.lastName&&P.errors.lastName?P.errors.lastName:"",onChange:P.handleChange,onBlur:P.handleBlur,value:P.values.lastName}),(0,C.jsx)(j.Z,{margin:"dense",label:"Profile Description",name:"description",variant:"standard",onChange:P.handleChange,onBlur:P.handleBlur,value:P.values.description}),(0,C.jsx)(v.Z,{checked:P.values.isProfileOpen,name:"isProfileOpen",control:(0,C.jsx)(y.Z,{onChange:function(e){P.setFieldValue("isProfileOpen",e.target.checked)}}),label:"Is Profile Open",labelPlacement:"end"}),(0,C.jsx)(v.Z,{checked:P.values.isAssetsOpen,name:"isAssetsOpen",control:(0,C.jsx)(y.Z,{onChange:function(e){P.setFieldValue("isAssetsOpen",e.target.checked)}}),label:"Is Assets Open",labelPlacement:"end"}),(0,C.jsx)(g.Z,{type:"submit",loading:I,variant:"contained",children:"Save"})]})})]})})]}),w&&(0,C.jsx)(k,{open:w,setOpen:b})]})}function I(e){var n=e.profile,t=s.useState(!1),i=(0,a.Z)(t,2),l=i[0],u=i[1],p=(0,r.K)((function(e){return e.user}));return n?(0,C.jsx)(o.Z,{style:{marginTop:"10px",marginRight:"10px"},children:(0,C.jsxs)(c.Z,{sx:{display:"flex",padding:"10px",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,C.jsx)(o.Z,{sx:{marginRight:"10px"},children:!!n.firstName&&(0,C.jsx)("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:n.profileImage||d})}),(0,C.jsxs)(o.Z,{children:[(0,C.jsxs)(o.Z,{sx:{fontWeight:"bold"},children:[null===n||void 0===n?void 0:n.firstName," ",null===n||void 0===n?void 0:n.lastName]}),(null===n||void 0===n?void 0:n.description)&&(0,C.jsxs)(o.Z,{children:["Description: ",null===n||void 0===n?void 0:n.description]})]})]})}):(0,C.jsxs)(o.Z,{style:{marginTop:"10px",marginRight:"10px"},children:[(0,C.jsxs)(c.Z,{sx:{display:"flex",padding:"10px",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,C.jsx)(o.Z,{sx:{marginRight:"10px"},children:(0,C.jsx)("img",{style:{width:"150px",borderRadius:"10px"},alt:"",src:p.profileImage||d})}),(0,C.jsx)(o.Z,{children:!!p.firstName&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(o.Z,{sx:{fontWeight:"bold"},children:[null===p||void 0===p?void 0:p.firstName," ",null===p||void 0===p?void 0:p.lastName]}),(null===p||void 0===p?void 0:p.description)&&(0,C.jsxs)(o.Z,{children:["Description: ",null===p||void 0===p?void 0:p.description]})]})}),p.firstName&&(0,C.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),u(!0)},children:"Edit"})]}),l&&(0,C.jsx)(A,{open:l,setOpen:u,user:p})]})}var O=t(74142),S=t(76132),P=t(19978),D=t(5682),R=t(73978),F=t(4346),T=t(65209),B=t(45629),K=t(24177),V={Free:{color:"blue"},Silver:{color:"grey"},Gold:{color:"orange"},Bronze:{color:"chocolate"},Rare:{color:"lightgreen"},"Unique!":{color:"black"}},L=function(e){var n=e.item,t=e.walletAddress,s=(0,O.Z)(),r=(0,i.k6)();return(0,C.jsx)(S.ZP,{children:(0,C.jsxs)(P.Z,{onClick:function(){r.push({pathname:"/provenance",state:{nftItem:n,walletAddress:t}})},children:[(0,C.jsx)(D.Z,{children:(0,C.jsx)(R.Z,{style:{backgroundColor:s.palette.primary.main},src:n.imagePreview})}),(0,C.jsx)(F.Z,{primary:n.tokenName}),(0,C.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,C.jsxs)("span",{style:{textAlign:"left",width:50},children:[n.balance,"/",n.total]})})]})},n.nftId)},W=function(e){var n=e.item,t=e.walletAddress,s=(0,O.Z)(),r=(0,i.k6)();return(0,C.jsx)(S.ZP,{children:(0,C.jsxs)(P.Z,{onClick:function(){r.push({pathname:"/provenance",state:{nftItem:n,walletAddress:t}})},children:[(0,C.jsx)(D.Z,{children:(0,C.jsx)(R.Z,{style:{backgroundColor:s.palette.primary.main},src:n.nftFileUrl})}),(0,C.jsx)(F.Z,{primary:n.tokenName}),(0,C.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[(0,C.jsx)(o.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:n.traits.map((function(e){return(0,C.jsx)(T.Z,{sx:{backgroundColor:V[e].color,marginRight:"5px"},label:e},e)}))}),(0,C.jsxs)("span",{style:{textAlign:"left",width:50},children:[n.balance,"/",n.total]})]})]})},n.nftId)};function E(e){var n=e.balance,t=e.walletAddress,s=n.filter((function(e){return"NFT"===e.tokenType})),r=(0,K.Ev)(n);return(0,C.jsxs)(B.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:[s.map((function(e,n){return(0,C.jsx)(L,{walletAddress:t,item:e},e.nftId)})),r.map((function(e,n){return(0,C.jsx)(W,{walletAddress:t,item:e},e.nftId+n)}))]})}var U=t(79299),q=t(4565),_=t(52791),z=t(61102),H=t(91482),G=function(e){var n=e.item,t=e.walletAddress,s=(0,O.Z)(),r=(0,i.k6)();return(0,C.jsx)(S.ZP,{children:(0,C.jsxs)(P.Z,{onClick:function(){r.push({pathname:"/provenance",state:{nftItem:n,walletAddress:t}})},children:[(0,C.jsx)(D.Z,{children:(0,C.jsx)(R.Z,{style:{backgroundColor:s.palette.primary.main},src:n.file.locationPreview})}),(0,C.jsx)(F.Z,{primary:n.documentName,secondary:(0,H.Z)(new Date(n.createdAt),"pp PP")}),(0,C.jsx)(_.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,C.jsx)(f.Z,{sx:{color:"black"},children:(0,C.jsx)(z.Z,{})})})]})},n._id)};function Q(e){var n=e.documents,t=e.walletAddress;return(0,C.jsx)(B.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:n.map((function(e){return(0,C.jsx)(G,{walletAddress:t,item:e},e._id)}))})}var J=t(11302),M=t(74165),X=t(15861),Y=t(37924);function $(e){var n=s.useState(!1),t=(0,a.Z)(n,2),r=t[0],i=t[1],l=(0,m.TA)({initialValues:{documentName:"",file:null},validate:function(e){var n={};return e.documentName||(n.documentName="Required"),e.file||(n.file="Required"),n},onSubmit:function(){var n=(0,X.Z)((0,M.Z)().mark((function n(t){var s,r,a,l;return(0,M.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i(!0),n.prev=1,console.log(t),(s=new FormData).append("files",t.file),n.next=7,Z.Vy().post("/files",s);case 7:return r=n.sent,a=r.data.results[0].location,n.next=11,Z.Vy().post("/docs",{documentName:t.documentName,files:[a]});case 11:l=n.sent,e.setDocuments(l.data),i(!1),e.setOpen(!1),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(1),console.log(n.t0),i(!1);case 21:case"end":return n.stop()}}),n,null,[[1,17]])})));return function(e){return n.apply(this,arguments)}}()});return(0,C.jsx)(p.Z,{onClose:function(){},maxWidth:!1,open:e.open,children:(0,C.jsxs)(_.Z,{style:{width:"400px"},children:[(0,C.jsxs)(h.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Create New Document",(0,C.jsx)(f.Z,{onClick:function(){return e.setOpen(!1)},children:(0,C.jsx)(x.Z,{})})]}),(0,C.jsx)(_.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,C.jsxs)("form",{style:{flex:"1"},onSubmit:l.handleSubmit,children:[(0,C.jsx)("input",{onChange:function(e){l.setFieldValue("file",e.target.files[0])},type:"file"}),l.touched.file&&l.errors.file?(0,C.jsx)(Y.Z,{error:!0,children:l.errors.file}):null,(0,C.jsx)(j.Z,{margin:"dense",inputProps:{autoComplete:"off"},label:"Document Name",name:"documentName",type:"text",fullWidth:!0,variant:"standard",onChange:function(e){l.handleChange(e)},onBlur:l.handleBlur,error:l.touched.documentName&&Boolean(l.errors.documentName),helperText:l.touched.documentName&&l.errors.documentName?l.errors.documentName:""}),(0,C.jsx)(_.Z,{sx:{margin:2,display:"flex",justifyContent:"center"},children:(0,C.jsx)(g.Z,{loading:r,type:"submit",variant:"contained",children:"Create"})})]})})]})})}function ee(){var e=(0,s.useState)(!1),n=(0,a.Z)(e,2),t=n[0],i=n[1],c=(0,s.useState)(),d=(0,a.Z)(c,2),u=d[0],p=d[1],h=(0,r.K)((function(e){return e.user})),f=(0,r.K)((function(e){return e.balance})),x=(0,r.K)((function(e){return e.documents})),m=(0,s.useState)(!1),j=(0,a.Z)(m,2),g=j[0],v=j[1];return(0,s.useEffect)((function(){i(!0),(0,Z.f1)(h.walletAddress).then((function(e){p(e.data)})).finally((function(){return i(!1)}))}),[]),t?(0,C.jsx)(J.A,{}):(0,C.jsxs)(l.Z,{maxWidth:"xl",style:{height:"calc(100vh - 80px)"},children:[(0,C.jsx)(o.Z,{sx:{margin:"auto",width:"200px"},children:(0,C.jsx)(I,{})}),(0,C.jsx)(q.Z,{variant:"h6",style:{margin:"16px"},children:"Items"}),(0,C.jsx)(E,{balance:f.filter(K.LK),walletAddress:h.walletAddress}),!!x.length&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(q.Z,{variant:"h6",style:{margin:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,C.jsx)("span",{children:"Documents"}),(0,C.jsx)("a",{href:"/",style:{textDecoration:"none",color:"inherit",fontSize:"14px"},onClick:function(e){e.preventDefault(),v(!0)},children:"Create New Document"})]}),(0,C.jsx)(Q,{walletAddress:h.walletAddress,documents:x})]}),!!u&&(0,C.jsxs)(o.Z,{children:[(0,C.jsx)(q.Z,{variant:"h6",style:{margin:"16px"},children:"Transactions"}),(0,C.jsx)(U.P,{transactions:u.items})]}),(0,C.jsx)($,{open:g,setOpen:v,setDocuments:function(){}})]})}var ne=t(37762);function te(e){var n=(0,s.useState)(!0),t=(0,a.Z)(n,2),r=t[0],i=t[1],c=(0,s.useState)(),d=(0,a.Z)(c,2),u=d[0],p=d[1],h=(0,s.useState)(),f=(0,a.Z)(h,2),x=f[0],m=f[1],j=(0,s.useState)([]),g=(0,a.Z)(j,2),v=g[0],y=g[1],w=(0,s.useState)([]),b=(0,a.Z)(w,2),N=b[0],k=b[1],A=function(){var e=(0,X.Z)((0,M.Z)().mark((function e(n){var t,s,r,i,a,l;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],s=(0,ne.Z)(n),e.prev=2,s.s();case 4:if((r=s.n()).done){e.next=20;break}return i=r.value,e.prev=6,e.next=9,Z.Vy().get("/files/"+i.files[0]);case 9:a=e.sent,l=a.data,i.file=l,t.push(i),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(i.files[0],"sdjfkls");case 18:e.next=4;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(2),s.e(e.t1);case 25:return e.prev=25,s.f(),e.finish(25);case 28:k(t);case 29:case"end":return e.stop()}}),e,null,[[2,22,25,28],[6,15]])})));return function(n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){i(!0),(0,Z.k2)(e.walletAddress).then((function(e){p(e.data),y(e.data.balances.balance),A(e.data.documents)})),i(!1),(0,Z.f1)(e.walletAddress).then((function(e){m(e.data)}))}),[]),r?(0,C.jsx)(J.A,{}):(0,C.jsxs)(l.Z,{maxWidth:"xl",style:{height:"calc(100vh - 80px)"},children:[(0,C.jsxs)(o.Z,{children:[!(null===u||void 0===u||!u.firstName)&&(0,C.jsx)(o.Z,{sx:{width:"200px",margin:"auto",padding:"10px"},children:(0,C.jsx)(I,{profile:u})}),!!v.filter(K.LK).length&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(q.Z,{variant:"h6",style:{margin:"16px"},children:"Items"}),(0,C.jsx)(E,{balance:v.filter(K.LK),walletAddress:e.walletAddress})]})]}),!!N.length&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(q.Z,{variant:"h6",style:{margin:"16px"},children:"Documents"}),(0,C.jsx)(Q,{walletAddress:e.walletAddress,documents:N})]}),!!x&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(q.Z,{variant:"h6",style:{margin:"16px"},children:"Transactions"}),(0,C.jsx)(U.P,{transactions:x.items})]})]})}function se(){var e=(0,r.K)((function(e){return e.user})),n=(0,i.UO)();return e.walletAddress===n.wallet?(0,C.jsx)(ee,{}):(0,C.jsx)(te,{walletAddress:n.wallet})}}}]);
//# sourceMappingURL=694.db3a7ec2.chunk.js.map