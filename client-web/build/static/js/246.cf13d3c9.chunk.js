"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[246],{29584:function(e,n,a){a.r(n),a.d(n,{default:function(){return ae}});var t=a(72791),r=a.t(t,2),s=a(70885),i=a(21680),l=a(19773),o=a(24390),c=a(69963),p=a(9827),d=a(60807),u=a(56650),f=a(50228),h=a(4565),x=a(13811),m=a(68439),g=a(11210),j=a(32037),Z=a(60788),v=a(40464),y=a(29823),C=a(55705),A=a(59911),b=a(39709),w=a(47409),O=a(72900),N=a(45473),S=a(80184);function k(e){var n=e.open,a=e.setOpen,r=t.useRef(null),i=(0,g.K)((function(e){return e.setApp})),l=(0,t.useState)(!1),o=(0,s.Z)(l,2),c=o[0],p=o[1],d=(0,C.TA)({initialValues:{appName:"",appDescription:"",appGoogleId:"",defaultAccessProfileOpen:!1,defaultAccessAssetsOpen:!1,usersCanFree:!1,newUserTokenGift:0,coinsDayliBonus:0},validate:function(e){var n={};return e.appName||(n.appName="Required"),n},onSubmit:function(e){var n=e.appName,t=e.appDescription,s=e.appGoogleId,l=e.defaultAccessAssetsOpen,o=e.defaultAccessProfileOpen,c=e.usersCanFree;p(!0);var d,u=new FormData;if(r.current){var f=r.current.files;f&&(d=f[0])}d&&u.append("file",d),u.append("appName",n),u.append("appDescription",t),u.append("appGoogleId",s),u.append("defaultAccessAssetsOpen",l.toString()),u.append("defaultAccessProfileOpen",o.toString()),u.append("usersCanFree",c.toString()),w.ri(u).then((function(e){i(e.data.app),a(!1)})).finally((function(){return p(!1)}))}});return(0,S.jsx)(Z.Z,{onClose:function(){a(!1)},open:n,children:(0,S.jsxs)(f.Z,{children:[(0,S.jsxs)(v.Z,{style:{display:"flex",justifyContent:"space-between"},children:["New App",(0,S.jsx)(x.Z,{disabled:c,onClick:function(){return a(!1)},children:(0,S.jsx)(y.Z,{})})]}),(0,S.jsx)(f.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,S.jsxs)("form",{onSubmit:d.handleSubmit,children:[(0,S.jsx)(f.Z,{children:(0,S.jsx)(A.Z,{error:!(!d.touched.appName||!d.errors.appName),helperText:d.touched.appName&&d.errors.appName?d.errors.appName:"",margin:"dense",label:"App Name",name:"appName",variant:"standard",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.appName})}),(0,S.jsx)(f.Z,{children:(0,S.jsx)(A.Z,{margin:"dense",label:"Google Client Id",name:"appGoogleId",variant:"standard",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.appGoogleId})}),(0,S.jsxs)(f.Z,{style:{display:"inline-flex",flexDirection:"column"},children:[(0,S.jsx)(O.Z,{checked:d.values.defaultAccessProfileOpen,name:"defaultAccessProfileOpen",control:(0,S.jsx)(N.Z,{onChange:function(e){return d.setFieldValue("defaultAccessProfileOpen",e.target.checked)}}),label:"defaultAccessProfileOpen",labelPlacement:"end",onChange:d.handleChange}),(0,S.jsx)(O.Z,{checked:d.values.defaultAccessAssetsOpen,name:"defaultAccessAssetsOpen",control:(0,S.jsx)(N.Z,{onChange:function(e){return d.setFieldValue("defaultAccessAssetsOpen",e.target.checked)}}),label:"defaultAccessAssetsOpen",labelPlacement:"end"}),(0,S.jsx)(O.Z,{checked:d.values.usersCanFree,name:"usersCanFree",control:(0,S.jsx)(N.Z,{onChange:function(e){return d.setFieldValue("usersCanFree",e.target.checked)}}),label:"usersCanFree",labelPlacement:"end"}),(0,S.jsx)("input",{ref:r,type:"file",accept:"image/*"}),(0,S.jsx)(b.Z,{loading:c,variant:"contained",style:{marginTop:"15px"},type:"submit",disabled:c,children:"Create App"})]})]})})]})})}var F=a(17205),P=a(77248),D=a(8440),I=a(39571),T=a(69120),G=a(33073),B=a(93026);function _(e,n,a,r,i){var l="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,o=t.useState((function(){return i&&l?a(e).matches:r?r(e).matches:n})),c=(0,s.Z)(o,2),p=c[0],d=c[1];return(0,B.Z)((function(){var n=!0;if(l){var t=a(e),r=function(){n&&d(t.matches)};return r(),t.addListener(r),function(){n=!1,t.removeListener(r)}}}),[e,a,l]),p}var M=r.useSyncExternalStore;function K(e,n,a,r){var i=t.useCallback((function(){return n}),[n]),l=t.useMemo((function(){if(null!==r){var n=r(e).matches;return function(){return n}}return i}),[i,e,r]),o=t.useMemo((function(){if(null===a)return[i,function(){return function(){}}];var n=a(e);return[function(){return n.matches},function(e){return n.addListener(e),function(){n.removeListener(e)}}]}),[i,a,e]),c=(0,s.Z)(o,2),p=c[0],d=c[1];return M(d,p,l)}function R(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,T.Z)(),t="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,r=(0,G.Z)({name:"MuiUseMediaQuery",props:n,theme:a}),s=r.defaultMatches,i=void 0!==s&&s,l=r.matchMedia,o=void 0===l?t?window.matchMedia:null:l,c=r.ssrMatchMedia,p=void 0===c?null:c,d=r.noSsr;var u="function"===typeof e?e(a):e;u=u.replace(/^@media( ?)/m,"");var f=void 0!==M?K:_,h=f(u,i,o,p,d);return h}var V=a(74142);function W(e){var n,a=t.useState(!1),r=(0,s.Z)(a,2),i=r[0],l=r[1],o=(0,g.K)((function(e){return e.deleteApp})),c=R((0,V.Z)().breakpoints.down("md"));return(0,S.jsx)("div",{children:(0,S.jsxs)(Z.Z,{fullScreen:c,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"responsive-dialog-title",children:[(0,S.jsxs)(v.Z,{id:"responsive-dialog-title",children:["Are you sure want to remove application ",null===(n=e.app)||void 0===n?void 0:n.appName]}),(0,S.jsx)(D.Z,{children:(0,S.jsx)(I.Z,{children:"Your app clients(mobile, web) will not be able to send requests to Platform API after deleting the app"})}),(0,S.jsxs)(P.Z,{children:[(0,S.jsx)(F.Z,{disabled:i,variant:"contained",autoFocus:!0,onClick:function(){return e.setOpen(!1)},children:"Cancel"}),(0,S.jsx)(b.Z,{variant:"contained",loading:i,color:"error",onClick:function(){var n;e.app&&null!==(n=e.app)&&void 0!==n&&n._id&&(l(!0),w.P2(e.app._id).then((function(){var n;o(null===(n=e.app)||void 0===n?void 0:n._id),e.setOpen(!1)})).finally((function(){return l(!1)})))},autoFocus:!0,children:"Delete"})]})]})})}function J(e){var n=e.open,a=e.setOpen,r=e.app,i=t.useRef(null),l=(0,t.useState)(!1),o=(0,s.Z)(l,2),c=o[0],p=o[1],d=(0,g.K)((function(e){return e.updateApp})),u=(0,C.TA)({initialValues:{appName:r.appName,appDescription:r.appDescription?r.appDescription:"",appGoogleId:r.appGoogleId?r.appGoogleId:"",defaultAccessProfileOpen:r.defaultAccessProfileOpen,defaultAccessAssetsOpen:r.defaultAccessAssetsOpen,usersCanFree:r.usersCanFree},validate:function(e){var n={};return e.appName||(n.appName="Required"),n},onSubmit:function(e){var n=e.appName,t=e.appDescription,s=e.appGoogleId,l=e.defaultAccessAssetsOpen,o=e.defaultAccessProfileOpen,c=e.usersCanFree;p(!0);var u,f=new FormData;if(i.current){var h=i.current.files;h&&(u=h[0])}u&&f.append("file",u),f.append("appName",n),f.append("appDesctription",t),f.append("appGoogleId",s),f.append("defaultAccessAssetsOpen",l.toString()),f.append("defaultAccessProfileOpen",o.toString()),f.append("usersCanFree",c.toString()),w.KT(r._id,f).then((function(e){d(e.data.app),a(!1)})).finally((function(){return p(!1)}))}});return(0,S.jsx)(Z.Z,{onClose:function(){return a(!1)},open:n,children:(0,S.jsxs)(f.Z,{children:[(0,S.jsxs)(v.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Edit App",(0,S.jsx)(x.Z,{disabled:c,onClick:function(){return a(!1)},children:(0,S.jsx)(y.Z,{})})]}),(0,S.jsx)(f.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,S.jsxs)("form",{onSubmit:u.handleSubmit,children:[(0,S.jsx)(f.Z,{children:(0,S.jsx)(A.Z,{error:!(!u.touched.appName||!u.errors.appName),helperText:u.touched.appName&&u.errors.appName?u.errors.appName:"",margin:"dense",label:"App Name",name:"appName",variant:"standard",onChange:u.handleChange,onBlur:u.handleBlur,value:u.values.appName})}),(0,S.jsx)(f.Z,{children:(0,S.jsx)(A.Z,{margin:"dense",label:"Google Client Id",name:"appGoogleId",variant:"standard",onChange:u.handleChange,onBlur:u.handleBlur,value:u.values.appGoogleId})}),(0,S.jsxs)(f.Z,{style:{display:"inline-flex",flexDirection:"column"},children:[(0,S.jsx)(O.Z,{checked:u.values.defaultAccessProfileOpen,name:"defaultAccessProfileOpen",control:(0,S.jsx)(N.Z,{onChange:function(e){return u.setFieldValue("defaultAccessProfileOpen",e.target.checked)}}),label:"defaultAccessProfileOpen",labelPlacement:"end",onChange:u.handleChange}),(0,S.jsx)(O.Z,{checked:u.values.defaultAccessAssetsOpen,name:"defaultAccessAssetsOpen",control:(0,S.jsx)(N.Z,{onChange:function(e){return u.setFieldValue("defaultAccessAssetsOpen",e.target.checked)}}),label:"defaultAccessAssetsOpen",labelPlacement:"end"}),(0,S.jsx)(O.Z,{checked:u.values.usersCanFree,name:"usersCanFree",control:(0,S.jsx)(N.Z,{onChange:function(e){return u.setFieldValue("usersCanFree",e.target.checked)}}),label:"usersCanFree",labelPlacement:"end"}),(0,S.jsx)("input",{ref:i,type:"file",accept:"image/*"}),(0,S.jsx)(b.Z,{loading:c,variant:"contained",style:{marginTop:"15px"},type:"submit",children:"Update App"})]})]})})]})})}function U(e){var n,a=t.useState(!1),r=(0,s.Z)(a,2),i=r[0],l=r[1],o=(0,g.K)((function(e){return e.updateApp})),c=R((0,V.Z)().breakpoints.down("md"));return(0,S.jsx)("div",{children:(0,S.jsxs)(Z.Z,{fullScreen:c,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"responsive-dialog-title",children:[(0,S.jsxs)(v.Z,{id:"responsive-dialog-title",children:["Are you sure want to rotate JWT for application ",null===(n=e.app)||void 0===n?void 0:n.appName]}),(0,S.jsx)(D.Z,{children:(0,S.jsx)(I.Z,{children:"You will need to update your app clients(mobile, web) with new App Jwt"})}),(0,S.jsxs)(P.Z,{children:[(0,S.jsx)(F.Z,{disabled:i,variant:"contained",autoFocus:!0,onClick:function(){return e.setOpen(!1)},children:"Cancel"}),(0,S.jsx)(b.Z,{variant:"contained",loading:i,color:"error",onClick:function(){var n;e.app&&null!==(n=e.app)&&void 0!==n&&n._id&&(l(!0),w.oK(e.app._id).then((function(n){o(n.data.app),e.setOpen(!1)})).finally((function(){return l(!1)})))},autoFocus:!0,children:"Rotate"})]})]})})}var L=a(74165),q=a(1413),z=a(15861),E=a(54871),Y=a(81508),Q=a(55137),H=a(52775),X=function(e){var n=e.open,a=e.onClose,r=(0,g.K)((function(e){return e.user})),i=(0,g.K)((function(e){return e.setUser})),l=(0,t.useState)(!1),o=(0,s.Z)(l,2),c=o[0],p=o[1],d=(0,t.useState)(!1),u=(0,s.Z)(d,2),m=u[0],j=u[1],k=(0,H.D)().showSnackbar,F=(0,t.useState)(!1),P=(0,s.Z)(F,2),D=P[0],I=P[1],T=(0,t.useState)(""),G=(0,s.Z)(T,2),B=G[0],_=(G[1],(0,C.TA)({initialValues:{companyName:""},onSubmit:function(){var e=(0,z.Z)((0,L.Z)().mark((function e(n){var t;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.companyName,I(!0),e.prev=2,e.next=5,(0,w.jR)(t);case 5:e.sent,i((0,q.Z)((0,q.Z)({},r),{},{isAgreeWithTerms:!0})),a(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),k("error","Something went wrong");case 14:I(!1);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}()}));return(0,S.jsxs)(Z.Z,{onClose:a,maxWidth:!1,open:n,children:[(0,S.jsxs)(f.Z,{style:{width:"400px"},children:[(0,S.jsx)(x.Z,{sx:{position:"absolute",top:0,right:0},disabled:D,onClick:a,children:(0,S.jsx)(y.Z,{})}),(0,S.jsx)(v.Z,{sx:{display:"flex",justifyContent:"space-between",paddingLeft:1},children:"Owner Registration"}),(0,S.jsx)(f.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,S.jsxs)("form",{onSubmit:_.handleSubmit,children:[(0,S.jsx)(A.Z,{margin:"dense",label:"Company Name",name:"companyName",type:"text",fullWidth:!0,inputProps:{autoComplete:"off"},variant:"standard",onChange:_.handleChange,onBlur:_.handleBlur,error:_.touched.companyName&&Boolean(_.errors.companyName),helperText:_.touched.companyName&&_.errors.companyName?_.errors.companyName:""}),(0,S.jsx)(E.Z,{children:(0,S.jsx)(O.Z,{value:"I agree to the above terms and conditions",control:(0,S.jsx)(N.Z,{checked:m,onChange:function(e){return j(e.target.checked)}}),label:"I agree to the above terms and conditions",labelPlacement:"end"})}),(0,S.jsx)(f.Z,{sx:{display:"flex",alignItems:"flex-end",flexDirection:"column",width:"100%"},children:(0,S.jsx)(h.Z,{onClick:function(e){p(!0)},sx:{textDecoration:"underline",cursor:"pointer",fontSize:10},children:"Terms and Conditions"})}),!!B&&(0,S.jsx)(Y.Z,{severity:"error",children:B}),(0,S.jsx)(f.Z,{sx:{margin:2,display:"flex",justifyContent:"center"},children:(0,S.jsx)(b.Z,{loading:D,variant:"contained",type:"submit",disabled:D||!m,children:"Register"})})]})})]}),(0,S.jsx)(Z.Z,{onClose:function(){return p(!1)},maxWidth:!1,open:c,children:(0,S.jsx)(f.Z,{sx:{width:800},children:(0,S.jsx)(Q.Z,{setTermsOpen:function(e){return p(e)},firstName:r.firstName,lastName:r.lastName,email:r.lastName,company:"company"})})})]})};function $(){var e=(0,g.K)((function(e){return e.apps})),n=(0,g.K)((function(e){return e.user})),a=t.useState(!1),r=(0,s.Z)(a,2),Z=r[0],v=r[1],y=t.useState(!1),C=(0,s.Z)(y,2),A=C[0],b=C[1],w=t.useState(!1),O=(0,s.Z)(w,2),N=O[0],F=O[1],P=t.useState(!1),D=(0,s.Z)(P,2),I=D[0],T=D[1],G=t.useState(!1),B=(0,s.Z)(G,2),_=B[0],M=B[1],K=t.useState({_id:"",appName:"",appDescription:"",appGoogleId:"",defaultAccessProfileOpen:!1,defaultAccessAssetsOpen:!1,usersCanFree:!1}),R=(0,s.Z)(K,2),V=R[0],L=R[1];return(0,S.jsxs)(c.Z,{component:u.Z,style:{margin:"0 auto"},children:[(0,S.jsxs)(f.Z,{style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(h.Z,{variant:"h6",style:{margin:"16px"},children:"Apps"}),(0,S.jsx)(x.Z,{onClick:function(){n.isAgreeWithTerms?v(!0):b(!0)},size:"large",children:(0,S.jsx)(m.Z,{fontSize:"large"})})]}),0===e.length&&(0,S.jsxs)(f.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,S.jsx)(j.Z,{}),(0,S.jsx)(h.Z,{style:{marginTop:"20px",marginBottom:"20px"},children:"You have not created any apps."})]}),e.length>0&&(0,S.jsxs)(i.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,S.jsx)(p.Z,{children:(0,S.jsxs)(d.Z,{children:[(0,S.jsx)(o.Z,{width:200,children:"Application Name"}),(0,S.jsx)(o.Z,{align:"right",children:"Is Assets Open"}),(0,S.jsx)(o.Z,{align:"right",children:"Is Profile Open"}),(0,S.jsx)(o.Z,{align:"right",children:"Is Users Can Free"}),(0,S.jsx)(o.Z,{align:"right",children:"Created"}),(0,S.jsx)(o.Z,{align:"right",children:"Actions"})]})}),(0,S.jsx)(l.Z,{children:e.map((function(e){return(0,S.jsxs)(d.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,S.jsx)(o.Z,{component:"th",scope:"row",children:e.appName}),(0,S.jsx)(o.Z,{align:"right",children:e.defaultAccessAssetsOpen.toString()}),(0,S.jsx)(o.Z,{align:"right",children:e.defaultAccessProfileOpen.toString()}),(0,S.jsx)(o.Z,{align:"right",children:e.usersCanFree.toString()}),(0,S.jsx)(o.Z,{align:"right",children:new Date(e.createdAt).toDateString()}),(0,S.jsx)(o.Z,{align:"right",children:(0,S.jsxs)(f.Z,{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),function(e){L(e),F(!0)}(e)},children:"Delete"}),(0,S.jsx)("a",{href:"data:text/json;chatset=utf-8,".concat(encodeURIComponent(JSON.stringify({appJwt:e.appToken}))),style:{display:"none"},download:"data.json",id:"app-jwt-".concat(e._id),children:"download jwt"}),(0,S.jsx)("a",{href:"/",onClick:function(n){n.preventDefault();var a=document.querySelector("#app-jwt-".concat(e._id));null===a||void 0===a||a.click()},children:"Download App JWT"}),(0,S.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),function(e){L(e),M(!0)}(e)},children:"Rotate App Jwt"}),(0,S.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),function(e){L(e),T(!0)}(e)},children:"Edit"})]})})]},e._id)}))})]}),(0,S.jsx)(k,{open:Z,setOpen:v}),(0,S.jsx)(X,{onClose:function(){return b(!1)},open:A}),(0,S.jsx)(W,{app:V,open:N,setOpen:F}),(0,S.jsx)(U,{app:V,open:_,setOpen:M}),I&&(0,S.jsx)(J,{app:V,open:I,setOpen:T})]})}var ee=a(27669),ne=a(20803);function ae(){return(0,S.jsx)("div",{style:{backgroundColor:"#edf0f4",padding:"20px"},children:(0,S.jsxs)(ne.Z,{maxWidth:"lg",children:[(0,S.jsx)(f.Z,{style:{marginTop:"20px"},children:(0,S.jsx)($,{})}),(0,S.jsx)(f.Z,{style:{marginTop:"20px"},children:(0,S.jsx)(ee.Z,{})})]})})}}}]);
//# sourceMappingURL=246.cf13d3c9.chunk.js.map