"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[246],{29584:function(e,n,t){t.r(n),t.d(n,{default:function(){return re}});var a=t(72791),r=t.t(a,2),s=t(70885),i=t(21680),l=t(19773),o=t(24390),c=t(69963),d=t(9827),p=t(60807),u=t(56650),f=t(50228),h=t(4565),x=t(55152),m=t(13811),g=t(68439),j=t(11210),Z=t(32037),v=t(60788),y=t(40464),C=t(29823),A=t(55705),b=t(59911),w=t(39709),O=t(47409),S=t(72900),N=t(45473),k=t(17205),D=t(80184);function F(e){var n=e.open,t=e.setOpen,r=a.useRef(null),i=(0,j.K)((function(e){return e.setApp})),l=(0,a.useState)(!1),o=(0,s.Z)(l,2),c=o[0],d=o[1],p=(0,a.useState)(""),u=(0,s.Z)(p,2),h=u[0],x=u[1],g=(0,A.TA)({initialValues:{appName:"",appDescription:"",appGoogleId:"",defaultAccessProfileOpen:!1,defaultAccessAssetsOpen:!1,usersCanFree:!1,newUserTokenGift:0,coinsDayliBonus:0},validate:function(e){var n={};return e.appName||(n.appName="Required"),n},onSubmit:function(e){var n=e.appName,a=e.appDescription,s=e.appGoogleId,l=e.defaultAccessAssetsOpen,o=e.defaultAccessProfileOpen,c=e.usersCanFree;d(!0);var p,u=new FormData;if(r.current){var f=r.current.files;f&&(p=f[0])}p&&u.append("file",p),u.append("appName",n),u.append("appDescription",a),u.append("appGoogleId",s),u.append("defaultAccessAssetsOpen",l.toString()),u.append("defaultAccessProfileOpen",o.toString()),u.append("usersCanFree",c.toString()),O.ri(u).then((function(e){i(e.data.app),t(!1)})).finally((function(){return d(!1)}))}});return(0,D.jsx)(v.Z,{onClose:function(){t(!1),x("")},open:n,children:(0,D.jsxs)(f.Z,{sx:{padding:1,minWidth:500},children:[(0,D.jsx)(m.Z,{sx:{position:"absolute",top:0,right:0},disabled:c,onClick:function(){return t(!1)},children:(0,D.jsx)(C.Z,{})}),(0,D.jsx)(y.Z,{sx:{padding:1},children:"New App"}),(0,D.jsx)(f.Z,{sx:{width:"100%",padding:1},children:(0,D.jsxs)("form",{onSubmit:g.handleSubmit,style:{width:"100%"},children:[(0,D.jsx)(f.Z,{children:(0,D.jsx)(b.Z,{sx:{width:"100%"},error:!!g.touched.appName&&!!g.errors.appName,margin:"dense",label:"App Name",name:"appName",variant:"outlined",onChange:g.handleChange,onBlur:g.handleBlur,value:g.values.appName})}),(0,D.jsx)(f.Z,{children:(0,D.jsx)(b.Z,{sx:{width:"100%"},margin:"dense",label:"Google Client Id",name:"appGoogleId",variant:"outlined",onChange:g.handleChange,onBlur:g.handleBlur,value:g.values.appGoogleId})}),(0,D.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[(0,D.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,D.jsx)(S.Z,{checked:g.values.defaultAccessProfileOpen,name:"Default Access Profile Open",control:(0,D.jsx)(N.Z,{onChange:function(e){return g.setFieldValue("defaultAccessProfileOpen",e.target.checked)}}),label:"Default Access Profile Open",labelPlacement:"end",onChange:g.handleChange}),(0,D.jsx)(S.Z,{checked:g.values.defaultAccessAssetsOpen,name:"Default Access Assets Open",control:(0,D.jsx)(N.Z,{onChange:function(e){return g.setFieldValue("defaultAccessAssetsOpen",e.target.checked)}}),label:"Default Access Assets Open",labelPlacement:"end"}),(0,D.jsx)(S.Z,{checked:g.values.usersCanFree,name:"Users can free",control:(0,D.jsx)(N.Z,{onChange:function(e){return g.setFieldValue("usersCanFree",e.target.checked)}}),label:"Users can free",labelPlacement:"end"})]}),(0,D.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,D.jsx)("input",{onChange:function(e){var n=e.target;if(n.files){var t=new FileReader;t.onload=function(e){var n;e&&(null!==(n=e.target)&&void 0!==n&&n.result&&x(e.target.result))},t.readAsDataURL(n.files[0])}},ref:r,type:"file",accept:"image/*",style:{display:"none"}}),h?(0,D.jsx)(f.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",cursor:"pointer"},onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.click()},children:(0,D.jsx)("img",{src:h,style:{width:200,height:"100%",objectFit:"cover",borderRadius:10},alt:"test"})}):(0,D.jsx)(k.Z,{variant:"text",onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.click()},children:"upload image"})]})]}),(0,D.jsx)(w.Z,{loading:c,variant:"contained",style:{marginTop:"15px",width:"100%"},type:"submit",disabled:c,children:"Create App"})]})})]})})}var P=t(77248),I=t(8440),T=t(39571),G=t(69120),B=t(33073),R=t(93026);function _(e,n,t,r,i){var l="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,o=a.useState((function(){return i&&l?t(e).matches:r?r(e).matches:n})),c=(0,s.Z)(o,2),d=c[0],p=c[1];return(0,R.Z)((function(){var n=!0;if(l){var a=t(e),r=function(){n&&p(a.matches)};return r(),a.addListener(r),function(){n=!1,a.removeListener(r)}}}),[e,t,l]),d}var K=r.useSyncExternalStore;function M(e,n,t,r){var i=a.useCallback((function(){return n}),[n]),l=a.useMemo((function(){if(null!==r){var n=r(e).matches;return function(){return n}}return i}),[i,e,r]),o=a.useMemo((function(){if(null===t)return[i,function(){return function(){}}];var n=t(e);return[function(){return n.matches},function(e){return n.addListener(e),function(){n.removeListener(e)}}]}),[i,t,e]),c=(0,s.Z)(o,2),d=c[0],p=c[1];return K(p,d,l)}function W(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,G.Z)(),a="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,r=(0,B.Z)({name:"MuiUseMediaQuery",props:n,theme:t}),s=r.defaultMatches,i=void 0!==s&&s,l=r.matchMedia,o=void 0===l?a?window.matchMedia:null:l,c=r.ssrMatchMedia,d=void 0===c?null:c,p=r.noSsr;var u="function"===typeof e?e(t):e;u=u.replace(/^@media( ?)/m,"");var f=void 0!==K?M:_,h=f(u,i,o,d,p);return h}var U=t(74142);function V(e){var n,t=a.useState(!1),r=(0,s.Z)(t,2),i=r[0],l=r[1],o=(0,j.K)((function(e){return e.deleteApp})),c=W((0,U.Z)().breakpoints.down("md"));return(0,D.jsx)("div",{children:(0,D.jsxs)(v.Z,{fullScreen:c,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"responsive-dialog-title",children:[(0,D.jsxs)(y.Z,{id:"responsive-dialog-title",children:["Are you sure want to remove application ",null===(n=e.app)||void 0===n?void 0:n.appName]}),(0,D.jsx)(I.Z,{children:(0,D.jsx)(T.Z,{children:"Your app clients(mobile, web) will not be able to send requests to Platform API after deleting the app"})}),(0,D.jsxs)(P.Z,{children:[(0,D.jsx)(k.Z,{disabled:i,variant:"contained",autoFocus:!0,onClick:function(){return e.setOpen(!1)},children:"Cancel"}),(0,D.jsx)(w.Z,{variant:"contained",loading:i,color:"error",onClick:function(){var n;e.app&&null!==(n=e.app)&&void 0!==n&&n._id&&(l(!0),O.P2(e.app._id).then((function(){var n;o(null===(n=e.app)||void 0===n?void 0:n._id),e.setOpen(!1)})).finally((function(){return l(!1)})))},autoFocus:!0,children:"Delete"})]})]})})}function J(e){var n=e.open,t=e.setOpen,r=e.app,i=a.useRef(null),l=(0,a.useState)(!1),o=(0,s.Z)(l,2),c=o[0],d=o[1],p=(0,j.K)((function(e){return e.updateApp})),u=(0,A.TA)({initialValues:{appName:r.appName,appDescription:r.appDescription?r.appDescription:"",appGoogleId:r.appGoogleId?r.appGoogleId:"",defaultAccessProfileOpen:r.defaultAccessProfileOpen,defaultAccessAssetsOpen:r.defaultAccessAssetsOpen,usersCanFree:r.usersCanFree},validate:function(e){var n={};return e.appName||(n.appName="Required"),n},onSubmit:function(e){var n=e.appName,a=e.appDescription,s=e.appGoogleId,l=e.defaultAccessAssetsOpen,o=e.defaultAccessProfileOpen,c=e.usersCanFree;d(!0);var u,f=new FormData;if(i.current){var h=i.current.files;h&&(u=h[0])}u&&f.append("file",u),f.append("appName",n),f.append("appDesctription",a),f.append("appGoogleId",s),f.append("defaultAccessAssetsOpen",l.toString()),f.append("defaultAccessProfileOpen",o.toString()),f.append("usersCanFree",c.toString()),O.KT(r._id,f).then((function(e){p(e.data.app),t(!1)})).finally((function(){return d(!1)}))}});return(0,D.jsx)(v.Z,{onClose:function(){return t(!1)},open:n,children:(0,D.jsxs)(f.Z,{children:[(0,D.jsxs)(y.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Edit App",(0,D.jsx)(m.Z,{disabled:c,onClick:function(){return t(!1)},children:(0,D.jsx)(C.Z,{})})]}),(0,D.jsx)(f.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,D.jsxs)("form",{onSubmit:u.handleSubmit,children:[(0,D.jsx)(f.Z,{children:(0,D.jsx)(b.Z,{error:!(!u.touched.appName||!u.errors.appName),helperText:u.touched.appName&&u.errors.appName?u.errors.appName:"",margin:"dense",label:"App Name",name:"appName",variant:"standard",onChange:u.handleChange,onBlur:u.handleBlur,value:u.values.appName})}),(0,D.jsx)(f.Z,{children:(0,D.jsx)(b.Z,{margin:"dense",label:"Google Client Id",name:"appGoogleId",variant:"standard",onChange:u.handleChange,onBlur:u.handleBlur,value:u.values.appGoogleId})}),(0,D.jsxs)(f.Z,{style:{display:"inline-flex",flexDirection:"column"},children:[(0,D.jsx)(S.Z,{checked:u.values.defaultAccessProfileOpen,name:"defaultAccessProfileOpen",control:(0,D.jsx)(N.Z,{onChange:function(e){return u.setFieldValue("defaultAccessProfileOpen",e.target.checked)}}),label:"defaultAccessProfileOpen",labelPlacement:"end",onChange:u.handleChange}),(0,D.jsx)(S.Z,{checked:u.values.defaultAccessAssetsOpen,name:"defaultAccessAssetsOpen",control:(0,D.jsx)(N.Z,{onChange:function(e){return u.setFieldValue("defaultAccessAssetsOpen",e.target.checked)}}),label:"defaultAccessAssetsOpen",labelPlacement:"end"}),(0,D.jsx)(S.Z,{checked:u.values.usersCanFree,name:"usersCanFree",control:(0,D.jsx)(N.Z,{onChange:function(e){return u.setFieldValue("usersCanFree",e.target.checked)}}),label:"usersCanFree",labelPlacement:"end"}),(0,D.jsx)("input",{ref:i,type:"file",accept:"image/*"}),(0,D.jsx)(w.Z,{loading:c,variant:"contained",style:{marginTop:"15px"},type:"submit",children:"Update App"})]})]})})]})})}function L(e){var n,t=a.useState(!1),r=(0,s.Z)(t,2),i=r[0],l=r[1],o=(0,j.K)((function(e){return e.updateApp})),c=W((0,U.Z)().breakpoints.down("md"));return(0,D.jsx)("div",{children:(0,D.jsxs)(v.Z,{fullScreen:c,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"responsive-dialog-title",children:[(0,D.jsxs)(y.Z,{id:"responsive-dialog-title",children:["Are you sure want to rotate JWT for application ",null===(n=e.app)||void 0===n?void 0:n.appName]}),(0,D.jsx)(I.Z,{children:(0,D.jsx)(T.Z,{children:"You will need to update your app clients(mobile, web) with new App Jwt"})}),(0,D.jsxs)(P.Z,{children:[(0,D.jsx)(k.Z,{disabled:i,variant:"contained",autoFocus:!0,onClick:function(){return e.setOpen(!1)},children:"Cancel"}),(0,D.jsx)(w.Z,{variant:"contained",loading:i,color:"error",onClick:function(){var n;e.app&&null!==(n=e.app)&&void 0!==n&&n._id&&(l(!0),O.oK(e.app._id).then((function(n){o(n.data.app),e.setOpen(!1)})).finally((function(){return l(!1)})))},autoFocus:!0,children:"Rotate"})]})]})})}var q=t(74165),Y=t(1413),z=t(15861),E=t(54871),Q=t(81508),H=t(55137),X=t(52775),$=function(e){var n=e.open,t=e.onClose,r=e.afterSubmit,i=(0,j.K)((function(e){return e.user})),l=(0,j.K)((function(e){return e.setUser})),o=(0,a.useState)(!1),c=(0,s.Z)(o,2),d=c[0],p=c[1],u=(0,a.useState)(!1),h=(0,s.Z)(u,2),x=h[0],g=h[1],Z=(0,X.D)().showSnackbar,k=(0,a.useState)(!1),F=(0,s.Z)(k,2),P=F[0],I=F[1],T=(0,a.useState)(""),G=(0,s.Z)(T,2),B=G[0],R=(G[1],(0,A.TA)({initialValues:{companyName:""},onSubmit:function(){var e=(0,z.Z)((0,q.Z)().mark((function e(n){var a;return(0,q.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.companyName,I(!0),e.prev=2,e.next=5,(0,O.jR)(a);case 5:e.sent,l((0,Y.Z)((0,Y.Z)({},i),{},{isAgreeWithTerms:!0})),t(),r(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),Z("error","Something went wrong");case 15:I(!1);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}()}));return(0,D.jsxs)(v.Z,{onClose:t,maxWidth:!1,open:n,children:[(0,D.jsxs)(f.Z,{style:{width:"400px"},children:[(0,D.jsx)(m.Z,{sx:{position:"absolute",top:0,right:0},disabled:P,onClick:t,children:(0,D.jsx)(C.Z,{})}),(0,D.jsx)(y.Z,{sx:{display:"flex",justifyContent:"space-between",paddingLeft:1},children:"Owner Registration"}),(0,D.jsx)(f.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,D.jsxs)("form",{onSubmit:R.handleSubmit,children:[(0,D.jsx)(b.Z,{margin:"dense",label:"Company Name",name:"companyName",type:"text",fullWidth:!0,inputProps:{autoComplete:"off"},variant:"standard",onChange:R.handleChange,onBlur:R.handleBlur,error:R.touched.companyName&&Boolean(R.errors.companyName),helperText:R.touched.companyName&&R.errors.companyName?R.errors.companyName:""}),(0,D.jsx)(E.Z,{children:(0,D.jsx)(S.Z,{value:"I agree to the terms and conditions",control:(0,D.jsx)(N.Z,{checked:x,onChange:function(e){return g(e.target.checked)}}),label:"I agree to the terms and conditions",labelPlacement:"end"})}),!!B&&(0,D.jsx)(Q.Z,{severity:"error",children:B}),(0,D.jsx)(f.Z,{sx:{margin:2,display:"flex",justifyContent:"center"},children:(0,D.jsx)(w.Z,{loading:P,variant:"contained",type:"submit",disabled:P||!x,children:"Register"})})]})})]}),(0,D.jsx)(v.Z,{onClose:function(){return p(!1)},maxWidth:!1,open:d,children:(0,D.jsx)(f.Z,{sx:{width:800},children:(0,D.jsx)(H.Z,{setTermsOpen:function(e){return p(e)},firstName:i.firstName,lastName:i.lastName,email:i.lastName,company:"company"})})})]})},ee=t(68438);function ne(){var e=(0,j.K)((function(e){return e.apps})),n=(0,j.K)((function(e){return e.user})),t=(0,a.useState)(!1),r=(0,s.Z)(t,2),v=r[0],y=r[1],C=(0,a.useState)(!1),A=(0,s.Z)(C,2),b=A[0],w=A[1],O=+(0,j.K)((function(e){return e.balance.find((function(e){return e.tokenName===ee.zl}))})).balance>=1e4,S=(0,a.useState)(!1),N=(0,s.Z)(S,2),k=N[0],P=N[1],I=(0,a.useState)(!1),T=(0,s.Z)(I,2),G=T[0],B=T[1],R=(0,a.useState)(!1),_=(0,s.Z)(R,2),K=_[0],M=_[1],W=(0,a.useState)({_id:"",appName:"",appDescription:"",appGoogleId:"",defaultAccessProfileOpen:!1,defaultAccessAssetsOpen:!1,usersCanFree:!1}),U=(0,s.Z)(W,2),q=U[0],Y=U[1];return(0,D.jsxs)(c.Z,{component:u.Z,style:{margin:"0 auto"},children:[(0,D.jsxs)(f.Z,{style:{display:"flex",alignItems:"center"},children:[(0,D.jsx)(h.Z,{variant:"h6",style:{margin:"16px"},children:"Apps"}),(0,D.jsx)(x.Z,{title:O?"":"You don't have enough coins to create the app.",children:(0,D.jsx)("span",{children:(0,D.jsx)(m.Z,{disabled:O,onClick:function(){n.isAgreeWithTerms?y(!0):w(!0)},size:"large",children:(0,D.jsx)(g.Z,{fontSize:"large"})})})})]}),0===e.length&&(0,D.jsxs)(f.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,D.jsx)(Z.Z,{}),(0,D.jsx)(h.Z,{style:{marginTop:"20px",marginBottom:"20px"},children:"You have not created any apps."})]}),e.length>0&&(0,D.jsxs)(i.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,D.jsx)(d.Z,{children:(0,D.jsxs)(p.Z,{children:[(0,D.jsx)(o.Z,{width:200,children:"Application Name"}),(0,D.jsx)(o.Z,{align:"right",children:"Is Assets Open"}),(0,D.jsx)(o.Z,{align:"right",children:"Is Profile Open"}),(0,D.jsx)(o.Z,{align:"right",children:"Is Users Can Free"}),(0,D.jsx)(o.Z,{align:"right",children:"Created"}),(0,D.jsx)(o.Z,{align:"right",children:"Actions"})]})}),(0,D.jsx)(l.Z,{children:e.map((function(e){return(0,D.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,D.jsx)(o.Z,{component:"th",scope:"row",children:e.appName}),(0,D.jsx)(o.Z,{align:"right",children:e.defaultAccessAssetsOpen.toString()}),(0,D.jsx)(o.Z,{align:"right",children:e.defaultAccessProfileOpen.toString()}),(0,D.jsx)(o.Z,{align:"right",children:e.usersCanFree.toString()}),(0,D.jsx)(o.Z,{align:"right",children:new Date(e.createdAt).toDateString()}),(0,D.jsx)(o.Z,{align:"right",children:(0,D.jsxs)(f.Z,{style:{display:"flex",flexDirection:"column"},children:[(0,D.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),function(e){Y(e),P(!0)}(e)},children:"Delete"}),(0,D.jsx)("a",{href:"data:text/json;chatset=utf-8,".concat(encodeURIComponent(JSON.stringify({appJwt:e.appToken}))),style:{display:"none"},download:"data.json",id:"app-jwt-".concat(e._id),children:"download jwt"}),(0,D.jsx)("a",{href:"/",onClick:function(n){n.preventDefault();var t=document.querySelector("#app-jwt-".concat(e._id));null===t||void 0===t||t.click()},children:"Download App JWT"}),(0,D.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),function(e){Y(e),M(!0)}(e)},children:"Rotate App Jwt"}),(0,D.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),function(e){Y(e),B(!0)}(e)},children:"Edit"})]})})]},e._id)}))})]}),(0,D.jsx)(F,{open:v,setOpen:y}),(0,D.jsx)($,{onClose:function(){return w(!1)},open:b,afterSubmit:function(){return y(!0)}}),(0,D.jsx)(V,{app:q,open:k,setOpen:P}),(0,D.jsx)(L,{app:q,open:K,setOpen:M}),G&&(0,D.jsx)(J,{app:q,open:G,setOpen:B})]})}var te=t(27669),ae=t(20803);function re(){return(0,D.jsx)("div",{style:{backgroundColor:"#edf0f4",padding:"20px"},children:(0,D.jsxs)(ae.Z,{maxWidth:"lg",children:[(0,D.jsx)(f.Z,{style:{marginTop:"20px"},children:(0,D.jsx)(ne,{})}),(0,D.jsx)(f.Z,{style:{marginTop:"20px"},children:(0,D.jsx)(te.Z,{})})]})})}}}]);
//# sourceMappingURL=246.67ebc6d3.chunk.js.map