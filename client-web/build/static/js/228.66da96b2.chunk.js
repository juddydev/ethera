"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[228],{59715:function(e,n,t){t.d(n,{A:function(){return d}});t(72791);var o=t(17205),i=t(60788),r=t(77248),l=t(8440),s=t(39571),a=t(40464),c=t(80184);function d(e){var n=e.open,t=e.onClose,d=e.onDeletePress,u=e.loading,f=e.title,h=e.description,p=e.deleteButtonTitle,x=e.cancelButtonTitle;return(0,c.jsxs)(i.Z,{open:n,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,c.jsx)(a.Z,{id:"alert-dialog-title",children:f}),(0,c.jsx)(l.Z,{children:(0,c.jsx)(s.Z,{id:"alert-dialog-description",children:h})}),(0,c.jsxs)(r.Z,{children:[(0,c.jsx)(o.Z,{disabled:u,onClick:t,children:x||"Cancel"}),(0,c.jsx)(o.Z,{disabled:u,onClick:d,autoFocus:!0,color:"error",children:p||"Delete"})]})]})}},61228:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var o=t(72791),i=t(20803),r=t(74165),l=t(15861),s=t(70885),a=t(50228),c=t(4565),d=t(13811),u=t(64880),f=t(11210),h=t(8343),p=t(41286),x=t(59715),m=t(91803),j=t(59911),Z=t(17205),v=t(80184),b={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,justifyContent:"center",display:"flex",flexDirection:"column",borderRadius:"10px"};function g(e){var n=e.title,t=e.open,o=e.onClose,i=e.onChange,r=e.onSubmit;return(0,v.jsx)(m.Z,{open:t,onClose:o,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,v.jsxs)(a.Z,{sx:b,children:[(0,v.jsx)(c.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:n}),(0,v.jsx)(j.Z,{onChange:function(e){return i(e.target.value)},margin:"normal",id:"outlined-basic",label:"Enter new info here",variant:"outlined"}),(0,v.jsx)(Z.Z,{onClick:r,style:{justifyContent:"center",alignItems:"center",display:"flex"},variant:"contained",children:(0,v.jsx)(c.Z,{id:"modal-modal-description",children:"Submit"})})]})})}var C=t(96580),y=t(73978),w=t(75426),k=t(60340),I=t(68438),S=t(27247),D=t(50705),R=t(52775),z=t(21176);function L(e){var n,t=e.roomJID,i=e.onDeleteRoomClick,p=(0,f.K)((function(e){return e.userChatRooms})).find((function(e){return(null===e||void 0===e?void 0:e.jid)===t})),x=(0,f.K)((function(e){return e.updateUserChatRoom})),m=(0,f.K)((function(e){return e.roomRoles})),j=(0,R.D)().showSnackbar,Z=null===(n=m.find((function(e){return e.roomJID===(null===p||void 0===p?void 0:p.jid)})))||void 0===n?void 0:n.role,b=(0,o.useRef)(null),g=(0,o.useState)(!1),L=(0,s.Z)(g,2),M=L[0],P=L[1],_=(0,u.k6)(),K=p&&(p.group===I.hx.official||p.group===I.hx.favourite),J="moderator"===Z||"owner"===Z||"admin"===Z,A=function(e){var n=Object.assign({},p);n.group=e,x(n)},U=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(n){var o,i,l,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("files",n),P("chatIcon"),e.prev=3,e.next=6,(0,z.cT)(o);case 6:i=e.sent,l=t.split("@")[0],h.Z.setRoomImage(l,i.data.results[0].location,p.room_background,"icon"),(s=Object.assign({},p)).room_thumbnail=i.data.results[0].location,x(s),j("success","Success! The chat icon was set"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0),j("error","An error occurred while loading the image.  ( "+e.t0.message+" "+e.t0.response.data+" )");case 19:P(!1);case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsx)("div",{style:{cursor:"pointer"},children:(0,v.jsxs)(a.Z,{sx:{width:200,height:200,margin:5,backgroundColor:"primary.dark",justifyContent:"center",alignItems:"center",display:"flex",borderRadius:"10px",position:"relative"},children:[(0,v.jsxs)(a.Z,{sx:{position:"absolute",top:0,right:0,display:"flex",flexDirection:"column",zIndex:99999},children:[(0,v.jsx)(d.Z,{sx:{color:"white"},onClick:function(){return A(K?"":I.hx.favourite)},children:K?(0,v.jsx)(k.Z,{}):(0,v.jsx)(w.Z,{})}),J&&(0,v.jsxs)(d.Z,{sx:{color:"white"},onClick:function(){var e;return null===(e=b.current)||void 0===e?void 0:e.click()},children:[(0,v.jsx)("input",{type:"file",name:"file",id:"file",onChange:function(e){return U(e.target.files[0])},ref:b,style:{display:"none"},accept:"image/*"}),"chatIcon"===M?(0,v.jsx)(C.Z,{style:{color:"white"},size:24}):(0,v.jsx)(D.Z,{})]}),J&&(0,v.jsx)(d.Z,{sx:{color:"red"},onClick:i,children:(0,v.jsx)(S.Z,{})})]}),(0,v.jsx)(d.Z,{disableRipple:!0,onClick:function(e){J&&_.push("/changebg/"+t)},children:null!==p&&void 0!==p&&p.room_thumbnail&&"none"!==(null===p||void 0===p?void 0:p.room_thumbnail)?(0,v.jsx)(y.Z,{sx:{width:200,height:200,borderRadius:"10px"},variant:"square",src:p.room_thumbnail}):(0,v.jsx)(c.Z,{color:"white",fontSize:"120px",children:null===p||void 0===p?void 0:p.name[0]})})]})})}function M(){var e,n=(0,u.UO)().roomJID,t=(0,o.useState)(""),m=(0,s.Z)(t,2),j=m[0],Z=m[1],b=(0,o.useState)(""),C=(0,s.Z)(b,2),y=C[0],w=C[1],k=(0,o.useState)(!1),I=(0,s.Z)(k,2),S=I[0],D=I[1],R=(0,o.useState)(!1),z=(0,s.Z)(R,2),M=z[0],P=z[1],_=(0,o.useState)(!1),K=(0,s.Z)(_,2),J=K[0],A=K[1],U=(0,f.K)((function(e){return e.userChatRooms})).find((function(e){return(null===e||void 0===e?void 0:e.jid)===n})),T=(0,f.K)((function(e){return e.roomRoles})),E=(0,u.k6)(),N=null===(e=T.find((function(e){return e.roomJID===(null===U||void 0===U?void 0:U.jid)})))||void 0===e?void 0:e.role,O="moderator"===N||"owner"===N||"admin"===N,H=function(){P(!1)},W=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.Z.leaveTheRoom(n),h.Z.unsubscribe(n),H(),E.push("/chat/none");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)(i.Z,{style:{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,v.jsx)(L,{roomJID:n,onDeleteRoomClick:function(){return P(!0)}}),(0,v.jsxs)(a.Z,{flexDirection:"row",display:"flex",children:[(0,v.jsx)(c.Z,{fontSize:"20px",fontWeight:"bold",children:null===U||void 0===U?void 0:U.name}),O&&(0,v.jsx)(d.Z,{onClick:function(){return A(!0)},style:{marginLeft:10},children:(0,v.jsx)(p.Z,{fontSize:"small"})})]}),(0,v.jsxs)(i.Z,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center",display:"flex"},children:[(0,v.jsx)(c.Z,{fontSize:"20px",children:null!==U&&void 0!==U&&U.description?U.description:"No description"}),O&&(0,v.jsx)(d.Z,{onClick:function(){return D(!0)},style:{marginLeft:10},children:(0,v.jsx)(p.Z,{fontSize:"small"})})]}),(0,v.jsx)(g,{title:"Set New Chat Name",open:J,onClose:function(){return A(!1)},onChange:w,onSubmit:function(){A(!1),function(e){h.Z.changeRoomName(n,e)}(y)}}),(0,v.jsx)(g,{title:"Set New Chat Description",open:S,onClose:function(){return D(!1)},onChange:Z,onSubmit:function(){D(!1),function(e){h.Z.changeRoomDescription(n,e)}(j)}}),(0,v.jsx)(x.A,{open:M,title:"Delete",description:"Do you want to delete this room?",onDeletePress:W,onClose:H})]})}var P=t(45629),_=t(76132),K=t(16992),J=t(70324),A=t(52898),U=t(28741);function T(){var e,n=(0,u.UO)().roomJID,t=(0,f.K)((function(e){return e.userChatRooms})),i=(0,f.K)((function(e){return e.roomMemberInfo.filter((function(e){return"none"!==e.name}))})),r=(0,f.K)((function(e){return e.user})),l=t.find((function(e){return(null===e||void 0===e?void 0:e.jid)===n})),p=(0,o.useState)(!1),x=(0,s.Z)(p,2),m=x[0],j=x[1],Z=(0,o.useState)(),b=(0,s.Z)(Z,2),g=(b[0],b[1]),C=(0,o.useState)(null),w=(0,s.Z)(C,2),k=w[0],I=w[1],S=(0,f.K)((function(e){return e.roomRoles})),D=(0,u.k6)(),R=null===(e=S.find((function(e){return e.roomJID===(null===l||void 0===l?void 0:l.jid)})))||void 0===e?void 0:e.role,z=function(e){e.stopPropagation(),I(null),j(!1)};return(0,v.jsxs)(a.Z,{children:[(0,v.jsxs)(c.Z,{variant:"h5",children:["Members (",i.length,")"]}),(0,v.jsx)(P.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:i.map((function(e){return(0,v.jsxs)(_.ZP,{dense:!0,onClick:function(){return function(e){e.jid.includes((0,U.I)(r.walletAddress))?D.push("/profile/"+r.walletAddress):D.push("/profile/"+(0,U.$)(e.jid.split("@")[0]))}(e)},style:{flexDirection:"row",alignItems:"center"},children:[(0,v.jsx)(a.Z,{alignItems:"center",justifyContent:"center",style:{background:"#003E9C",width:"40px",height:"40px",margin:5,display:"flex"},children:"none"!==e.profile?(0,v.jsx)(y.Z,{style:{width:"40px",height:"40px"},variant:"square",src:e.profile}):(0,v.jsx)(c.Z,{style:{color:"white"},children:e.name?e.name[0]:null})}),(0,v.jsx)(c.Z,{children:e.jid.includes((0,U.I)(r.walletAddress))?"You":e.name}),!e.jid.includes((0,U.I)(r.walletAddress))&&("moderator"===R||"owner"===R)&&(0,v.jsx)(d.Z,{"aria-label":"more",id:"long-button","aria-haspopup":"true",onClick:function(n){return function(e,n){e.stopPropagation(),g(n),I(e.currentTarget),j(!0)}(n,e)},children:(0,v.jsx)(A.Z,{})}),"owner"===e.role&&(0,v.jsx)(a.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,v.jsx)(c.Z,{children:e.role})}),"clear"!==e.ban_status?(0,v.jsx)(a.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,v.jsx)(c.Z,{children:"banned"})}):null,(0,v.jsx)(K.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:k,open:m,onClose:z,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:(0,v.jsx)(J.Z,{onClick:function(n){return function(e,n){"clear"===e.ban_status?h.Z.banUserStanza(e.jid,l.jid):h.Z.unbanUserStanza(e.jid,l.jid),h.Z.getRoomMemberInfo(l.jid),z(n)}(e,n)},children:"clear"===(null===e||void 0===e?void 0:e.ban_status)?"Ban":"Unban"})})]},e.jid)}))})]})}function E(){var e=(0,u.UO)().roomJID;return(0,o.useEffect)((function(){h.Z.getRoomMemberInfo(e),h.Z.getRoomInfo(e)}),[]),(0,v.jsxs)(i.Z,{maxWidth:"xl",children:[(0,v.jsx)(M,{}),(0,v.jsx)(T,{})]})}},41286:function(e,n,t){var o=t(64836);n.Z=void 0;var i=o(t(45649)),r=t(80184),l=(0,i.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=l},50705:function(e,n,t){var o=t(64836);n.Z=void 0;var i=o(t(45649)),r=t(80184),l=(0,i.default)((0,r.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}),"InsertPhoto");n.Z=l},75426:function(e,n,t){var o=t(64836);n.Z=void 0;var i=o(t(45649)),r=t(80184),l=(0,i.default)((0,r.jsx)("path",{d:"m12 8.89.94 3.11h2.82l-2.27 1.62.93 3.01L12 14.79l-2.42 1.84.93-3.01L8.24 12h2.82L12 8.89M12 2l-2.42 8H2l6.17 4.41L5.83 22 12 17.31 18.18 22l-2.35-7.59L22 10h-7.58L12 2z"}),"StarPurple500");n.Z=l}}]);
//# sourceMappingURL=228.66da96b2.chunk.js.map