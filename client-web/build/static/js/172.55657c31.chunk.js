"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[172],{54572:function(e,n,t){t.d(n,{v:function(){return D}});var r=t(4942),i=t(74165),a=t(15861),l=t(70885),o=t(1413),s=t(72791),d=t(21680),u=t(19773),c=t(24390),p=t(69963),f=t(9827),v=t(60807),h=t(56650),Z=t(45473),m=t(4565),x=t(17205),g=t(21176),j=t(52791),b=t(45100),w=t(11210),C=t(52775),N=t(80184),k={inputProps:{"aria-label":"Checkbox"}},y=function(e,n){return!!e&&!!e.find((function(e){return e===n}))},S=function(e){return!!e&&!!Object.entries(e).find((function(e){return"admin"===e[0]&&!!e[1]}))},A=function(e){var n=e.name,t=e.row,r=e.onChange,i=e.disableAllRow,a=(0,w.K)((function(e){var n,t;return null===(n=e.user)||void 0===n||null===(t=n.ACL)||void 0===t?void 0:t.ownerAccess}));return(0,N.jsxs)(v.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,N.jsx)(c.Z,{component:"th",scope:"row",children:n}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===t||void 0===t?void 0:t.disabled,"create")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({checked:null===t||void 0===t?void 0:t.create,name:"create",disabled:(y(null===t||void 0===t?void 0:t.disabled,"create")||i)&&!a,onChange:function(e){return r(e,n)}},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===t||void 0===t?void 0:t.disabled,"read")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({name:"read",onChange:function(e){return r(e,n)},disabled:y(null===t||void 0===t?void 0:t.disabled,"read")||i,checked:null===t||void 0===t?void 0:t.read},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===t||void 0===t?void 0:t.disabled,"update")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({name:"update",onChange:function(e){return r(e,n)},disabled:y(null===t||void 0===t?void 0:t.disabled,"update")||i,checked:null===t||void 0===t?void 0:t.update},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===t||void 0===t?void 0:t.disabled,"delete")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({name:"delete",onChange:function(e){return r(e,n)},disabled:y(null===t||void 0===t?void 0:t.disabled,"delete")||i,checked:null===t||void 0===t?void 0:t.delete},k))}),(0,N.jsx)(c.Z,{style:{backgroundColor:y(null===t||void 0===t?void 0:t.disabled,"admin")?"lightgrey":"white"},align:"left",children:(0,N.jsx)(Z.Z,(0,o.Z)({name:"admin",onChange:function(e){return r(e,n)},disabled:y(null===t||void 0===t?void 0:t.disabled,"admin")||i,checked:null===t||void 0===t?void 0:t.admin},k))})]})},D=function(e){var n=e.updateData,t=(e.onAclError,e.user),Z=(0,s.useState)({result:t.acl}),k=(0,l.Z)(Z,2),y=k[0],D=k[1],R=(0,s.useState)([]),M=(0,l.Z)(R,2),T=M[0],O=M[1],L=(0,s.useState)([]),B=(0,l.Z)(L,2),z=B[0],U=B[1],W={result:(0,w.K)((function(e){return e.ACL.result.find((function(e){var n;return e.appId===(null===y||void 0===y||null===(n=y.result)||void 0===n?void 0:n.appId)}))}))},F=(0,s.useState)(!1),P=(0,l.Z)(F,2),I=P[0],E=P[1],J=(0,C.D)().showSnackbar,K=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D({result:t.acl}),n=Object.keys(y.result.application),r=Object.keys(y.result.network),O(n),U(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e,n){D((function(t){return{result:(0,o.Z)((0,o.Z)({},t.result),{},{application:(0,o.Z)((0,o.Z)({},t.result.application),{},(0,r.Z)({},n,(0,o.Z)((0,o.Z)({},t.result.application[n]),{},(0,r.Z)({},e.target.name,e.target.checked))))})}}))},q=function(e,n){D((function(n){return{result:(0,o.Z)((0,o.Z)({},n.result),{},{network:(0,o.Z)((0,o.Z)({},n.result.network),{},{netStats:(0,o.Z)((0,o.Z)({},n.result.network.netStats),{},(0,r.Z)({},e.target.name,e.target.checked))})})}}))},H=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var r,a,l,o,s,d,u,c,p,f,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),r=JSON.parse(JSON.stringify(y.result.application)),a=JSON.parse(JSON.stringify(y.result.network)),e.prev=3,l=Object.fromEntries(Object.entries(r).map((function(e){return delete e[1].disabled,e}))),o=Object.fromEntries(Object.entries(a).map((function(e){return delete e[1].disabled,e}))),s={application:l,network:o},e.next=9,(0,g.eU)(t._id,t.appId,s);case 9:d=e.sent,u=d.data,n&&n(u),J("success","ACL updated successfully"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),J("error","Cannot change ACL "+(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(p=c.data)||void 0===p||null===(f=p.error)||void 0===f||null===(v=f.details[0])||void 0===v?void 0:v.message)||0),console.log(e.t0);case 19:E(!1);case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){t&&K()}),[t]),I?(0,N.jsx)(b.A,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.Z,{marginBottom:"10px",fontWeight:"bold",children:"Applications"}),(0,N.jsx)(p.Z,{component:h.Z,children:(0,N.jsxs)(d.Z,{size:"small",sx:{minWidth:650},"aria-label":"simple table",children:[(0,N.jsx)(f.Z,{children:(0,N.jsxs)(v.Z,{children:[(0,N.jsx)(c.Z,{children:"Name"}),(0,N.jsx)(c.Z,{children:"Create"}),(0,N.jsx)(c.Z,{align:"left",children:"Read"}),(0,N.jsx)(c.Z,{align:"left",children:"Update"}),(0,N.jsx)(c.Z,{align:"left",children:"Delete"}),(0,N.jsx)(c.Z,{align:"left",children:"Admin"})]})}),(0,N.jsx)(u.Z,{children:W.result&&T.map((function(e){var n=y.result.application[e],t=W.result.application[e];return(0,N.jsx)(A,{disableAllRow:!S(t),onChange:_,name:e,row:n},e)}))})]})}),(0,N.jsx)(m.Z,{marginBottom:"10px",marginTop:"10px",fontWeight:"bold",children:"Networks"}),(0,N.jsx)(p.Z,{component:h.Z,children:(0,N.jsxs)(d.Z,{size:"small",sx:{minWidth:650},"aria-label":"simple table",children:[(0,N.jsx)(f.Z,{children:(0,N.jsxs)(v.Z,{children:[(0,N.jsx)(c.Z,{children:"Name"}),(0,N.jsx)(c.Z,{children:"Create"}),(0,N.jsx)(c.Z,{align:"left",children:"Read"}),(0,N.jsx)(c.Z,{align:"left",children:"Update"}),(0,N.jsx)(c.Z,{align:"left",children:"Delete"}),(0,N.jsx)(c.Z,{align:"left",children:"Admin"})]})}),(0,N.jsx)(u.Z,{children:z.map((function(e){var n=y.result.network.netStats,t=W.result.network.netStats;return(0,N.jsx)(A,{disableAllRow:!S(t),onChange:q,name:e,row:n},e)}))})]})}),(0,N.jsx)(j.Z,{sx:{display:"flex",width:"100%",justifyContent:"flex-end",marginTop:"20px"},children:(0,N.jsx)(x.Z,{variant:"contained",onClick:H,children:"Update Acl"})})]})}},32037:function(e,n,t){t.d(n,{Z:function(){return i}});t(72791);var r=t(80184);function i(){return(0,r.jsx)("div",{className:"noDataImg"})}},22873:function(e,n,t){t.d(n,{Z:function(){return w}});var r=t(74165),i=t(42982),a=t(15861),l=(t(72791),t(60788)),o=t(40464),s=t(50228),d=t(13811),u=t(29823),c=t(55705),p=t(59911),f=t(11210),v=t(39709),h=t(21176),Z=t(8440),m=t(39571),x=t(17205),g=t(77248),j=t(52775),b=t(80184);function w(e){var n=e.open,t=e.setOpen,w=e.setUsers,C=e.appId,N=(0,f.K)((function(e){return e.apps})),k=((0,f.K)((function(e){return e.addAppUsers})),(0,j.D)().showSnackbar),y=(0,c.TA)({initialValues:{firstName:"",lastName:"",email:""},validate:function(e){var n={};return e.firstName||(n.firstName="Required"),e.lastName||(n.lastName="Required"),e.email||(n.email="Required"),n},onSubmit:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,a){var l,o,s,d,u,c,p,f,v,Z,m,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.email,o=n.firstName,s=n.lastName,d=a.resetForm,(u=a.setSubmitting)(!0),c=N.find((function(e){return e._id===C})),e.prev=4,e.next=7,h.R0(C,l,o,s,null===c||void 0===c?void 0:c.appToken);case 7:p=e.sent,w((function(e){return[].concat((0,i.Z)(e),[p.data.user])})),d(),t(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),k("error","Cannot create user "+(null!==(f=null===(v=e.t0.response)||void 0===v||null===(Z=v.data)||void 0===Z||null===(m=Z.errors)||void 0===m||null===(x=m[0])||void 0===x?void 0:x.msg)&&void 0!==f?f:""));case 16:u(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(n,t){return e.apply(this,arguments)}}()});return 0===N.length?(0,b.jsxs)(l.Z,{open:n,onClose:function(){return t(!1)},"aria-labelledby":"responsive-dialog-title",children:[(0,b.jsx)(o.Z,{id:"responsive-dialog-title",children:"There is no apps"}),(0,b.jsx)(Z.Z,{children:(0,b.jsx)(m.Z,{children:"You should create app first please!"})}),(0,b.jsx)(g.Z,{children:(0,b.jsx)(x.Z,{disabled:y.isSubmitting,variant:"contained",autoFocus:!0,onClick:function(){return t(!1)},children:"Close"})})]}):(0,b.jsx)(l.Z,{onClose:function(){return t(!1)},open:n,children:(0,b.jsxs)(s.Z,{style:{width:"400px"},children:[(0,b.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",padding:1,m:0},children:["New User",(0,b.jsx)(d.Z,{disabled:y.isSubmitting,onClick:function(){return t(!1)},children:(0,b.jsx)(u.Z,{})})]}),(0,b.jsx)(s.Z,{sx:{width:"100%",typography:"body1",padding:1,pt:0},children:(0,b.jsxs)("form",{onSubmit:y.handleSubmit,children:[(0,b.jsxs)(s.Z,{children:[(0,b.jsx)(p.Z,{fullWidth:!0,error:!(!y.touched.firstName||!y.errors.firstName),helperText:y.touched.firstName&&y.errors.firstName?y.errors.firstName:"",margin:"dense",label:"First Name",name:"firstName",variant:"standard",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.firstName}),(0,b.jsx)(p.Z,{fullWidth:!0,error:!(!y.touched.lastName||!y.errors.lastName),helperText:y.touched.lastName&&y.errors.lastName?y.errors.lastName:"",margin:"dense",label:"Last Name",name:"lastName",variant:"standard",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.lastName}),(0,b.jsx)(p.Z,{fullWidth:!0,error:!(!y.touched.lastName||!y.errors.email),helperText:y.touched.email&&y.errors.email?y.errors.email:"",margin:"dense",label:"Email",name:"email",variant:"standard",onChange:y.handleChange,onBlur:y.handleBlur,value:y.values.email})]}),(0,b.jsx)(s.Z,{style:{display:"flex",justifyContent:"center"},children:(0,b.jsx)(v.Z,{loading:y.isSubmitting,variant:"contained",style:{marginTop:"15px"},type:"submit",disabled:y.isSubmitting,children:"Create New User"})})]})})]})})}},68439:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),a=t(80184),l=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");n.Z=l},77248:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(63366),i=t(87462),a=t(72791),l=t(28182),o=t(94419),s=t(60277),d=t(85513),u=t(75878),c=t(21217);function p(e){return(0,c.Z)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var f=t(80184),v=["className","disableSpacing"],h=(0,s.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,!t.disableSpacing&&n.spacing]}})((function(e){var n=e.ownerState;return(0,i.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!n.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),Z=a.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiDialogActions"}),a=t.className,s=t.disableSpacing,u=void 0!==s&&s,c=(0,r.Z)(t,v),Z=(0,i.Z)({},t,{disableSpacing:u}),m=function(e){var n=e.classes,t={root:["root",!e.disableSpacing&&"spacing"]};return(0,o.Z)(t,p,n)}(Z);return(0,f.jsx)(h,(0,i.Z)({className:(0,l.Z)(m.root,a),ownerState:Z,ref:n},c))}))},8440:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(4942),i=t(63366),a=t(87462),l=t(72791),o=t(28182),s=t(94419),d=t(60277),u=t(85513),c=t(75878),p=t(21217);function f(e){return(0,p.Z)("MuiDialogContent",e)}(0,c.Z)("MuiDialogContent",["root","dividers"]);var v=t(5186),h=t(80184),Z=["className","dividers"],m=(0,d.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.dividers&&n.dividers]}})((function(e){var n=e.theme,t=e.ownerState;return(0,a.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((n.vars||n).palette.divider),borderBottom:"1px solid ".concat((n.vars||n).palette.divider)}:(0,r.Z)({},".".concat(v.Z.root," + &"),{paddingTop:0}))})),x=l.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiDialogContent"}),r=t.className,l=t.dividers,d=void 0!==l&&l,c=(0,i.Z)(t,Z),p=(0,a.Z)({},t,{dividers:d}),v=function(e){var n=e.classes,t={root:["root",e.dividers&&"dividers"]};return(0,s.Z)(t,f,n)}(p);return(0,h.jsx)(m,(0,a.Z)({className:(0,o.Z)(v.root,r),ownerState:p,ref:n},c))}))},39571:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(63366),i=t(87462),a=t(72791),l=t(28182),o=t(94419),s=t(60277),d=t(85513),u=t(4565),c=t(75878),p=t(21217);function f(e){return(0,p.Z)("MuiDialogContentText",e)}(0,c.Z)("MuiDialogContentText",["root"]);var v=t(80184),h=["children","className"],Z=(0,s.ZP)(u.Z,{shouldForwardProp:function(e){return(0,s.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,n){return n.root}})({}),m=a.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiDialogContentText"}),a=t.className,s=(0,r.Z)(t,h),u=function(e){var n=e.classes,t=(0,o.Z)({root:["root"]},f,n);return(0,i.Z)({},n,t)}(s);return(0,v.jsx)(Z,(0,i.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:s,className:(0,l.Z)(u.root,a)},t,{classes:u}))}))},68840:function(e,n,t){t(72791);var r=t(40233),i=t(80184);n.Z=(0,r.Z)((0,i.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage")},19458:function(e,n,t){t(72791);var r=t(40233),i=t(80184);n.Z=(0,r.Z)((0,i.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage")},52791:function(e,n,t){var r=(0,t(23814).Z)();n.Z=r}}]);
//# sourceMappingURL=172.55657c31.chunk.js.map