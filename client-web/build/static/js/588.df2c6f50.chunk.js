"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[588],{77588:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var i=t(72791),o=t(20803),r=t(74165),l=t(15861),s=t(70885),a=t(50228),c=t(13811),d=t(96580),u=t(73978),f=t(4565),h=t(91803),p=t(59911),x=t(17205),m=t(64880),j=t(11210),Z=t(85554),v=t(41286),b=t(75426),g=t(60340),y=t(68438),w=t(27247),C=t(50705),k=t(50412),I=t(52775),S=t(47409),P=t(80184);function R(){var e,n=(0,m.UO)().roomJID,t=(0,i.useState)(""),R=(0,s.Z)(t,2),D=R[0],L=R[1],M=(0,i.useState)(""),_=(0,s.Z)(M,2),K=_[0],U=_[1],A=(0,i.useState)(!1),J=(0,s.Z)(A,2),O=J[0],E=J[1],H=(0,i.useState)(!1),T=(0,s.Z)(H,2),W=T[0],$=T[1],N=(0,i.useState)(!1),V=(0,s.Z)(N,2),q=V[0],B=V[1],F=(0,i.useState)(!1),Y=(0,s.Z)(F,2),G=Y[0],Q=Y[1],X=(0,j.K)((function(e){return e.userChatRooms})).find((function(e){return(null===e||void 0===e?void 0:e.jid)===n})),ee=(0,j.K)((function(e){return e.updateUserChatRoom})),ne=(0,j.K)((function(e){return e.roomRoles})),te=(0,I.D)().showSnackbar,ie=(0,m.k6)(),oe=(0,i.useRef)(null),re=null===(e=ne.find((function(e){return e.roomJID===(null===X||void 0===X?void 0:X.jid)})))||void 0===e?void 0:e.role,le="moderator"===re||"owner"===re||"admin"===re,se=X&&(X.group===y.hx.official||X.group===y.hx.favourite),ae=function(e){var n=Object.assign({},X);n.group=e,ee(n)},ce=function(){$(!1)},de=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z.ZP.leaveTheRoom(n),Z.ZP.unsubscribe(n),ce(),ie.push("/chat/none");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(t){var i,o,l,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new FormData).append("files",t),Q("chatIcon"),e.prev=3,e.next=6,(0,S.cT)(i);case 6:o=e.sent,l=n.split("@")[0],Z.ZP.setRoomImage(l,o.data.results[0].location,X.room_background,"icon"),(s=Object.assign({},X)).room_thumbnail=o.data.results[0].location,ee(s),te("success","Success! The chat icon was set"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0),te("error","An error occurred while loading the image.  ( "+e.t0.message+" "+e.t0.response.data+" )");case 19:Q(!1);case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(n){return e.apply(this,arguments)}}();return(0,P.jsxs)(o.Z,{style:{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,P.jsx)("div",{style:{cursor:"pointer"},children:(0,P.jsxs)(a.Z,{sx:{width:200,height:200,margin:5,backgroundColor:"primary.dark",justifyContent:"center",alignItems:"center",display:"flex",borderRadius:"10px",position:"relative"},children:[(0,P.jsxs)(a.Z,{sx:{position:"absolute",top:0,right:0,display:"flex",flexDirection:"column",zIndex:99999},children:[(0,P.jsx)(c.Z,{sx:{color:"white"},onClick:function(){return ae(se?"":y.hx.favourite)},children:se?(0,P.jsx)(g.Z,{}):(0,P.jsx)(b.Z,{})}),le&&(0,P.jsxs)(c.Z,{sx:{color:"white"},onClick:function(){var e;return null===(e=oe.current)||void 0===e?void 0:e.click()},children:[(0,P.jsx)("input",{type:"file",name:"file",id:"file",onChange:function(e){return ue(e.target.files[0])},ref:oe,style:{display:"none"},accept:"image/*"}),"chatIcon"===G?(0,P.jsx)(d.Z,{style:{color:"white"},size:24}):(0,P.jsx)(C.Z,{})]}),le&&(0,P.jsx)(c.Z,{sx:{color:"red"},onClick:function(){return $(!0)},children:(0,P.jsx)(w.Z,{})})]}),(0,P.jsx)(c.Z,{disableRipple:!0,onClick:function(e){le&&ie.push("/changebg/"+n)},children:null!==X&&void 0!==X&&X.room_thumbnail&&"none"!==(null===X||void 0===X?void 0:X.room_thumbnail)?(0,P.jsx)(u.Z,{sx:{width:200,height:200,borderRadius:"10px"},variant:"square",src:X.room_thumbnail}):(0,P.jsx)(f.Z,{color:"white",fontSize:"120px",children:null===X||void 0===X?void 0:X.name[0]})})]})}),(0,P.jsxs)(a.Z,{flexDirection:"row",display:"flex",children:[(0,P.jsx)(f.Z,{fontSize:"20px",fontWeight:"bold",children:null===X||void 0===X?void 0:X.name}),le&&(0,P.jsx)(c.Z,{onClick:function(){return B(!0)},style:{marginLeft:10},children:(0,P.jsx)(v.Z,{fontSize:"small"})})]}),(0,P.jsxs)(o.Z,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center",display:"flex"},children:[(0,P.jsx)(f.Z,{fontSize:"20px",children:null!==X&&void 0!==X&&X.description?X.description:"No description"}),le&&(0,P.jsx)(c.Z,{onClick:function(){return E(!0)},style:{marginLeft:10},children:(0,P.jsx)(v.Z,{fontSize:"small"})})]}),(0,P.jsx)(h.Z,{open:O,onClose:function(){return E(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,P.jsxs)(a.Z,{sx:z,children:[(0,P.jsx)(f.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Set new description"}),(0,P.jsx)(p.Z,{onChange:function(e){return L(e.target.value)},margin:"normal",id:"outlined-basic",label:"Description",variant:"outlined"}),(0,P.jsx)(x.Z,{onClick:function(){E(!1),function(e){Z.ZP.changeRoomDescription(n,e)}(D)},style:{justifyContent:"center",alignItems:"center",display:"flex"},variant:"outlined",children:(0,P.jsx)(f.Z,{id:"modal-modal-description",children:"Submit"})})]})}),(0,P.jsx)(h.Z,{open:q,onClose:function(){return B(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,P.jsxs)(a.Z,{sx:z,children:[(0,P.jsx)(f.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Set new room name"}),(0,P.jsx)(p.Z,{onChange:function(e){return U(e.target.value)},margin:"normal",id:"outlined-basic",label:"Room Name",variant:"outlined"}),(0,P.jsx)(x.Z,{onClick:function(){B(!1),function(e){Z.ZP.changeRoomName(n,e)}(K)},style:{justifyContent:"center",alignItems:"center",display:"flex"},variant:"outlined",children:(0,P.jsx)(f.Z,{id:"modal-modal-description",children:"Submit"})})]})}),(0,P.jsx)(k.A,{open:W,title:"Delete",description:"Do you want to delete this room?",onDeletePress:de,onClose:ce})]})}var z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,justifyContent:"center",flex:"display"},D=t(45629),L=t(76132),M=t(16992),_=t(70324),K=t(52898);function U(){var e,n=(0,m.UO)().roomJID,t=(0,j.K)((function(e){return e.userChatRooms})),o=(0,j.K)((function(e){return e.roomMemberInfo.filter((function(e){return"none"!==e.name}))})),r=(0,j.K)((function(e){return e.user})),l=t.find((function(e){return(null===e||void 0===e?void 0:e.jid)===n})),d=(0,i.useState)(!1),h=(0,s.Z)(d,2),p=h[0],x=h[1],v=(0,i.useState)(),b=(0,s.Z)(v,2),g=(b[0],b[1]),y=(0,i.useState)(null),w=(0,s.Z)(y,2),C=w[0],k=w[1],I=(0,j.K)((function(e){return e.roomRoles})),S=(0,m.k6)(),R=null===(e=I.find((function(e){return e.roomJID===(null===l||void 0===l?void 0:l.jid)})))||void 0===e?void 0:e.role,z=function(e){e.stopPropagation(),k(null),x(!1)};return(0,P.jsxs)(a.Z,{children:[(0,P.jsxs)(f.Z,{variant:"h5",children:["Members (",o.length,")"]}),(0,P.jsx)(D.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:o.map((function(e){return(0,P.jsxs)(L.ZP,{dense:!0,onClick:function(){return function(e){e.jid.includes((0,Z.$I)(r.walletAddress))?S.push("/profile/"+r.walletAddress):S.push("/profile/"+(0,Z.$2)(e.jid.split("@")[0]))}(e)},style:{flexDirection:"row",alignItems:"center"},children:[(0,P.jsx)(a.Z,{alignItems:"center",justifyContent:"center",style:{background:"#003E9C",width:"40px",height:"40px",margin:5,display:"flex"},children:"none"!==e.profile?(0,P.jsx)(u.Z,{style:{width:"40px",height:"40px"},variant:"square",src:e.profile}):(0,P.jsx)(f.Z,{style:{color:"white"},children:e.name?e.name[0]:null})}),(0,P.jsx)(f.Z,{children:e.jid.includes((0,Z.$I)(r.walletAddress))?"You":e.name}),!e.jid.includes((0,Z.$I)(r.walletAddress))&&("moderator"===R||"owner"===R)&&(0,P.jsx)(c.Z,{"aria-label":"more",id:"long-button","aria-haspopup":"true",onClick:function(n){return function(e,n){e.stopPropagation(),g(n),k(e.currentTarget),x(!0)}(n,e)},children:(0,P.jsx)(K.Z,{})}),"owner"===e.role&&(0,P.jsx)(a.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,P.jsx)(f.Z,{children:e.role})}),"clear"!==e.ban_status?(0,P.jsx)(a.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,P.jsx)(f.Z,{children:"banned"})}):null,(0,P.jsx)(M.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:C,open:p,onClose:z,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:(0,P.jsx)(_.Z,{onClick:function(n){return function(e,n){"clear"===e.ban_status?Z.ZP.banUserStanza(e.jid,l.jid):Z.ZP.unbanUserStanza(e.jid,l.jid),Z.ZP.getRoomMemberInfo(l.jid),z(n)}(e,n)},children:"clear"===(null===e||void 0===e?void 0:e.ban_status)?"Ban":"Unban"})})]},e.jid)}))})]})}function A(){var e=(0,m.UO)().roomJID;return(0,i.useEffect)((function(){Z.ZP.getRoomMemberInfo(e),Z.ZP.getRoomInfo(e)}),[]),(0,P.jsxs)(o.Z,{maxWidth:"xl",children:[(0,P.jsx)(R,{}),(0,P.jsx)(U,{})]})}},41286:function(e,n,t){var i=t(64836);n.Z=void 0;var o=i(t(45649)),r=t(80184),l=(0,o.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=l},50705:function(e,n,t){var i=t(64836);n.Z=void 0;var o=i(t(45649)),r=t(80184),l=(0,o.default)((0,r.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}),"InsertPhoto");n.Z=l},52898:function(e,n,t){var i=t(64836);n.Z=void 0;var o=i(t(45649)),r=t(80184),l=(0,o.default)((0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");n.Z=l},75426:function(e,n,t){var i=t(64836);n.Z=void 0;var o=i(t(45649)),r=t(80184),l=(0,o.default)((0,r.jsx)("path",{d:"m12 8.89.94 3.11h2.82l-2.27 1.62.93 3.01L12 14.79l-2.42 1.84.93-3.01L8.24 12h2.82L12 8.89M12 2l-2.42 8H2l6.17 4.41L5.83 22 12 17.31 18.18 22l-2.35-7.59L22 10h-7.58L12 2z"}),"StarPurple500");n.Z=l}}]);
//# sourceMappingURL=588.df2c6f50.chunk.js.map