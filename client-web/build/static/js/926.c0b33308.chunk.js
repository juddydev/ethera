"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[926],{1247:function(e,n,a){a.r(n),a.d(n,{default:function(){return J}});var t=a(72791),s=a(16090),r=a(79271),i=a(70885),l=a(21680),o=a(19773),p=a(24390),c=a(69963),d=a(9827),u=a(60807),f=a(56650),h=a(50228),x=a(4565),m=a(13811),g=a(68439),j=a(95012),Z=a(60788),v=a(40464),A=a(29823),C=a(55705),y=a(59911),b=a(39709),O=a(57337),w=a(72900),N=a(88823),k=a(80184);function S(e){var n=e.open,a=e.setOpen,r=t.useRef(null),l=(0,s.K)((function(e){return e.setApp})),o=(0,t.useState)(!1),p=(0,i.Z)(o,2),c=p[0],d=p[1],u=(0,C.TA)({initialValues:{appName:"",appDescription:"",appGoogleId:"",defaultAccessProfileOpen:!1,defaultAccessAssetsOpen:!1,usersCanFree:!1,newUserTokenGift:0,coinsDayliBonus:0},validate:function(e){var n={};return e.appName||(n.appName="Required"),n},onSubmit:function(e){var n=e.appName,t=e.appDescription,s=e.appGoogleId,i=e.defaultAccessAssetsOpen,o=e.defaultAccessProfileOpen,p=e.usersCanFree;d(!0);var c,u=new FormData;if(r.current){var f=r.current.files;f&&(c=f[0])}c&&u.append("file",c),u.append("appName",n),u.append("appDescription",t),u.append("appGoogleId",s),u.append("defaultAccessAssetsOpen",i.toString()),u.append("defaultAccessProfileOpen",o.toString()),u.append("usersCanFree",p.toString()),O.ri(u).then((function(e){l(e.data.app),a(!1)})).finally((function(){return d(!1)}))}});return(0,k.jsx)(Z.Z,{onClose:function(){},open:n,children:(0,k.jsxs)(h.Z,{children:[(0,k.jsxs)(v.Z,{style:{display:"flex",justifyContent:"space-between"},children:["New App",(0,k.jsx)(m.Z,{disabled:c,onClick:function(){return a(!1)},children:(0,k.jsx)(A.Z,{})})]}),(0,k.jsx)(h.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,k.jsxs)("form",{onSubmit:u.handleSubmit,children:[(0,k.jsx)(h.Z,{children:(0,k.jsx)(y.Z,{error:!(!u.touched.appName||!u.errors.appName),helperText:u.touched.appName&&u.errors.appName?u.errors.appName:"",margin:"dense",label:"App Name",name:"appName",variant:"standard",onChange:u.handleChange,onBlur:u.handleBlur,value:u.values.appName})}),(0,k.jsx)(h.Z,{children:(0,k.jsx)(y.Z,{margin:"dense",label:"Google Client Id",name:"appGoogleId",variant:"standard",onChange:u.handleChange,onBlur:u.handleBlur,value:u.values.appGoogleId})}),(0,k.jsxs)(h.Z,{style:{display:"inline-flex",flexDirection:"column"},children:[(0,k.jsx)(w.Z,{checked:u.values.defaultAccessProfileOpen,name:"defaultAccessProfileOpen",control:(0,k.jsx)(N.Z,{onChange:function(e){return u.setFieldValue("defaultAccessProfileOpen",e.target.checked)}}),label:"defaultAccessProfileOpen",labelPlacement:"end",onChange:u.handleChange}),(0,k.jsx)(w.Z,{checked:u.values.defaultAccessAssetsOpen,name:"defaultAccessAssetsOpen",control:(0,k.jsx)(N.Z,{onChange:function(e){return u.setFieldValue("defaultAccessAssetsOpen",e.target.checked)}}),label:"defaultAccessAssetsOpen",labelPlacement:"end"}),(0,k.jsx)(w.Z,{checked:u.values.usersCanFree,name:"usersCanFree",control:(0,k.jsx)(N.Z,{onChange:function(e){return u.setFieldValue("usersCanFree",e.target.checked)}}),label:"usersCanFree",labelPlacement:"end"}),(0,k.jsx)("input",{ref:r,type:"file",accept:"image/*"}),(0,k.jsx)(b.Z,{loading:c,variant:"contained",style:{marginTop:"15px"},type:"submit",disabled:c,children:"Create App"})]})]})})]})})}var F=a(17205),P=a(77248),D=a(8440),I=a(39571),G=a(52797),T=a(74142);function _(e){var n,a=t.useState(!1),r=(0,i.Z)(a,2),l=r[0],o=r[1],p=(0,s.K)((function(e){return e.deleteApp})),c=(0,T.Z)(),d=(0,G.Z)(c.breakpoints.down("md"));return(0,k.jsx)("div",{children:(0,k.jsxs)(Z.Z,{fullScreen:d,open:e.open,onClose:function(){},"aria-labelledby":"responsive-dialog-title",children:[(0,k.jsxs)(v.Z,{id:"responsive-dialog-title",children:["Are you sure want to remove application ",null===(n=e.app)||void 0===n?void 0:n.appName]}),(0,k.jsx)(D.Z,{children:(0,k.jsx)(I.Z,{children:"Your app clients(mobile, web) will not be able to send requests to Platform API after deleting the app"})}),(0,k.jsxs)(P.Z,{children:[(0,k.jsx)(F.Z,{disabled:l,variant:"contained",autoFocus:!0,onClick:function(){return e.setOpen(!1)},children:"Cancel"}),(0,k.jsx)(b.Z,{variant:"contained",loading:l,color:"error",onClick:function(){var n;e.app&&null!==(n=e.app)&&void 0!==n&&n._id&&(o(!0),O.P2(e.app._id).then((function(){var n;p(null===(n=e.app)||void 0===n?void 0:n._id),e.setOpen(!1)})).finally((function(){return o(!1)})))},autoFocus:!0,children:"Delete"})]})]})})}function M(e){var n=e.open,a=e.setOpen,r=e.app,l=t.useRef(null),o=(0,t.useState)(!1),p=(0,i.Z)(o,2),c=p[0],d=p[1],u=(0,s.K)((function(e){return e.updateApp})),f=(0,C.TA)({initialValues:{appName:r.appName,appDescription:r.appDescription?r.appDescription:"",appGoogleId:r.appGoogleId?r.appGoogleId:"",defaultAccessProfileOpen:r.defaultAccessProfileOpen,defaultAccessAssetsOpen:r.defaultAccessAssetsOpen,usersCanFree:r.usersCanFree},validate:function(e){var n={};return e.appName||(n.appName="Required"),n},onSubmit:function(e){var n=e.appName,t=e.appDescription,s=e.appGoogleId,i=e.defaultAccessAssetsOpen,o=e.defaultAccessProfileOpen,p=e.usersCanFree;d(!0);var c,f=new FormData;if(l.current){var h=l.current.files;h&&(c=h[0])}c&&f.append("file",c),f.append("appName",n),f.append("appDesctription",t),f.append("appGoogleId",s),f.append("defaultAccessAssetsOpen",i.toString()),f.append("defaultAccessProfileOpen",o.toString()),f.append("usersCanFree",p.toString()),O.KT(r._id,f).then((function(e){u(e.data.app),a(!1)})).finally((function(){return d(!1)}))}});return(0,k.jsx)(Z.Z,{onClose:function(){},open:n,children:(0,k.jsxs)(h.Z,{children:[(0,k.jsxs)(v.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Edit App",(0,k.jsx)(m.Z,{disabled:c,onClick:function(){return a(!1)},children:(0,k.jsx)(A.Z,{})})]}),(0,k.jsx)(h.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,k.jsxs)("form",{onSubmit:f.handleSubmit,children:[(0,k.jsx)(h.Z,{children:(0,k.jsx)(y.Z,{error:!(!f.touched.appName||!f.errors.appName),helperText:f.touched.appName&&f.errors.appName?f.errors.appName:"",margin:"dense",label:"App Name",name:"appName",variant:"standard",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.appName})}),(0,k.jsx)(h.Z,{children:(0,k.jsx)(y.Z,{margin:"dense",label:"Google Client Id",name:"appGoogleId",variant:"standard",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.appGoogleId})}),(0,k.jsxs)(h.Z,{style:{display:"inline-flex",flexDirection:"column"},children:[(0,k.jsx)(w.Z,{checked:f.values.defaultAccessProfileOpen,name:"defaultAccessProfileOpen",control:(0,k.jsx)(N.Z,{onChange:function(e){return f.setFieldValue("defaultAccessProfileOpen",e.target.checked)}}),label:"defaultAccessProfileOpen",labelPlacement:"end",onChange:f.handleChange}),(0,k.jsx)(w.Z,{checked:f.values.defaultAccessAssetsOpen,name:"defaultAccessAssetsOpen",control:(0,k.jsx)(N.Z,{onChange:function(e){return f.setFieldValue("defaultAccessAssetsOpen",e.target.checked)}}),label:"defaultAccessAssetsOpen",labelPlacement:"end"}),(0,k.jsx)(w.Z,{checked:f.values.usersCanFree,name:"usersCanFree",control:(0,k.jsx)(N.Z,{onChange:function(e){return f.setFieldValue("usersCanFree",e.target.checked)}}),label:"usersCanFree",labelPlacement:"end"}),(0,k.jsx)("input",{ref:l,type:"file",accept:"image/*"}),(0,k.jsx)(b.Z,{loading:c,variant:"contained",style:{marginTop:"15px"},type:"submit",children:"Update App"})]})]})})]})})}function B(e){var n,a=t.useState(!1),r=(0,i.Z)(a,2),l=r[0],o=r[1],p=(0,s.K)((function(e){return e.updateApp})),c=(0,T.Z)(),d=(0,G.Z)(c.breakpoints.down("md"));return(0,k.jsx)("div",{children:(0,k.jsxs)(Z.Z,{fullScreen:d,open:e.open,onClose:function(){},"aria-labelledby":"responsive-dialog-title",children:[(0,k.jsxs)(v.Z,{id:"responsive-dialog-title",children:["Are you sure want to rotate JWT for application ",null===(n=e.app)||void 0===n?void 0:n.appName]}),(0,k.jsx)(D.Z,{children:(0,k.jsx)(I.Z,{children:"You will need to update your app clients(mobile, web) with new App Jwt"})}),(0,k.jsxs)(P.Z,{children:[(0,k.jsx)(F.Z,{disabled:l,variant:"contained",autoFocus:!0,onClick:function(){return e.setOpen(!1)},children:"Cancel"}),(0,k.jsx)(b.Z,{variant:"contained",loading:l,color:"error",onClick:function(){var n;e.app&&null!==(n=e.app)&&void 0!==n&&n._id&&(o(!0),O.oK(e.app._id).then((function(n){p(n.data.app),e.setOpen(!1)})).finally((function(){return o(!1)})))},autoFocus:!0,children:"Rotate"})]})]})})}function K(){var e=(0,s.K)((function(e){return e.apps})),n=t.useState(!1),a=(0,i.Z)(n,2),r=a[0],Z=a[1],v=t.useState(!1),A=(0,i.Z)(v,2),C=A[0],y=A[1],b=t.useState(!1),O=(0,i.Z)(b,2),w=O[0],N=O[1],F=t.useState(!1),P=(0,i.Z)(F,2),D=P[0],I=P[1],G=t.useState({_id:"",appName:"",appDescription:"",appGoogleId:"",defaultAccessProfileOpen:!1,defaultAccessAssetsOpen:!1,usersCanFree:!1}),T=(0,i.Z)(G,2),K=T[0],V=T[1];return(0,k.jsxs)(c.Z,{component:f.Z,style:{margin:"0 auto"},children:[(0,k.jsxs)(h.Z,{style:{display:"flex",alignItems:"center"},children:[(0,k.jsx)(x.Z,{variant:"h6",style:{margin:"16px"},children:"Apps"}),(0,k.jsx)(m.Z,{onClick:function(){return Z(!0)},size:"large",children:(0,k.jsx)(g.Z,{fontSize:"large"})})]}),0===e.length&&(0,k.jsxs)(h.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,k.jsx)(j.Z,{}),(0,k.jsx)(x.Z,{style:{marginTop:"20px",marginBottom:"20px"},children:"You have not created any apps."})]}),e.length>0&&(0,k.jsxs)(l.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,k.jsx)(d.Z,{children:(0,k.jsxs)(u.Z,{children:[(0,k.jsx)(p.Z,{width:200,children:"Application Name"}),(0,k.jsx)(p.Z,{align:"right",children:"Is Assets Open"}),(0,k.jsx)(p.Z,{align:"right",children:"Is Profile Open"}),(0,k.jsx)(p.Z,{align:"right",children:"Is Users Can Free"}),(0,k.jsx)(p.Z,{align:"right",children:"Created"}),(0,k.jsx)(p.Z,{align:"right",children:"Actions"})]})}),(0,k.jsx)(o.Z,{children:e.map((function(e){return(0,k.jsxs)(u.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,k.jsx)(p.Z,{component:"th",scope:"row",children:e.appName}),(0,k.jsx)(p.Z,{align:"right",children:e.defaultAccessAssetsOpen.toString()}),(0,k.jsx)(p.Z,{align:"right",children:e.defaultAccessProfileOpen.toString()}),(0,k.jsx)(p.Z,{align:"right",children:e.usersCanFree.toString()}),(0,k.jsx)(p.Z,{align:"right",children:new Date(e.createdAt).toDateString()}),(0,k.jsx)(p.Z,{align:"right",children:(0,k.jsxs)(h.Z,{style:{display:"flex",flexDirection:"column"},children:[(0,k.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),function(e){V(e),y(!0)}(e)},children:"Delete"}),(0,k.jsx)("a",{href:"data:text/json;chatset=utf-8,".concat(encodeURIComponent(JSON.stringify({appJwt:e.appToken}))),style:{display:"none"},download:"data.json",id:"app-jwt-".concat(e._id),children:"download jwt"}),(0,k.jsx)("a",{href:"/",onClick:function(n){n.preventDefault();var a=document.querySelector("#app-jwt-".concat(e._id));null===a||void 0===a||a.click()},children:"Download App JWT"}),(0,k.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),function(e){V(e),I(!0)}(e)},children:"Rotate App Jwt"}),(0,k.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),function(e){V(e),N(!0)}(e)},children:"Edit"})]})})]},e._id)}))})]}),(0,k.jsx)(S,{open:r,setOpen:Z}),(0,k.jsx)(_,{app:K,open:C,setOpen:y}),(0,k.jsx)(B,{app:K,open:D,setOpen:I}),w&&(0,k.jsx)(M,{app:K,open:w,setOpen:N})]})}var V=a(65931),R=a(57020);function J(){var e=(0,s.K)((function(e){return e.user})),n=(0,r.k6)();return t.useEffect((function(){e.firstName||(console.log("!owner.firstName"),n.push("/"))}),[e,n]),(0,k.jsx)("div",{style:{backgroundColor:"#edf0f4",padding:"20px"},children:(0,k.jsxs)(R.Z,{maxWidth:"lg",children:[(0,k.jsx)(h.Z,{style:{marginTop:"20px"},children:(0,k.jsx)(K,{})}),(0,k.jsx)(h.Z,{style:{marginTop:"20px"},children:(0,k.jsx)(V.Z,{})})]})})}},52797:function(e,n,a){var t;a.d(n,{Z:function(){return u}});var s=a(70885),r=a(72791),i=a(69120),l=a(33073),o=a(93026);function p(e,n,a,t,i){var l="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,p=r.useState((function(){return i&&l?a(e).matches:t?t(e).matches:n})),c=(0,s.Z)(p,2),d=c[0],u=c[1];return(0,o.Z)((function(){var n=!0;if(l){var t=a(e),s=function(){n&&u(t.matches)};return s(),t.addListener(s),function(){n=!1,t.removeListener(s)}}}),[e,a,l]),d}var c=(t||(t=a.t(r,2))).useSyncExternalStore;function d(e,n,a,t){var i=r.useCallback((function(){return n}),[n]),l=r.useMemo((function(){if(null!==t){var n=t(e).matches;return function(){return n}}return i}),[i,e,t]),o=r.useMemo((function(){if(null===a)return[i,function(){return function(){}}];var n=a(e);return[function(){return n.matches},function(e){return n.addListener(e),function(){n.removeListener(e)}}]}),[i,a,e]),p=(0,s.Z)(o,2),d=p[0],u=p[1];return c(u,d,l)}function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,i.Z)(),t="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,s=(0,l.Z)({name:"MuiUseMediaQuery",props:n,theme:a}),r=s.defaultMatches,o=void 0!==r&&r,u=s.matchMedia,f=void 0===u?t?window.matchMedia:null:u,h=s.ssrMatchMedia,x=void 0===h?null:h,m=s.noSsr;var g="function"===typeof e?e(a):e;g=g.replace(/^@media( ?)/m,"");var j=void 0!==c?d:p,Z=j(g,o,f,x,m);return Z}}}]);
//# sourceMappingURL=926.c0b33308.chunk.js.map