"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[621],{12698:function(e,t,a){a.r(t),a.d(t,{default:function(){return ge}});var n=a(72791),o=a(20803),i=a(74165),r=a(15861),s=a(70885),l=a(21680),c=a(19773),d=a(24390),u=a(69963),p=a(9827),v=a(60807),h=a(56650),g=a(50228),m=a(4565),x=a(13811),f=a(91803),Z=a(68439),b=a(63381),y=a(70324),j=a(11210),C=a(32037),w=a(22873),k=a(81898),S=a(40508),z=a(87462),N=a(63366),P=a(28182),I=a(94419),O=a(85513),B=a(75878),R=a(21217);function L(e){return(0,R.Z)("MuiPagination",e)}(0,B.Z)("MuiPagination",["root","ul","outlined","text"]);var M=a(42982),A=a(58959),F=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];var _=a(4942),W=a(12065);function E(e){return(0,R.Z)("MuiPaginationItem",e)}var T=(0,B.Z)("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),U=a(74142),q=a(60753),V=a(49853),D=a(68840),K=a(19458),G=a(81245),H=a(80184),J=(0,G.Z)((0,H.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Q=(0,G.Z)((0,H.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),X=a(60277),Y=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],$=function(e,t){var a=e.ownerState;return[t.root,t[a.variant],t["size".concat((0,V.Z)(a.size))],"text"===a.variant&&t["text".concat((0,V.Z)(a.color))],"outlined"===a.variant&&t["outlined".concat((0,V.Z)(a.color))],"rounded"===a.shape&&t.rounded,"page"===a.type&&t.page,("start-ellipsis"===a.type||"end-ellipsis"===a.type)&&t.ellipsis,("previous"===a.type||"next"===a.type)&&t.previousNext,("first"===a.type||"last"===a.type)&&t.firstLast]},ee=(0,X.ZP)("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:$})((function(e){var t=e.theme,a=e.ownerState;return(0,z.Z)({},t.typography.body2,(0,_.Z)({borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto"},"&.".concat(T.disabled),{opacity:(t.vars||t).palette.action.disabledOpacity}),"small"===a.size&&{minWidth:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===a.size&&{minWidth:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)})})),te=(0,X.ZP)(q.Z,{name:"MuiPaginationItem",slot:"Root",overridesResolver:$})((function(e){var t,a,n=e.theme,o=e.ownerState;return(0,z.Z)({},n.typography.body2,(a={borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(n.vars||n).palette.text.primary},(0,_.Z)(a,"&.".concat(T.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,_.Z)(a,"&.".concat(T.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,_.Z)(a,"transition",n.transitions.create(["color","background-color"],{duration:n.transitions.duration.short})),(0,_.Z)(a,"&:hover",{backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}),(0,_.Z)(a,"&.".concat(T.selected),(t={backgroundColor:(n.vars||n).palette.action.selected,"&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selected," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,W.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(n.vars||n).palette.action.selected}}},(0,_.Z)(t,"&.".concat(T.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selected," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,W.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),(0,_.Z)(t,"&.".concat(T.disabled),{opacity:1,color:(n.vars||n).palette.action.disabled,backgroundColor:(n.vars||n).palette.action.selected}),t)),a),"small"===o.size&&{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===o.size&&{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:n.typography.pxToRem(15)},"rounded"===o.shape&&{borderRadius:(n.vars||n).shape.borderRadius})}),(function(e){var t=e.theme,a=e.ownerState;return(0,z.Z)({},"text"===a.variant&&(0,_.Z)({},"&.".concat(T.selected),(0,z.Z)({},"standard"!==a.color&&(0,_.Z)({color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}}},"&.".concat(T.focusVisible),{backgroundColor:(t.vars||t).palette[a.color].dark}),(0,_.Z)({},"&.".concat(T.disabled),{color:(t.vars||t).palette.action.disabled}))),"outlined"===a.variant&&(0,_.Z)({border:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"&.".concat(T.selected),(0,z.Z)({},"standard"!==a.color&&(0,_.Z)({color:(t.vars||t).palette[a.color].main,border:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette[a.color].mainChannel," / 0.5)"):(0,W.Fq)(t.palette[a.color].main,.5)),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[a.color].mainChannel," / ").concat(t.vars.palette.action.activatedOpacity,")"):(0,W.Fq)(t.palette[a.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[a.color].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,W.Fq)(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(T.focusVisible),{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[a.color].mainChannel," / calc(").concat(t.vars.palette.action.activatedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,W.Fq)(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}),(0,_.Z)({},"&.".concat(T.disabled),{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}))))})),ae=(0,X.ZP)("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:function(e,t){return t.icon}})((function(e){var t=e.theme,a=e.ownerState;return(0,z.Z)({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},"small"===a.size&&{fontSize:t.typography.pxToRem(18)},"large"===a.size&&{fontSize:t.typography.pxToRem(22)})})),ne=n.forwardRef((function(e,t){var a=(0,O.Z)({props:e,name:"MuiPaginationItem"}),n=a.className,o=a.color,i=void 0===o?"standard":o,r=a.component,s=a.components,l=void 0===s?{}:s,c=a.disabled,d=void 0!==c&&c,u=a.page,p=a.selected,v=void 0!==p&&p,h=a.shape,g=void 0===h?"circular":h,m=a.size,x=void 0===m?"medium":m,f=a.slots,Z=void 0===f?{}:f,b=a.type,y=void 0===b?"page":b,j=a.variant,C=void 0===j?"text":j,w=(0,N.Z)(a,Y),k=(0,z.Z)({},a,{color:i,disabled:d,selected:v,shape:g,size:x,type:y,variant:C}),S=(0,U.Z)(),B=function(e){var t=e.classes,a=e.color,n=e.disabled,o=e.selected,i=e.size,r=e.shape,s=e.type,l=e.variant,c={root:["root","size".concat((0,V.Z)(i)),l,r,"standard"!==a&&"".concat(l).concat((0,V.Z)(a)),n&&"disabled",o&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return(0,I.Z)(c,E,t)}(k),R=("rtl"===S.direction?{previous:Z.next||l.next||Q,next:Z.previous||l.previous||J,last:Z.first||l.first||D.Z,first:Z.last||l.last||K.Z}:{previous:Z.previous||l.previous||J,next:Z.next||l.next||Q,first:Z.first||l.first||D.Z,last:Z.last||l.last||K.Z})[y];return"start-ellipsis"===y||"end-ellipsis"===y?(0,H.jsx)(ee,{ref:t,ownerState:k,className:(0,P.Z)(B.root,n),children:"\u2026"}):(0,H.jsxs)(te,(0,z.Z)({ref:t,ownerState:k,component:r,disabled:d,className:(0,P.Z)(B.root,n)},w,{children:["page"===y&&u,R?(0,H.jsx)(ae,{as:R,ownerState:k,className:B.icon}):null]}))})),oe=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],ie=(0,X.ZP)("nav",{name:"MuiPagination",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,t[a.variant]]}})({}),re=(0,X.ZP)("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:function(e,t){return t.ul}})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function se(e,t,a){return"page"===e?"".concat(a?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}var le=n.forwardRef((function(e,t){var a=(0,O.Z)({props:e,name:"MuiPagination"}),n=a.boundaryCount,o=void 0===n?1:n,i=a.className,r=a.color,l=void 0===r?"standard":r,c=a.count,d=void 0===c?1:c,u=a.defaultPage,p=void 0===u?1:u,v=a.disabled,h=void 0!==v&&v,g=a.getItemAriaLabel,m=void 0===g?se:g,x=a.hideNextButton,f=void 0!==x&&x,Z=a.hidePrevButton,b=void 0!==Z&&Z,y=a.renderItem,j=void 0===y?function(e){return(0,H.jsx)(ne,(0,z.Z)({},e))}:y,C=a.shape,w=void 0===C?"circular":C,k=a.showFirstButton,S=void 0!==k&&k,B=a.showLastButton,R=void 0!==B&&B,_=a.siblingCount,W=void 0===_?1:_,E=a.size,T=void 0===E?"medium":E,U=a.variant,q=void 0===U?"text":U,V=(0,N.Z)(a,oe),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.boundaryCount,a=void 0===t?1:t,n=e.componentName,o=void 0===n?"usePagination":n,i=e.count,r=void 0===i?1:i,l=e.defaultPage,c=void 0===l?1:l,d=e.disabled,u=void 0!==d&&d,p=e.hideNextButton,v=void 0!==p&&p,h=e.hidePrevButton,g=void 0!==h&&h,m=e.onChange,x=e.page,f=e.showFirstButton,Z=void 0!==f&&f,b=e.showLastButton,y=void 0!==b&&b,j=e.siblingCount,C=void 0===j?1:j,w=(0,N.Z)(e,F),k=(0,A.Z)({controlled:x,default:c,name:o,state:"page"}),S=(0,s.Z)(k,2),P=S[0],I=S[1],O=function(e,t){x||I(t),m&&m(e,t)},B=function(e,t){var a=t-e+1;return Array.from({length:a},(function(t,a){return e+a}))},R=B(1,Math.min(a,r)),L=B(Math.max(r-a+1,a+1),r),_=Math.max(Math.min(P-C,r-a-2*C-1),a+2),W=Math.min(Math.max(P+C,a+2*C+2),L.length>0?L[0]-2:r-1),E=[].concat((0,M.Z)(Z?["first"]:[]),(0,M.Z)(g?[]:["previous"]),(0,M.Z)(R),(0,M.Z)(_>a+2?["start-ellipsis"]:a+1<r-a?[a+1]:[]),(0,M.Z)(B(_,W)),(0,M.Z)(W<r-a-1?["end-ellipsis"]:r-a>a?[r-a]:[]),(0,M.Z)(L),(0,M.Z)(v?[]:["next"]),(0,M.Z)(y?["last"]:[])),T=function(e){switch(e){case"first":return 1;case"previous":return P-1;case"next":return P+1;case"last":return r;default:return null}},U=E.map((function(e){return"number"===typeof e?{onClick:function(t){O(t,e)},type:"page",page:e,selected:e===P,disabled:u,"aria-current":e===P?"true":void 0}:{onClick:function(t){O(t,T(e))},type:e,page:T(e),selected:!1,disabled:u||-1===e.indexOf("ellipsis")&&("next"===e||"last"===e?P>=r:P<=1)}}));return(0,z.Z)({items:U},w)}((0,z.Z)({},a,{componentName:"Pagination"})),K=D.items,G=(0,z.Z)({},a,{boundaryCount:o,color:l,count:d,defaultPage:p,disabled:h,getItemAriaLabel:m,hideNextButton:f,hidePrevButton:b,renderItem:j,shape:w,showFirstButton:S,showLastButton:R,siblingCount:W,size:T,variant:q}),J=function(e){var t=e.classes,a={root:["root",e.variant],ul:["ul"]};return(0,I.Z)(a,L,t)}(G);return(0,H.jsx)(ie,(0,z.Z)({"aria-label":"pagination navigation",className:(0,P.Z)(J.root,i),ownerState:G,ref:t},V,{children:(0,H.jsx)(re,{className:J.ul,ownerState:G,children:K.map((function(e,t){return(0,H.jsx)("li",{children:j((0,z.Z)({},e,{color:l,"aria-label":m(e.type,e.page,e.selected),shape:w,size:T,variant:q}))},t)}))})}))})),ce=le,de=a(29823),ue=a(47409),pe=a(54572),ve={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70vw",bgcolor:"background.paper",boxShadow:24,borderRadius:"10px",p:4};function he(){var e,t=(0,j.K)((function(e){return e.apps})),a=(0,j.K)((function(e){var t;return null===(t=e.user.ACL)||void 0===t?void 0:t.ownerAccess})),o=(0,n.useState)(!1),z=(0,s.Z)(o,2),N=z[0],P=z[1],I=(0,n.useState)([]),O=(0,s.Z)(I,2),B=O[0],R=O[1],L=(0,n.useState)(),M=(0,s.Z)(L,2),A=M[0],F=M[1],_=(0,n.useState)({modalOpen:!1,userId:""}),W=(0,s.Z)(_,2),E=W[0],T=W[1],U=(0,n.useState)(!1),q=(0,s.Z)(U,2),V=q[0],D=q[1],K=(0,j.K)((function(e){return e.ACL}));(0,n.useEffect)((function(){D(function(e){var t;if(null===(t=e.result)||void 0===t?void 0:t.application){for(var a,n=Object.keys(null===(a=e.result)||void 0===a?void 0:a.application),o=!1,i=0;i<n.length;i++){var r,s;if(!0===(null===(r=e.result)||void 0===r||null===(s=r.application[n[i]])||void 0===s?void 0:s.admin)){o=!0;break}}return o}return!1}(K))}),[K]);var G=(0,n.useState)(),J=(0,s.Z)(G,2),Q=J[0],X=J[1],Y=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var a,n,o,r,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:10,n=s.length>2&&void 0!==s[2]?s[2]:0,e.prev=2,!t){e.next=11;break}return console.log(t),e.next=7,ue.ES(t,a,n);case 7:return o=e.sent,r=o.data,X({limit:r.limit,offset:r.offset,total:r.total}),e.abrupt("return",r.items);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:return e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){a&&t.length&&(F(t[0]._id),Y(t[0]._id).then((function(e){R(e)})))}),[t,a]),(0,n.useEffect)((function(){!a&&t.length&&(F(t[0]._id),Y(t[0]._id).then((function(e){R(e)})))}),[]),(0,n.useEffect)((function(){console.log("Users mount")}),[]);var $=function(){return T({modalOpen:!1,userId:""})};return(0,H.jsxs)(u.Z,{component:h.Z,style:{margin:"0 auto"},children:[(0,H.jsxs)(g.Z,{style:{display:"flex",alignItems:"center"},children:[(0,H.jsx)(m.Z,{variant:"h6",style:{margin:"16px"},children:"Users"}),A&&a?(0,H.jsxs)(k.Z,{variant:"standard",sx:{m:1,minWidth:120},children:[(0,H.jsx)(S.Z,{id:"demo-simple-select-label",children:"App"}),(0,H.jsx)(b.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"App",value:A,onChange:function(e){F(e.target.value),Y(e.target.value).then((function(e){R(e)}))},children:t.map((function(e){return(0,H.jsx)(y.Z,{value:e._id,children:e.appName},e._id)}))})]}):null,(a||(null===(e=K.result)||void 0===e?void 0:e.application.appUsers.create))&&(0,H.jsx)(x.Z,{onClick:function(){return P(!0)},size:"large",children:(0,H.jsx)(Z.Z,{fontSize:"large"})})]}),0===B.length&&(0,H.jsxs)(g.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,H.jsx)(C.Z,{}),(0,H.jsx)(m.Z,{style:{marginTop:"20px",marginBottom:"20px"},children:"Users not found."})]}),B.length>0&&(0,H.jsxs)(l.Z,{"aria-label":"simple table",children:[(0,H.jsx)(p.Z,{children:(0,H.jsxs)(v.Z,{children:[(0,H.jsx)(d.Z,{width:200,children:"App Id"}),(0,H.jsx)(d.Z,{align:"right",children:"First Name"}),(0,H.jsx)(d.Z,{align:"right",children:"Last Name"}),(0,H.jsx)(d.Z,{align:"right",children:"User Name"}),(0,H.jsx)(d.Z,{align:"right",children:"Email"}),(0,H.jsx)(d.Z,{align:"right",children:"Actions"})]})}),(0,H.jsxs)(c.Z,{children:[B.map((function(e){var t;return(0,H.jsxs)(v.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,H.jsx)(d.Z,{component:"th",scope:"row",children:e.appId}),(0,H.jsx)(d.Z,{align:"right",children:e.firstName}),(0,H.jsx)(d.Z,{align:"right",children:e.lastName}),(0,H.jsx)(d.Z,{align:"right",children:e.username?e.username:"-"}),(0,H.jsx)(d.Z,{align:"right",children:e.email?e.email:"-"}),(0,H.jsx)(d.Z,{align:"right",children:(0,H.jsxs)(g.Z,{sx:{width:"200px"},children:[(null===(t=K.result)||void 0===t?void 0:t.application.appUsers.update)&&(0,H.jsx)(m.Z,{children:"Edit"}),V&&(0,H.jsx)(m.Z,{style:{cursor:"pointer",textDecoration:"underline"},onClick:function(){return t=e._id,T({modalOpen:!0,userId:t});var t},children:"Edit ACL"})]})})]},e._id)})),(null===Q||void 0===Q?void 0:Q.total)&&(0,H.jsx)(v.Z,{children:(0,H.jsx)(d.Z,{colSpan:6,children:(0,H.jsx)(ce,{onChange:function(e,t){var a=0;t-1>0&&(a=(t-1)*((null===Q||void 0===Q?void 0:Q.limit)||10)),Y(A||null,(null===Q||void 0===Q?void 0:Q.limit)||10,a).then((function(e){return R(e)}))},count:Math.ceil(Q.total/Q.limit)})})})]})]}),(0,H.jsx)(w.Z,{open:N,setUsers:R,setOpen:P}),(0,H.jsx)(f.Z,{open:E.modalOpen,onClose:$,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,H.jsxs)(g.Z,{sx:ve,children:[(0,H.jsx)(pe.v,{updateData:function(e){var t=B,a=t.findIndex((function(e){return e._id===E.userId}));t[a]._id=e.result.userId,R(t)},userId:E.userId}),(0,H.jsx)(x.Z,{onClick:$,sx:{position:"absolute",top:0,right:0,color:"black"},children:(0,H.jsx)(de.Z,{fontSize:"large"})})]})})]})}function ge(){return(0,H.jsx)(o.Z,{maxWidth:"xl",style:{height:"calc(100vh - 68px)"},children:(0,H.jsx)(g.Z,{style:{marginTop:"20px"},children:(0,H.jsx)(he,{})})})}}}]);
//# sourceMappingURL=621.b250ece5.chunk.js.map