"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[588],{77588:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var r=t(72791),i=t(20803),o=t(70885),l=t(50228),s=t(73978),a=t(4565),d=t(13811),u=t(91803),c=t(59911),f=t(17205),h=t(64880),p=t(11210),m=t(85554),x=t(41286),j=t(75426),Z=t(60340),b=t(68438),g=t(80184);function v(){var e=(0,h.UO)().roomJID,n=(0,r.useState)(""),t=(0,o.Z)(n,2),v=t[0],w=t[1],C=(0,r.useState)(!1),I=(0,o.Z)(C,2),S=I[0],k=I[1],P=(0,p.K)((function(e){return e.userChatRooms})).filter((function(n){return n.jid===e}))[0],z=(0,p.K)((function(e){return e.userChatRoomGroups})).filter((function(n){return n.jid===e}))[0],L=function(e){var n={jid:P.jid,group:e};z?p.K.getState().updateChatRoomGroups(n):p.K.getState().setNewChatRoomGroups(n)};return(0,g.jsxs)(i.Z,{style:{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,g.jsx)(l.Z,{sx:{width:300,height:300,margin:5,backgroundColor:"primary.dark",justifyContent:"center",alignItems:"center",display:"flex"},children:null!==P&&void 0!==P&&P.room_thumbnail&&"none"!==(null===P||void 0===P?void 0:P.room_thumbnail)?(0,g.jsx)(s.Z,{sx:{width:300,height:300},variant:"square",src:P.room_thumbnail}):(0,g.jsx)(a.Z,{color:"white",fontSize:"120px",children:null===P||void 0===P?void 0:P.name[0]})}),(0,g.jsx)(a.Z,{fontSize:"20px",fontWeight:"bold",children:null===P||void 0===P?void 0:P.name}),z&&z.group===b.hx.official?(0,g.jsx)(Z.Z,{onClick:function(){return L("default")},style:{cursor:"pointer"}}):(0,g.jsx)(j.Z,{onClick:function(){return L(b.hx.official)},style:{cursor:"pointer"}}),(0,g.jsxs)(i.Z,{style:{flexDirection:"row",justifyContent:"center",alignItems:"center",display:"flex"},children:[(0,g.jsx)(a.Z,{fontSize:"20px",children:null!==P&&void 0!==P&&P.description?P.description:"No description set"}),(0,g.jsx)(d.Z,{onClick:function(){return k(!0)},style:{marginLeft:10},children:(0,g.jsx)(x.Z,{fontSize:"small"})})]}),(0,g.jsx)(u.Z,{open:S,onClose:k,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,g.jsxs)(l.Z,{sx:y,children:[(0,g.jsx)(a.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Set new description"}),(0,g.jsx)(c.Z,{onChange:function(e){return w(e.target.value)},margin:"normal",id:"outlined-basic",label:"Description",variant:"outlined"}),(0,g.jsx)(f.Z,{onClick:function(){k(!1),function(n){m.ZP.changeRoomDescription(e,n)}(v)},style:{justifyContent:"center",alignItems:"center",display:"flex"},variant:"outlined",children:(0,g.jsx)(a.Z,{id:"modal-modal-description",children:"Submit"})})]})})]})}var y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,justifyContent:"center",flex:"display"},w=t(70324),C=t(45629),I=t(76132),S=t(16992),k=t(52898);function P(){var e=(0,h.UO)().roomJID,n=(0,p.K)((function(e){return e.userChatRooms})),t=(0,p.K)((function(e){return e.roomMemberInfo.filter((function(e){return"none"!==e.name}))})),i=(0,p.K)((function(e){return e.user})),u=n.filter((function(n){return n.jid===e}))[0],c=(0,p.K)((function(e){return e.roomRoles})),f=(0,r.useState)(!1),x=(0,o.Z)(f,2),j=x[0],Z=x[1],b=(0,r.useState)(),v=(0,o.Z)(b,2),y=v[0],P=v[1],z=(0,r.useState)(null),L=(0,o.Z)(z,2),R=L[0],M=L[1],D=(0,r.useState)(!1),K=(0,o.Z)(D,2),_=(K[0],K[1]),U=(0,h.k6)();console.log(t),(0,r.useEffect)((function(){t.map((function(e){(e.jid.includes((0,m.$I)(i.walletAddress))&&"owner"===e.role||"moderator"===e.role)&&_(!0)}))}),[]);var A=function(e){e.stopPropagation(),M(null),Z(!1)},E=function(e){return console.log(e,":asdadasd"),(0,g.jsx)(w.Z,{onClick:function(n){return function(e,n){console.log(e,"ban member"),"clear"===e.ban_status?m.ZP.banUserStanza(e.jid,u.jid):m.ZP.unbanUserStanza(e.jid,u.jid),m.ZP.getRoomMemberInfo(u.jid),A(n)}(e,n)},children:"clear"===(null===e||void 0===e?void 0:e.ban_status)?"Ban":"Unban"})},$=function(e){var n=c.find((function(e){return e.roomJID===u.jid})).role;return e.jid.includes((0,m.$I)(i.walletAddress))?null:"moderator"===n||"owner"===n?(0,g.jsx)(d.Z,{"aria-label":"more",id:"long-button","aria-haspopup":"true",onClick:function(n){n.stopPropagation(),P(e),M(n.currentTarget),Z(!0)},children:(0,g.jsx)(k.Z,{})}):void 0};return(0,g.jsxs)(l.Z,{children:[(0,g.jsxs)(a.Z,{variant:"h5",children:["Members (",t.length,")"]}),(0,g.jsx)(C.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:t.map((function(e){return(0,g.jsxs)(I.ZP,{dense:!0,onClick:function(){return function(e){e.jid.includes((0,m.$I)(i.walletAddress))?U.push("/profile/"+i.walletAddress):U.push("/profile/"+(0,m.$2)(e.jid.split("@")[0]))}(e)},style:{flexDirection:"row",alignItems:"center"},children:[(0,g.jsx)(l.Z,{alignItems:"center",justifyContent:"center",style:{background:"#003E9C",width:"40px",height:"40px",margin:5,display:"flex"},children:"none"!==e.profile?(0,g.jsx)(s.Z,{style:{width:"40px",height:"40px"},variant:"square",src:e.profile}):(0,g.jsx)(a.Z,{style:{color:"white"},children:e.name?e.name[0]:null})}),(0,g.jsx)(a.Z,{children:e.jid.includes((0,m.$I)(i.walletAddress))?"You":e.name}),$(e),"owner"===e.role?(0,g.jsx)(l.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,g.jsx)(a.Z,{children:e.role})}):null,"clear"!==e.ban_status?(0,g.jsx)(l.Z,{style:{border:"1px solid",borderWidth:1,borderRadius:5,width:"70px",alignItems:"center",display:"flex",justifyContent:"center",marginLeft:10},children:(0,g.jsx)(a.Z,{children:"banned"})}):null,(0,g.jsx)(S.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:R,open:j,onClose:A,PaperProps:{style:{maxHeight:216,width:"20ch"}},children:E(y)})]})}))})]})}function z(){var e=(0,h.UO)().roomJID;return(0,r.useEffect)((function(){m.ZP.getRoomMemberInfo(e),m.ZP.getRoomInfo(e)}),[]),(0,g.jsxs)(i.Z,{maxWidth:"xl",children:[(0,g.jsx)(v,{}),(0,g.jsx)(P,{})]})}},41286:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),o=t(80184),l=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=l},52898:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),o=t(80184),l=(0,i.default)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");n.Z=l},75426:function(e,n,t){var r=t(64836);n.Z=void 0;var i=r(t(45649)),o=t(80184),l=(0,i.default)((0,o.jsx)("path",{d:"m12 8.89.94 3.11h2.82l-2.27 1.62.93 3.01L12 14.79l-2.42 1.84.93-3.01L8.24 12h2.82L12 8.89M12 2l-2.42 8H2l6.17 4.41L5.83 22 12 17.31 18.18 22l-2.35-7.59L22 10h-7.58L12 2z"}),"StarPurple500");n.Z=l}}]);
//# sourceMappingURL=588.7c3fe0c2.chunk.js.map