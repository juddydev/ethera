(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[383],{68383:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var r=n(74165),o=n(15861),i=n(70885),a=n(92148),s=n(42093),u=n(38365),c=n(50228),l=n(17205),f=n(20803),d=n(70043),p=n(72791),h=n(87210),m=n.n(h),w=n(64880),y=n(47465),g=n(12591);var v=function(e){var t,n;function r(t){var n,r=(void 0===t?{}:t).supportedChainIds;return(n=e.call(this)||this).supportedChainIds=r,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.emitUpdate=function(e){this.emit(g._.Update,e)},o.emitError=function(e){this.emit(g._.Error,e)},o.emitDeactivate=function(){this.emit(g._.Deactivate)},r}(y.EventEmitter);function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function k(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e,t,n){return j=_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&C(o,n.prototype),o},j.apply(null,arguments)}function O(e){var t="function"===typeof Map?new Map:void 0;return O=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return j(e,arguments,x(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),C(r,e)},O(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function S(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}function A(e){return e.hasOwnProperty("result")?e.result:e}var N=function(e){function t(){var t;return(t=e.call(this)||this).name=t.constructor.name,t.message="No Ethereum provider was found on window.ethereum.",t}return k(t,e),t}(O(Error)),T=function(e){function t(){var t;return(t=e.call(this)||this).name=t.constructor.name,t.message="The user rejected the request.",t}return k(t,e),t}(O(Error)),I=new(function(e){function t(t){var n;return(n=e.call(this,t)||this).handleNetworkChanged=n.handleNetworkChanged.bind(P(n)),n.handleChainChanged=n.handleChainChanged.bind(P(n)),n.handleAccountsChanged=n.handleAccountsChanged.bind(P(n)),n.handleClose=n.handleClose.bind(P(n)),n}k(t,e);var n=t.prototype;return n.handleChainChanged=function(e){this.emitUpdate({chainId:e,provider:window.ethereum})},n.handleAccountsChanged=function(e){0===e.length?this.emitDeactivate():this.emitUpdate({account:e[0]})},n.handleClose=function(e,t){this.emitDeactivate()},n.handleNetworkChanged=function(e){this.emitUpdate({chainId:e,provider:window.ethereum})},n.activate=function(){try{var e,t=function(t){if(n)return t;function r(){return b({provider:window.ethereum},e?{account:e}:{})}var o=function(){if(!e)return Promise.resolve(window.ethereum.enable().then((function(e){return e&&A(e)[0]}))).then((function(t){e=t}))}();return o&&o.then?o.then(r):r()},n=!1,r=this;if(!window.ethereum)throw new N;window.ethereum.on&&(window.ethereum.on("chainChanged",r.handleChainChanged),window.ethereum.on("accountsChanged",r.handleAccountsChanged),window.ethereum.on("close",r.handleClose),window.ethereum.on("networkChanged",r.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var o=S((function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then((function(e){return A(e)[0]}))).then((function(t){e=t}))}),(function(e){if(4001===e.code)throw new T}));return Promise.resolve(o&&o.then?o.then(t):t(o))}catch(i){return Promise.reject(i)}},n.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(e){return Promise.reject(e)}},n.getChainId=function(){try{var e,t=function(){function t(){if(!e)try{e=A(window.ethereum.send({method:"net_version"}))}catch(t){}return e||(e=window.ethereum.isDapper?A(window.ethereum.cachedResults.net_version):window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId),e}var n=function(){if(!e){var t=S((function(){return Promise.resolve(window.ethereum.send("net_version").then(A)).then((function(t){e=t}))}),(function(){}));if(t&&t.then)return t.then((function(){}))}}();return n&&n.then?n.then(t):t()};if(!window.ethereum)throw new N;var n=S((function(){return Promise.resolve(window.ethereum.send("eth_chainId").then(A)).then((function(t){e=t}))}),(function(){}));return Promise.resolve(n&&n.then?n.then(t):t())}catch(r){return Promise.reject(r)}},n.getAccount=function(){try{var e,t=function(){function t(){return e||(e=A(window.ethereum.send({method:"eth_accounts"}))[0]),e}var n=function(){if(!e){var t=S((function(){return Promise.resolve(window.ethereum.enable().then((function(e){return A(e)[0]}))).then((function(t){e=t}))}),(function(){}));if(t&&t.then)return t.then((function(){}))}}();return n&&n.then?n.then(t):t()};if(!window.ethereum)throw new N;var n=S((function(){return Promise.resolve(window.ethereum.send("eth_accounts").then((function(e){return A(e)[0]}))).then((function(t){e=t}))}),(function(){}));return Promise.resolve(n&&n.then?n.then(t):t())}catch(r){return Promise.reject(r)}},n.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},n.isAuthorized=function(){try{return window.ethereum?Promise.resolve(S((function(){return Promise.resolve(window.ethereum.send("eth_accounts").then((function(e){return A(e).length>0})))}),(function(){return!1}))):Promise.resolve(!1)}catch(e){return Promise.reject(e)}},t}(v))({supportedChainIds:[1,3,4,5,42]}),L=n(47409),M=n(11210),R=n(24177),Z=n(42016),E=n(60788),B=n(40464),F=n(13811),W=n(29823),D=n(55705),U=n(59911),z=n(80184),q=function(e){var t={};return e.firstName||(t.firstName="Required"),e.lastName||(t.lastName="Required"),t};function V(e){var t=e.open,n=e.setOpen,i=(0,d.Ge)(),a=i.account,s=i.library,u=i.deactivate,f=(0,M.K)((function(e){return e.setUser})),p=(0,w.k6)(),h=(0,D.TA)({initialValues:{firstName:"",lastName:""},validate:q,onSubmit:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,i,c,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.getSigner(),e.prev=1,o="Register",e.next=5,n.signMessage(o);case 5:return i=e.sent,e.next=8,(0,L.pR)(a,i,o,t.firstName,t.lastName);case 8:c=e.sent,l=c.data.user,f({_id:l._id,description:l.description,firstName:l.firstName,lastName:l.lastName,xmppPassword:l.xmppPassword,walletAddress:l.defaultWallet.walletAddress,token:c.data.token,refreshToken:c.data.refreshToken,profileImage:l.profileImage,isProfileOpen:l.isProfileOpen,isAssetsOpen:l.isAssetsOpen,ACL:l.ACL,isAllowedNewAppCreate:c.data.isAllowedNewAppCreate,isAgreeWithTerms:l.isAgreeWithTerms}),u(),p.push("/profile/".concat(l.defaultWallet.walletAddress)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("signature error ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()});return(0,z.jsx)(E.Z,{onClose:function(){return n(!1)},maxWidth:!1,open:t,children:(0,z.jsxs)(c.Z,{style:{width:"350px"},children:[(0,z.jsxs)(B.Z,{style:{display:"flex",justifyContent:"space-between"},children:["Continue with Metamask",(0,z.jsx)(F.Z,{onClick:function(){return n(!1)},children:(0,z.jsx)(W.Z,{})})]}),(0,z.jsx)(c.Z,{sx:{width:"100%",typography:"body1",padding:1},children:(0,z.jsxs)("form",{onSubmit:h.handleSubmit,children:[(0,z.jsx)(U.Z,{margin:"dense",inputProps:{autoComplete:"off"},label:"First Name",name:"firstName",type:"text",fullWidth:!0,variant:"standard",onChange:h.handleChange,onBlur:h.handleBlur,error:h.touched.firstName&&Boolean(h.errors.firstName),helperText:h.touched.firstName&&h.errors.firstName?h.errors.firstName:""}),(0,z.jsx)(U.Z,{margin:"dense",label:"Last Name",name:"lastName",type:"text",fullWidth:!0,inputProps:{autoComplete:"off"},variant:"standard",onChange:h.handleChange,onBlur:h.handleBlur,error:h.touched.lastName&&Boolean(h.errors.lastName),helperText:h.touched.lastName&&h.errors.lastName?h.errors.lastName:""}),(0,z.jsx)(c.Z,{sx:{margin:2,display:"flex",justifyContent:"center"},children:(0,z.jsx)(l.Z,{type:"submit",variant:"contained",children:"Register"})})]})})]})})}var H=n(6933),G=n(45100),K=n(68438),Y=n(49540),$=n(52775);function J(){var e=(0,M.K)((function(e){return e.setUser})),t=(0,M.K)((function(e){return e.user})),n=(0,R.aM)(),h=(0,w.k6)(),y=(0,d.Ge)(),g=y.active,v=y.account,b=y.library,k=y.activate,x=(0,p.useState)(!1),C=(0,i.Z)(x,2),_=C[0],j=C[1],O=(0,p.useState)(!1),P=(0,i.Z)(O,2),S=P[0],A=P[1],N=(0,p.useState)(!1),T=(0,i.Z)(N,2),E=T[0],B=T[1],F=(0,p.useState)(!1),W=(0,i.Z)(F,2),D=W[0],U=W[1],q=(0,$.D)().showSnackbar;(0,p.useEffect)((function(){t.firstName&&t.xmppPassword?h.push("/profile/".concat(t.walletAddress)):!t.firstName||t.xmppPassword||h.push("/owner")}),[t]);(0,p.useEffect)((function(){var e=n.get("type");if(e)switch(e){case"username":A(!0);break;case"email":j(!0)}}),[n]),(0,p.useEffect)((function(){console.log("active ",g),g&&(console.log(g,v),v&&!t.firstName&&L.v9(v).then(function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,i,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("login user"),n=b.getSigner(),o="Login",e.next=5,n.signMessage(o);case 5:return i=e.sent,e.next=8,L.ph(v,i,o);case 8:a=e.sent,s=a.data.user,Q(s,a.data),h.push("/profile/".concat(s.defaultWallet.walletAddress));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),e.response&&404===e.response.status?(console.log("registering user"),B(!0)):console.log("other errors")})))}),[g,v]);var J=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o,i,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="google",e.prev=1,e.next=4,(0,Y.qj)();case 4:return n=e.sent,e.next=7,L.O6(n.user.providerData[0].email);case 7:if(e.sent.data.success){e.next=16;break}return e.next=11,L.g7(n.idToken,n.credential.accessToken,t);case 11:o=e.sent,i=o.data.user,Q(i,o.data),e.next=23;break;case 16:return e.next=18,L.iY(n.idToken,n.credential.accessToken,"",t);case 18:return e.next=20,L.g7(n.idToken,n.credential.accessToken,t);case 20:a=e.sent,s=a.data.user,Q(s,a.data);case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),console.log(e.t0),q("error","Cannot authenticate user");case 29:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(){return e.apply(this,arguments)}}(),Q=function(t,n){e({_id:t._id,firstName:t.firstName,lastName:t.lastName,description:t.description,xmppPassword:t.xmppPassword,walletAddress:t.defaultWallet.walletAddress,token:n.token,refreshToken:n.refreshToken,profileImage:t.profileImage,isProfileOpen:t.isProfileOpen,isAssetsOpen:t.isAssetsOpen,ACL:t.ACL,referrerId:t.referrerId||"",isAllowedNewAppCreate:n.isAllowedNewAppCreate,isAgreeWithTerms:t.isAgreeWithTerms})},X=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,i,a,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&void 0!==t&&t.email){e.next=2;break}return e.abrupt("return");case 2:return n="facebook",U(!0),e.next=6,L.O6(t.email);case 6:if(o=e.sent,e.prev=7,o.data.success){e.next=16;break}return e.next=11,L.g7("","",n,t.accessToken);case 11:i=e.sent,a=i.data.user,Q(a,i.data),e.next=23;break;case 16:return e.next=18,L.iY("","",t.accessToken,n);case 18:return e.next=20,L.g7("","",n,t.accessToken);case 20:s=e.sent,u=s.data.user,Q(u,s.data);case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(7),q("error","Cannot authenticate user"),console.log(e.t0);case 29:U(!1);case 30:case"end":return e.stop()}}),e,null,[[7,25]])})));return function(t){return e.apply(this,arguments)}}();return D?(0,z.jsx)(G.A,{}):(0,z.jsxs)(f.Z,{maxWidth:"xl",style:{display:"flex",flexDirection:"column",height:"calc(100vh - 68px)",justifyContent:"center",alignItems:"center"},children:[(0,z.jsxs)(c.Z,{sx:{marginTop:5},style:{display:"flex",maxWidth:"300px",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[K.Az&&(0,z.jsx)(m(),{appId:"1172938123281314",autoLoad:!1,fields:"name,email,picture",onClick:function(){},callback:X,icon:(0,z.jsx)(s.Z,{style:{marginRight:10}}),buttonStyle:{display:"flex",justifyContent:"flex-start",alignItems:"center",fontSize:16,padding:5,borderRadius:4,width:"100%",margin:"3px 0",fontFamily:"Roboto,Helvetica,Arial,sans-serif",fontWeight:500,textTransform:"none",paddingLeft:20},textButton:"Sign In with facebook",containerStyle:{padding:0,width:"100%"}}),K.nS&&(0,z.jsx)(l.Z,{onClick:J,sx:{margin:1},fullWidth:!0,variant:"contained",startIcon:(0,z.jsx)(u.Z,{}),style:{backgroundColor:"white",color:"rgba(0,0,0,0.6)",textTransform:"none",fontSize:"16px"},children:"Sign In with Google"}),K.Jx&&(0,z.jsx)(l.Z,{sx:{margin:1},fullWidth:!0,variant:"contained",onClick:function(){k(I)},startIcon:(0,z.jsx)(a.Z,{}),style:{backgroundColor:"#d9711a",textTransform:"none",fontSize:"16px"},children:"Sign In with Metamask"}),K.lB&&(0,z.jsx)(l.Z,{sx:{margin:1},fullWidth:!0,variant:"text",onClick:function(){return h.push("/regularSignIn")},children:"Login with credentials"})]}),(0,z.jsx)(V,{open:E,setOpen:B}),(0,z.jsx)(Z.W,{open:_,setOpen:j}),(0,z.jsx)(H.t,{open:S,setOpen:A})]})}},92148:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M12.16 3h-.32L9.21 8.25h5.58zm4.3 5.25h5.16L19 3h-5.16zm4.92 1.5h-8.63V20.1zM11.25 20.1V9.75H2.62zM7.54 8.25 10.16 3H5L2.38 8.25z"}),"Diamond");t.Z=a},42093:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}r.default=e,n&&n.set(e,r)}(n(72791));var o=r(n(45649)),i=n(80184);function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var s=(0,o.default)((0,i.jsx)("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook");t.Z=s},38365:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}r.default=e,n&&n.set(e,r)}(n(72791));var o=r(n(45649)),i=n(80184);function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var s=(0,o.default)((0,i.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");t.Z=s},87210:function(e,t,n){var r;e.exports=(r=n(72791),function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(8)},function(e,t,n){e.exports=n(6)()},function(e,t){e.exports=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return decodeURIComponent(e.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=r(n(2)),l=r(n(1)),f=r(n(5)),d=r(n(3)),p=function(){var e=!1;try{e=!!(window.navigator&&window.navigator.standalone||navigator.userAgent.match("CriOS")||navigator.userAgent.match(/mobile/i))}catch(t){}return e},h=function(e){function t(){var e,n,r;o(this,t);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={isSdkLoaded:!1,isProcessing:!1},r.responseApi=function(e){window.FB.api("/me",{locale:r.props.language,fields:r.props.fields},(function(t){s(t,e),r.props.callback(t)}))},r.checkLoginState=function(e){r.setStateIfMounted({isProcessing:!1}),e.authResponse?r.responseApi(e.authResponse):r.props.onFailure?r.props.onFailure({status:e.status}):r.props.callback({status:e.status})},r.checkLoginAfterRefresh=function(e){"connected"===e.status?r.checkLoginState(e):window.FB.login((function(e){return r.checkLoginState(e)}),!0)},r.click=function(e){if(r.state.isSdkLoaded&&!r.state.isProcessing&&!r.props.isDisabled){r.setState({isProcessing:!0});var t=r.props,n=t.scope,o=t.appId,i=t.onClick,a=t.returnScopes,s=t.responseType,u=t.redirectUri,c=t.disableMobileRedirect,l=t.authType,d=t.state;if("function"!=typeof i||(i(e),!e.defaultPrevented)){var p={client_id:o,redirect_uri:u,state:d,return_scopes:a,scope:n,response_type:s,auth_type:l};if(r.props.isMobile&&!c)window.location.href="https://www.facebook.com/dialog/oauth"+(0,f.default)(p);else{if(!window.FB)return void(r.props.onFailure&&r.props.onFailure({status:"facebookNotLoaded"}));window.FB.login(r.checkLoginState,{scope:n,return_scopes:a,auth_type:p.auth_type})}}}},i(r,n)}return a(t,e),u(t,[{key:"componentDidMount",value:function(){if(this._isMounted=!0,document.getElementById("facebook-jssdk"))this.sdkLoaded();else{this.setFbAsyncInit(),this.loadSdkAsynchronously();var e=document.getElementById("fb-root");e||((e=document.createElement("div")).id="fb-root",document.body.appendChild(e))}}},{key:"componentWillReceiveProps",value:function(e){this.state.isSdkLoaded&&e.autoLoad&&!this.props.autoLoad&&window.FB.getLoginStatus(this.checkLoginAfterRefresh)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setStateIfMounted",value:function(e){this._isMounted&&this.setState(e)}},{key:"setFbAsyncInit",value:function(){var e=this,t=this.props,n=t.appId,r=t.xfbml,o=t.cookie,i=t.version,a=t.autoLoad;window.fbAsyncInit=function(){window.FB.init({version:"v"+i,appId:n,xfbml:r,cookie:o}),e.setStateIfMounted({isSdkLoaded:!0}),(a||e.isRedirectedFromFb())&&window.FB.getLoginStatus(e.checkLoginAfterRefresh)}}},{key:"isRedirectedFromFb",value:function(){var e=window.location.search;return(0,d.default)(e,"code")||(0,d.default)(e,"granted_scopes")}},{key:"sdkLoaded",value:function(){this.setState({isSdkLoaded:!0})}},{key:"loadSdkAsynchronously",value:function(){var e=this.props.language;!function(t,n,r){var o=t.getElementsByTagName(n)[0],i=o,a=o;t.getElementById(r)||((a=t.createElement(n)).id=r,a.src="https://connect.facebook.net/"+e+"/sdk.js",i.parentNode.insertBefore(a,i))}(document,"script","facebook-jssdk")}},{key:"render",value:function(){var e=this.props.render;if(!e)throw new Error("ReactFacebookLogin requires a render prop to render");var t={onClick:this.click,isDisabled:!!this.props.isDisabled,isProcessing:this.state.isProcessing,isSdkLoaded:this.state.isSdkLoaded};return this.props.render(t)}}]),t}(c.default.Component);h.propTypes={isDisabled:l.default.bool,callback:l.default.func.isRequired,appId:l.default.string.isRequired,xfbml:l.default.bool,cookie:l.default.bool,authType:l.default.string,scope:l.default.string,state:l.default.string,responseType:l.default.string,returnScopes:l.default.bool,redirectUri:l.default.string,autoLoad:l.default.bool,disableMobileRedirect:l.default.bool,isMobile:l.default.bool,fields:l.default.string,version:l.default.string,language:l.default.string,onClick:l.default.func,onFailure:l.default.func,render:l.default.func.isRequired},h.defaultProps={redirectUri:"undefined"!=typeof window?window.location.href:"/",scope:"public_profile,email",returnScopes:!1,xfbml:!1,cookie:!1,authType:"",fields:"name",version:"2.3",language:"en_US",disableMobileRedirect:!1,isMobile:p(),onFailure:null,state:"facebookdirect",responseType:"code"},t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"?"+Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")}},function(e,t,n){"use strict";function r(){}var o=n(7);e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=r(n(2)),l=r(n(1)),f=r(n(9)),d=r(n(4)),p=function(e){return["button","input","select","textarea","optgroup","option","fieldset"].indexOf((e+"").toLowerCase())>=0},h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"style",value:function(){var e=this.constructor.defaultProps.cssClass;return this.props.cssClass===e&&c.default.createElement("style",{dangerouslySetInnerHTML:{__html:f.default}})}},{key:"containerStyle",value:function(e){var t=e.isProcessing,n=e.isSdkLoaded,r=e.isDisabled,o={transition:"opacity 0.5s"};return(t||!n||r)&&(o.opacity=.6),s(o,this.props.containerStyle)}},{key:"renderOwnButton",value:function(e){var t=this.props,n=t.cssClass,r=t.size,o=t.icon,i=t.textButton,a=t.typeButton,u=t.buttonStyle,l=e.onClick,f="string"==typeof o,d={};return e.isDisabled&&p(this.props.tag)&&(d.disabled=!0),c.default.createElement("span",{style:this.containerStyle(e)},f&&c.default.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"}),c.default.createElement(this.props.tag,s({type:a,className:n+" "+r,style:u,onClick:l},d),o&&f&&c.default.createElement("i",{className:"fa "+o}),o&&!f&&o,i),this.style())}},{key:"render",value:function(){var e=this;return c.default.createElement(d.default,s({},this.props,{render:function(t){return e.renderOwnButton(t)}}))}}]),t}(c.default.Component);h.propTypes={textButton:l.default.string,typeButton:l.default.string,size:l.default.string,cssClass:l.default.string,icon:l.default.any,containerStyle:l.default.object,buttonStyle:l.default.object,tag:l.default.oneOfType([l.default.node,l.default.func])},h.defaultProps={textButton:"Login with Facebook",typeButton:"button",size:"metro",fields:"name",cssClass:"kep-login-facebook",tag:"button"},t.default=h},function(e,t,n){(t=e.exports=n(10)()).push([e.id,".kep-login-facebook{font-family:Helvetica,sans-serif;font-weight:700;-webkit-font-smoothing:antialiased;color:#fff;cursor:pointer;display:inline-block;font-size:calc(.27548vw + 12.71074px);text-decoration:none;text-transform:uppercase;transition:background-color .3s,border-color .3s;background-color:#4c69ba;border:calc(.06887vw + .67769px) solid #4c69ba;padding:calc(.34435vw + 13.38843px) calc(.34435vw + 18.38843px)}.kep-login-facebook.small{padding:calc(.34435vw + 3.38843px) calc(.34435vw + 8.38843px)}.kep-login-facebook.medium{padding:calc(.34435vw + 8.38843px) calc(.34435vw + 13.38843px)}.kep-login-facebook.metro{border-radius:0}.kep-login-facebook .fa{margin-right:calc(.34435vw + 3.38843px)}",""]),t.locals={"kep-login-facebook":"kep-login-facebook",small:"small",medium:"medium",metro:"metro",fa:"fa"}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}}]))}}]);
//# sourceMappingURL=383.8bbcb8ca.chunk.js.map